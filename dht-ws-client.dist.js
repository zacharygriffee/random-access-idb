const cryptoName = "crypto".split("").join("");
if (!globalThis[cryptoName]) {
    globalThis.crypto = await import(cryptoName);
}


var r$l=function r(e,t){if(!e){var o=new a$i(t);throw Error.captureStackTrace&&Error.captureStackTrace(o,r),o}};let a$i = class a extends Error{};a$i.prototype.name="AssertionError";

var r$k=function r(e,t){if(!e){var o=new a$h(t);throw Error.captureStackTrace&&Error.captureStackTrace(o,r),o}};let a$h = class a extends Error{};a$h.prototype.name="AssertionError";

var t$d={exports:{}};function e$b(t){return t.length}var n$k={byteLength:e$b,toString:function(t){const e=t.byteLength;let n="";for(let r=0;r<e;r++)n+=String.fromCharCode(t[r]);return n},write:function(t,n,r=0,o=e$b(n)){const f=Math.min(o,t.byteLength-r);for(let e=0;e<f;e++)t[r+e]=n.charCodeAt(e);return f}};const r$j="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o$n=new Uint8Array(256);for(let t=0;t<64;t++)o$n[r$j.charCodeAt(t)]=t;function f$e(t){let e=t.length;return 61===t.charCodeAt(e-1)&&e--,e>1&&61===t.charCodeAt(e-1)&&e--,3*e>>>2}o$n[45]=62,o$n[95]=63;var i$j={byteLength:f$e,toString:function(t){const e=t.byteLength;let n="";for(let o=0;o<e;o+=3)n+=r$j[t[o]>>2]+r$j[(3&t[o])<<4|t[o+1]>>4]+r$j[(15&t[o+1])<<2|t[o+2]>>6]+r$j[63&t[o+2]];return e%3==2?n=n.substring(0,n.length-1)+"=":e%3==1&&(n=n.substring(0,n.length-2)+"=="),n},write:function(t,e,n=0,r=f$e(e)){const i=Math.min(r,t.byteLength-n);for(let n=0,r=0;r<i;n+=4){const f=o$n[e.charCodeAt(n)],i=o$n[e.charCodeAt(n+1)],u=o$n[e.charCodeAt(n+2)],c=o$n[e.charCodeAt(n+3)];t[r++]=f<<2|i>>4,t[r++]=(15&i)<<4|u>>2,t[r++]=(3&u)<<6|63&c;}return i}};function u$b(t){return t.length>>>1}var c$g={byteLength:u$b,toString:function(t){const e=t.byteLength;t=new DataView(t.buffer,t.byteOffset,e);let n="",r=0;for(let o=e-e%4;r<o;r+=4)n+=t.getUint32(r).toString(16).padStart(8,"0");for(;r<e;r++)n+=t.getUint8(r).toString(16).padStart(2,"0");return n},write:function(t,e,n=0,r=u$b(e)){const o=Math.min(r,t.byteLength-n);for(let r=0;r<o;r++){const o=a$g(e.charCodeAt(2*r)),f=a$g(e.charCodeAt(2*r+1));if(void 0===o||void 0===f)return t.subarray(0,r);t[n+r]=o<<4|f;}return o}};function a$g(t){return t>=48&&t<=57?t-48:t>=65&&t<=70?t-65+10:t>=97&&t<=102?t-97+10:void 0}function g$d(t){let e=0;for(let n=0,r=t.length;n<r;n++){const o=t.charCodeAt(n);if(o>=55296&&o<=56319&&n+1<r){const r=t.charCodeAt(n+1);if(r>=56320&&r<=57343){e+=4,n++;continue}}e+=o<=127?1:o<=2047?2:3;}return e}let s$h,y$h;if("undefined"!=typeof TextDecoder){const t=new TextDecoder;s$h=function(e){return t.decode(e)};}else s$h=function(t){const e=t.byteLength;let n="",r=0;for(;r<e;){let o=t[r];if(o<=127){n+=String.fromCharCode(o),r++;continue}let f=0,i=0;if(o<=223?(f=1,i=31&o):o<=239?(f=2,i=15&o):o<=244&&(f=3,i=7&o),e-r-f>0){let e=0;for(;e<f;)o=t[r+e+1],i=i<<6|63&o,e+=1;}else i=65533,f=e-r;n+=String.fromCodePoint(i),r+=f+1;}return n};if("undefined"!=typeof TextEncoder){const t=new TextEncoder;y$h=function(e,n,r=0,o=g$d(n)){const f=Math.min(o,e.byteLength-r);return t.encodeInto(n,e.subarray(r,r+f)),f};}else y$h=function(t,e,n=0,r=g$d(e)){const o=Math.min(r,t.byteLength-n);t=t.subarray(n,n+o);let f=0,i=0;for(;f<e.length;){const n=e.codePointAt(f);if(n<=127){t[i++]=n,f++;continue}let r=0,o=0;for(n<=2047?(r=6,o=192):n<=65535?(r=12,o=224):n<=2097151&&(r=18,o=240),t[i++]=o|n>>r,r-=6;r>=0;)t[i++]=128|n>>r&63,r-=6;f+=n>=65536?2:1;}return o};var b$6={byteLength:g$d,toString:s$h,write:y$h};function h$g(t){return 2*t.length}var l$e={byteLength:h$g,toString:function(t){const e=t.byteLength;let n="";for(let r=0;r<e-1;r+=2)n+=String.fromCharCode(t[r]+256*t[r+1]);return n},write:function(t,e,n=0,r=h$g(e)){const o=Math.min(r,t.byteLength-n);let f=o;for(let r=0;r<e.length&&!((f-=2)<0);++r){const o=e.charCodeAt(r),f=o>>8,i=o%256;t[n+2*r]=i,t[n+2*r+1]=f;}return o}};!function(t,e){const r=n$k,o=i$j,f=c$g,u=b$6,a=l$e,g=255===new Uint8Array(Uint16Array.of(255).buffer)[0];function s(t){switch(t){case"ascii":return r;case"base64":return o;case"hex":return f;case"utf8":case"utf-8":case void 0:return u;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return a;default:throw new Error(`Unknown encoding: ${t}`)}}function y(t){return t instanceof Uint8Array}function h(t,e,n){return "string"==typeof t?function(t,e){const n=s(e),r=new Uint8Array(n.byteLength(t));return n.write(r,t,0,r.byteLength),r}(t,e):Array.isArray(t)?function(t){const e=new Uint8Array(t.length);return e.set(t),e}(t):ArrayBuffer.isView(t)?function(t){const e=new Uint8Array(t.byteLength);return e.set(t),e}(t):function(t,e,n){return new Uint8Array(t,e,n)}(t,e,n)}function L(t,e,n,r,o){if(0===t.byteLength)return -1;if("string"==typeof n?(r=n,n=0):void 0===n?n=o?0:t.length-1:n<0&&(n+=t.byteLength),n>=t.byteLength){if(o)return -1;n=t.byteLength-1;}else if(n<0){if(!o)return -1;n=0;}if("string"==typeof e)e=h(e,r);else if("number"==typeof e)return e&=255,o?t.indexOf(e,n):t.lastIndexOf(e,n);if(0===e.byteLength)return -1;if(o){let r=-1;for(let o=n;o<t.byteLength;o++)if(t[o]===e[-1===r?0:o-r]){if(-1===r&&(r=o),o-r+1===e.byteLength)return r}else -1!==r&&(o-=o-r),r=-1;}else {n+e.byteLength>t.byteLength&&(n=t.byteLength-e.byteLength);for(let r=n;r>=0;r--){let n=!0;for(let o=0;o<e.byteLength;o++)if(t[r+o]!==e[o]){n=!1;break}if(n)return r}}return -1}function w(t,e,n,r){return L(t,e,n,r,!0)}function d(t,e,n){const r=t[e];t[e]=t[n],t[n]=r;}t.exports=e={isBuffer:y,isEncoding:function(t){try{return s(t),!0}catch{return !1}},alloc:function(t,n,r){const o=new Uint8Array(t);return void 0!==n&&e.fill(o,n,0,o.byteLength,r),o},allocUnsafe:function(t){return new Uint8Array(t)},allocUnsafeSlow:function(t){return new Uint8Array(t)},byteLength:function(t,e){return s(e).byteLength(t)},compare:function(t,e){if(t===e)return 0;const n=Math.min(t.byteLength,e.byteLength);t=new DataView(t.buffer,t.byteOffset,t.byteLength),e=new DataView(e.buffer,e.byteOffset,e.byteLength);let r=0;for(let o=n-n%4;r<o&&t.getUint32(r,g)===e.getUint32(r,g);r+=4);for(;r<n;r++){const n=t.getUint8(r),o=e.getUint8(r);if(n<o)return -1;if(n>o)return 1}return t.byteLength>e.byteLength?1:t.byteLength<e.byteLength?-1:0},concat:function(t,e){void 0===e&&(e=t.reduce(((t,e)=>t+e.byteLength),0));const n=new Uint8Array(e);let r=0;for(const e of t){if(r+e.byteLength>n.byteLength){const t=e.subarray(0,n.byteLength-r);return n.set(t,r),n}n.set(e,r),r+=e.byteLength;}return n},copy:function(t,e,n=0,r=0,o=t.byteLength){if(o>0&&o<r)return 0;if(o===r)return 0;if(0===t.byteLength||0===e.byteLength)return 0;if(n<0)throw new RangeError("targetStart is out of range");if(r<0||r>=t.byteLength)throw new RangeError("sourceStart is out of range");if(o<0)throw new RangeError("sourceEnd is out of range");n>=e.byteLength&&(n=e.byteLength),o>t.byteLength&&(o=t.byteLength),e.byteLength-n<o-r&&(o=e.length-n+r);const f=o-r;return t===e?e.copyWithin(n,r,o):e.set(t.subarray(r,o),n),f},equals:function(t,e){if(t===e)return !0;if(t.byteLength!==e.byteLength)return !1;const n=t.byteLength;t=new DataView(t.buffer,t.byteOffset,t.byteLength),e=new DataView(e.buffer,e.byteOffset,e.byteLength);let r=0;for(let o=n-n%4;r<o;r+=4)if(t.getUint32(r,g)!==e.getUint32(r,g))return !1;for(;r<n;r++)if(t.getUint8(r)!==e.getUint8(r))return !1;return !0},fill:function(t,e,n,r,o){if("string"==typeof e?"string"==typeof n?(o=n,n=0,r=t.byteLength):"string"==typeof r&&(o=r,r=t.byteLength):"number"==typeof e?e&=255:"boolean"==typeof e&&(e=+e),n<0||t.byteLength<n||t.byteLength<r)throw new RangeError("Out of range index");if(void 0===n&&(n=0),void 0===r&&(r=t.byteLength),r<=n)return t;if(e||(e=0),"number"==typeof e)for(let o=n;o<r;++o)t[o]=e;else {const f=(e=y(e)?e:h(e,o)).byteLength;for(let o=0;o<r-n;++o)t[o+n]=e[o%f];}return t},from:h,includes:function(t,e,n,r){return -1!==w(t,e,n,r)},indexOf:w,lastIndexOf:function(t,e,n,r){return L(t,e,n,r,!1)},swap16:function(t){const e=t.byteLength;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let n=0;n<e;n+=2)d(t,n,n+1);return t},swap32:function(t){const e=t.byteLength;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let n=0;n<e;n+=4)d(t,n,n+3),d(t,n+1,n+2);return t},swap64:function(t){const e=t.byteLength;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let n=0;n<e;n+=8)d(t,n,n+7),d(t,n+1,n+6),d(t,n+2,n+5),d(t,n+3,n+4);return t},toBuffer:function(t){return t},toString:function(t,e,n=0,r=t.byteLength){const o=t.byteLength;return n>=o||r<=n?"":(n<0&&(n=0),r>o&&(r=o),(0!==n||r<o)&&(t=t.subarray(n,r)),s(e).toString(t))},write:function(t,e,n,r,o){return void 0===n?o="utf8":void 0===r&&"string"==typeof n?(o=n,n=void 0):void 0===o&&"string"==typeof r&&(o=r,r=void 0),s(o).write(t,e,n,r)},writeDoubleLE:function(t,e,n){return void 0===n&&(n=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat64(n,e,!0),n+8},writeFloatLE:function(t,e,n){return void 0===n&&(n=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat32(n,e,!0),n+4},writeUInt32LE:function(t,e,n){return void 0===n&&(n=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setUint32(n,e,!0),n+4},writeInt32LE:function(t,e,n){return void 0===n&&(n=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setInt32(n,e,!0),n+4},readDoubleLE:function(t,e){return void 0===e&&(e=0),new DataView(t.buffer,t.byteOffset,t.byteLength).getFloat64(e,!0)},readFloatLE:function(t,e){return void 0===e&&(e=0),new DataView(t.buffer,t.byteOffset,t.byteLength).getFloat32(e,!0)},readUInt32LE:function(t,e){return void 0===e&&(e=0),new DataView(t.buffer,t.byteOffset,t.byteLength).getUint32(e,!0)},readInt32LE:function(t,e){return void 0===e&&(e=0),new DataView(t.buffer,t.byteOffset,t.byteLength).getInt32(e,!0)}};}(t$d,t$d.exports);var L$6=t$d.exports;

var g$c,C$9,Q$9={exports:{}},i$i=(()=>{for(var A=new Uint8Array(128),I=0;I<64;I++)A[I<26?I+65:I<52?I+71:I<62?I-4:4*I-205]=I;return I=>{for(var g=I.length,C=new Uint8Array(3*(g-("="==I[g-1])-("="==I[g-2]))/4|0),Q=0,i=0;Q<g;){var t=A[I.charCodeAt(Q++)],e=A[I.charCodeAt(Q++)],E=A[I.charCodeAt(Q++)],o=A[I.charCodeAt(Q++)];C[i++]=t<<2|e>>4,C[i++]=e<<4|E>>2,C[i++]=E<<6|o;}return C}})(),t$c=(g$c={"wasm-binary:./sha512.wat"(A,I){I.exports=i$i("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");}},function(){return C$9||(0, g$c[Object.keys(g$c)[0]])((C$9={exports:{}}).exports,C$9),C$9.exports})(),e$a=new WebAssembly.Module(t$c);const E$b=r$l,o$m=L$6,r$i="undefined"!=typeof WebAssembly&&(s$g={imports:{debug:{log(...A){console.log(...A.map((A=>(A>>>0).toString(16).padStart(8,"0"))));},log_tee:A=>(console.log((A>>>0).toString(16).padStart(8,"0")),A)}}},new WebAssembly.Instance(e$a,s$g).exports);var s$g;let B$b=0;const h$f=[];Q$9.exports=y$g;const n$j=Q$9.exports.SHA512_BYTES=64,D$8=216,p$f=128;function y$g(){if(!(this instanceof y$g))return new y$g;if(!r$i)throw new Error("WASM not loaded. Wait for Sha512.ready(cb)");h$f.length||(h$f.push(B$b),B$b+=D$8),this.finalized=!1,this.digestLength=n$j,this.pointer=h$f.pop(),this.pos=0,this.wasm=r$i,this._memory=new Uint8Array(r$i.memory.buffer),this._memory.fill(0,this.pointer,this.pointer+D$8),this.pointer+this.digestLength>this._memory.length&&this._realloc(this.pointer+D$8);}function w$8(A){if(!(this instanceof w$8))return new w$8(A);this.pad=o$m.alloc(128),this.inner=y$g(),this.outer=y$g();const I=o$m.alloc(64);A.byteLength>128&&(y$g().update(A).digest(I),A=I),this.pad.fill(54);for(let I=0;I<A.byteLength;I++)this.pad[I]^=A[I];this.inner.update(this.pad),this.pad.fill(92);for(let I=0;I<A.byteLength;I++)this.pad[I]^=A[I];this.outer.update(this.pad),this.pad.fill(0),I.fill(0);}function a$f(){}y$g.prototype._realloc=function(A){r$i.memory.grow(Math.max(0,Math.ceil(Math.abs(A-this._memory.length)/65536))),this._memory=new Uint8Array(r$i.memory.buffer);},y$g.prototype.update=function(A,I){E$b(!1===this.finalized,"Hash instance finalized"),B$b%8!=0&&(B$b+=8-B$b%8),E$b(B$b%8==0,"input should be aligned for int64");const[g,C]=function(A,I){var g=o$m.from(A,I);return [g,g.byteLength]}(A,I);return E$b(g instanceof Uint8Array,"input must be Uint8Array or Buffer"),B$b+A.length>this._memory.length&&this._realloc(B$b+A.length),this._memory.fill(0,B$b,B$b+(C+p$f-1&-128)-p$f),this._memory.set(g.subarray(0,p$f-this.pos),this.pointer+80+this.pos),this._memory.set(g.subarray(p$f-this.pos),B$b),this.pos=this.pos+C&127,r$i.sha512(this.pointer,B$b,C,0),this},y$g.prototype.digest=function(A,I=0){E$b(!1===this.finalized,"Hash instance finalized"),this.finalized=!0,h$f.push(this.pointer);const g=this.pointer+80+this.pos;this._memory.fill(0,g,this.pointer+80+p$f),r$i.sha512(this.pointer,B$b,0,1);const C=this._memory.subarray(this.pointer,this.pointer+this.digestLength);if(!A)return C;if("string"==typeof A)return o$m.toString(C,A);E$b(A instanceof Uint8Array,"output must be Uint8Array or Buffer"),E$b(A.byteLength>=this.digestLength+I,"output must have at least 'SHA512_BYTES' bytes remaining");for(let g=0;g<this.digestLength;g++)A[g+I]=C[g];return A},y$g.WASM=r$i,y$g.WASM_SUPPORTED="undefined"!=typeof WebAssembly,y$g.ready=function(A){return A||(A=a$f),r$i?(A(),Promise.resolve()):A(new Error("WebAssembly not supported"))},y$g.prototype.ready=y$g.ready,w$8.prototype.update=function(A,I){return this.inner.update(A,I),this},w$8.prototype.digest=function(A,I=0){return this.outer.update(this.inner.digest()),this.outer.digest(A,I)},y$g.HMAC=w$8;var M$7=Q$9.exports;Q$9.exports.HMAC;Q$9.exports.WASM;Q$9.exports.WASM_SUPPORTED;Q$9.exports.ready;

var h$e={exports:{}};const e$9=r$k,r$h=L$6;var n$i=f$d;const o$l=128;var a$e=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function f$d(){return this instanceof f$d?(this.hh=new Int32Array(8),this.hl=new Int32Array(8),this.buffer=new Uint8Array(128),this.finalised=!1,this.bytesRead=0,this.pos=0,this.hh[0]=1779033703,this.hh[1]=3144134277,this.hh[2]=1013904242,this.hh[3]=2773480762,this.hh[4]=1359893119,this.hh[5]=2600822924,this.hh[6]=528734635,this.hh[7]=1541459225,this.hl[0]=4089235720,this.hl[1]=2227873595,this.hl[2]=4271175723,this.hl[3]=1595750129,this.hl[4]=2917565137,this.hl[5]=725511199,this.hl[6]=4215389547,this.hl[7]=327033209,this):new f$d}function p$e(t,s,i,h){t[s]=i>>24&255,t[s+1]=i>>16&255,t[s+2]=i>>8&255,t[s+3]=255&i,t[s+4]=h>>24&255,t[s+5]=h>>16&255,t[s+6]=h>>8&255,t[s+7]=255&h;}function u$a(t,s,i,h){for(var e,r,n,o,f,p,u,l,d,y,c,b,A,m,g,S,w,x,v,D,L,R,E,M,O,P,U=new Int32Array(16),_=new Int32Array(16),W=t[0],H=t[1],I=t[2],T=t[3],B=t[4],C=t[5],Y=t[6],j=t[7],k=s[0],q=s[1],z=s[2],F=s[3],G=s[4],J=s[5],K=s[6],N=s[7],Q=0;h>=128;){for(v=0;v<16;v++)D=8*v+Q,U[v]=i[D+0]<<24|i[D+1]<<16|i[D+2]<<8|i[D+3],_[v]=i[D+4]<<24|i[D+5]<<16|i[D+6]<<8|i[D+7];for(v=0;v<80;v++)if(e=W,r=H,n=I,o=T,f=B,p=C,u=Y,d=k,y=q,c=z,b=F,A=G,m=J,g=K,E=65535&(R=N),M=R>>>16,O=65535&(L=j),P=L>>>16,E+=65535&(R=(G>>>14|B<<18)^(G>>>18|B<<14)^(B>>>9|G<<23)),M+=R>>>16,O+=65535&(L=(B>>>14|G<<18)^(B>>>18|G<<14)^(G>>>9|B<<23)),P+=L>>>16,E+=65535&(R=G&J^~G&K),M+=R>>>16,O+=65535&(L=B&C^~B&Y),P+=L>>>16,E+=65535&(R=a$e[2*v+1]),M+=R>>>16,O+=65535&(L=a$e[2*v]),P+=L>>>16,L=U[v%16],M+=(R=_[v%16])>>>16,O+=65535&L,P+=L>>>16,O+=(M+=(E+=65535&R)>>>16)>>>16,E=65535&(R=x=65535&E|M<<16),M=R>>>16,O=65535&(L=w=65535&O|(P+=O>>>16)<<16),P=L>>>16,E+=65535&(R=(k>>>28|W<<4)^(W>>>2|k<<30)^(W>>>7|k<<25)),M+=R>>>16,O+=65535&(L=(W>>>28|k<<4)^(k>>>2|W<<30)^(k>>>7|W<<25)),P+=L>>>16,M+=(R=k&q^k&z^q&z)>>>16,O+=65535&(L=W&H^W&I^H&I),P+=L>>>16,l=65535&(O+=(M+=(E+=65535&R)>>>16)>>>16)|(P+=O>>>16)<<16,S=65535&E|M<<16,E=65535&(R=b),M=R>>>16,O=65535&(L=o),P=L>>>16,M+=(R=x)>>>16,O+=65535&(L=w),P+=L>>>16,H=e,I=r,T=n,B=o=65535&(O+=(M+=(E+=65535&R)>>>16)>>>16)|(P+=O>>>16)<<16,C=f,Y=p,j=u,W=l,q=d,z=y,F=c,G=b=65535&E|M<<16,J=A,K=m,N=g,k=S,v%16==15)for(D=0;D<16;D++)L=U[D],E=65535&(R=_[D]),M=R>>>16,O=65535&L,P=L>>>16,L=U[(D+9)%16],E+=65535&(R=_[(D+9)%16]),M+=R>>>16,O+=65535&L,P+=L>>>16,w=U[(D+1)%16],E+=65535&(R=((x=_[(D+1)%16])>>>1|w<<31)^(x>>>8|w<<24)^(x>>>7|w<<25)),M+=R>>>16,O+=65535&(L=(w>>>1|x<<31)^(w>>>8|x<<24)^w>>>7),P+=L>>>16,w=U[(D+14)%16],M+=(R=((x=_[(D+14)%16])>>>19|w<<13)^(w>>>29|x<<3)^(x>>>6|w<<26))>>>16,O+=65535&(L=(w>>>19|x<<13)^(x>>>29|w<<3)^w>>>6),P+=L>>>16,P+=(O+=(M+=(E+=65535&R)>>>16)>>>16)>>>16,U[D]=65535&O|P<<16,_[D]=65535&E|M<<16;E=65535&(R=k),M=R>>>16,O=65535&(L=W),P=L>>>16,L=t[0],M+=(R=s[0])>>>16,O+=65535&L,P+=L>>>16,P+=(O+=(M+=(E+=65535&R)>>>16)>>>16)>>>16,t[0]=W=65535&O|P<<16,s[0]=k=65535&E|M<<16,E=65535&(R=q),M=R>>>16,O=65535&(L=H),P=L>>>16,L=t[1],M+=(R=s[1])>>>16,O+=65535&L,P+=L>>>16,P+=(O+=(M+=(E+=65535&R)>>>16)>>>16)>>>16,t[1]=H=65535&O|P<<16,s[1]=q=65535&E|M<<16,E=65535&(R=z),M=R>>>16,O=65535&(L=I),P=L>>>16,L=t[2],M+=(R=s[2])>>>16,O+=65535&L,P+=L>>>16,P+=(O+=(M+=(E+=65535&R)>>>16)>>>16)>>>16,t[2]=I=65535&O|P<<16,s[2]=z=65535&E|M<<16,E=65535&(R=F),M=R>>>16,O=65535&(L=T),P=L>>>16,L=t[3],M+=(R=s[3])>>>16,O+=65535&L,P+=L>>>16,P+=(O+=(M+=(E+=65535&R)>>>16)>>>16)>>>16,t[3]=T=65535&O|P<<16,s[3]=F=65535&E|M<<16,E=65535&(R=G),M=R>>>16,O=65535&(L=B),P=L>>>16,L=t[4],M+=(R=s[4])>>>16,O+=65535&L,P+=L>>>16,P+=(O+=(M+=(E+=65535&R)>>>16)>>>16)>>>16,t[4]=B=65535&O|P<<16,s[4]=G=65535&E|M<<16,E=65535&(R=J),M=R>>>16,O=65535&(L=C),P=L>>>16,L=t[5],M+=(R=s[5])>>>16,O+=65535&L,P+=L>>>16,P+=(O+=(M+=(E+=65535&R)>>>16)>>>16)>>>16,t[5]=C=65535&O|P<<16,s[5]=J=65535&E|M<<16,E=65535&(R=K),M=R>>>16,O=65535&(L=Y),P=L>>>16,L=t[6],M+=(R=s[6])>>>16,O+=65535&L,P+=L>>>16,P+=(O+=(M+=(E+=65535&R)>>>16)>>>16)>>>16,t[6]=Y=65535&O|P<<16,s[6]=K=65535&E|M<<16,E=65535&(R=N),M=R>>>16,O=65535&(L=j),P=L>>>16,L=t[7],M+=(R=s[7])>>>16,O+=65535&L,P+=L>>>16,P+=(O+=(M+=(E+=65535&R)>>>16)>>>16)>>>16,t[7]=j=65535&O|P<<16,s[7]=N=65535&E|M<<16,Q+=128,h-=128;}}function l$d(t){if(!(this instanceof l$d))return new l$d(t);this.pad=r$h.alloc(128),this.inner=f$d(),this.outer=f$d();const s=r$h.alloc(64);t.byteLength>128&&(f$d().update(t).digest(s),t=s),this.pad.fill(54);for(let s=0;s<t.byteLength;s++)this.pad[s]^=t[s];this.inner.update(this.pad),this.pad.fill(92);for(let s=0;s<t.byteLength;s++)this.pad[s]^=t[s];this.outer.update(this.pad),this.pad.fill(0),s.fill(0);}f$d.prototype.update=function(t,s){e$9(!1===this.finalised,"Hash instance finalised");var[i,h]=function(t,s){var i=r$h.from(t,s);return [i,i.byteLength]}(t,s);this.bytesRead+=h;const n=h+this.pos&-128;this.buffer.set(i.subarray(0,o$l-this.pos),this.pos);const a=this.pos;return (h-=o$l-this.pos)>=0&&(u$a(this.hh,this.hl,this.buffer,128),this.pos=0),h>127&&(u$a(this.hh,this.hl,i.subarray(o$l-a,n-a),n-o$l),h%=128),this.buffer.set(i.subarray(i.byteLength-h)),this.pos=127&this.bytesRead,this.buffer.fill(0,this.pos),this},f$d.prototype.digest=function(t,s=0){if(e$9(!1===this.finalised,"Hash instance finalised"),this.finalised=!0,this.buffer.fill(0,this.pos),this.buffer[this.pos]=128,this.pos>111&&(u$a(this.hh,this.hl,this.buffer,128),this.buffer.fill(0),this.pos=0),p$e(this.buffer,120,this.bytesRead/536870912|0,this.bytesRead<<3),u$a(this.hh,this.hl,this.buffer,128),t instanceof Uint8Array&&t.byteLength>63){for(let i=0;i<8;i++)p$e(t,8*i+s,this.hh[i],this.hl[i]);return t}const i=new Uint8Array(64);for(let t=0;t<8;t++)p$e(i,8*t,this.hh[t],this.hl[t]);return "string"==typeof t?r$h.toString(i,t):i},l$d.prototype.update=function(t,s){return this.inner.update(t,s),this},l$d.prototype.digest=function(t,s=0){return this.outer.update(this.inner.digest()),this.outer.digest(t,s)},f$d.HMAC=l$d;const d$a=M$7;var y$f=n$i;h$e.exports=function(){return new y$f};h$e.exports.ready=function(t){d$a.ready((function(){t();}));};h$e.exports.WASM_SUPPORTED=d$a.SUPPORTED;h$e.exports.WASM_LOADED=!1;h$e.exports.SHA512_BYTES=64,d$a.ready((function(t){t||(h$e.exports.WASM_LOADED=!0,h$e.exports=y$f=d$a);}));var m$9=h$e.exports;

var C$8,g$b,i$h={exports:{}},h$d=(()=>{for(var A=new Uint8Array(128),I=0;I<64;I++)A[I<26?I+65:I<52?I+71:I<62?I-4:4*I-205]=I;return I=>{for(var C=I.length,g=new Uint8Array(3*(C-("="==I[C-1])-("="==I[C-2]))/4|0),i=0,h=0;i<C;){var Q=A[I.charCodeAt(i++)],E=A[I.charCodeAt(i++)],B=A[I.charCodeAt(i++)],o=A[I.charCodeAt(i++)];g[h++]=Q<<2|E>>4,g[h++]=E<<4|B>>2,g[h++]=B<<6|o;}return g}})(),Q$8=(C$8={"wasm-binary:./blake2b.wat"(A,I){I.exports=h$d("AGFzbQEAAAABEANgAn9/AGADf39/AGABfwADBQQAAQICBQUBAQroBwdNBQZtZW1vcnkCAAxibGFrZTJiX2luaXQAAA5ibGFrZTJiX3VwZGF0ZQABDWJsYWtlMmJfZmluYWwAAhBibGFrZTJiX2NvbXByZXNzAAMKvz8EwAIAIABCADcDACAAQgA3AwggAEIANwMQIABCADcDGCAAQgA3AyAgAEIANwMoIABCADcDMCAAQgA3AzggAEIANwNAIABCADcDSCAAQgA3A1AgAEIANwNYIABCADcDYCAAQgA3A2ggAEIANwNwIABCADcDeCAAQoiS853/zPmE6gBBACkDAIU3A4ABIABCu86qptjQ67O7f0EIKQMAhTcDiAEgAEKr8NP0r+68tzxBECkDAIU3A5ABIABC8e30+KWn/aelf0EYKQMAhTcDmAEgAELRhZrv+s+Uh9EAQSApAwCFNwOgASAAQp/Y+dnCkdqCm39BKCkDAIU3A6gBIABC6/qG2r+19sEfQTApAwCFNwOwASAAQvnC+JuRo7Pw2wBBOCkDAIU3A7gBIABCADcDwAEgAEIANwPIASAAQgA3A9ABC20BA38gAEHAAWohAyAAQcgBaiEEIAQpAwCnIQUCQANAIAEgAkYNASAFQYABRgRAIAMgAykDACAFrXw3AwBBACEFIAAQAwsgACAFaiABLQAAOgAAIAVBAWohBSABQQFqIQEMAAsLIAQgBa03AwALYQEDfyAAQcABaiEBIABByAFqIQIgASABKQMAIAIpAwB8NwMAIABCfzcD0AEgAikDAKchAwJAA0AgA0GAAUYNASAAIANqQQA6AAAgA0EBaiEDDAALCyACIAOtNwMAIAAQAwuqOwIgfgl/IABBgAFqISEgAEGIAWohIiAAQZABaiEjIABBmAFqISQgAEGgAWohJSAAQagBaiEmIABBsAFqIScgAEG4AWohKCAhKQMAIQEgIikDACECICMpAwAhAyAkKQMAIQQgJSkDACEFICYpAwAhBiAnKQMAIQcgKCkDACEIQoiS853/zPmE6gAhCUK7zqqm2NDrs7t/IQpCq/DT9K/uvLc8IQtC8e30+KWn/aelfyEMQtGFmu/6z5SH0QAhDUKf2PnZwpHagpt/IQ5C6/qG2r+19sEfIQ9C+cL4m5Gjs/DbACEQIAApAwAhESAAKQMIIRIgACkDECETIAApAxghFCAAKQMgIRUgACkDKCEWIAApAzAhFyAAKQM4IRggACkDQCEZIAApA0ghGiAAKQNQIRsgACkDWCEcIAApA2AhHSAAKQNoIR4gACkDcCEfIAApA3ghICANIAApA8ABhSENIA8gACkD0AGFIQ8gASAFIBF8fCEBIA0gAYVCIIohDSAJIA18IQkgBSAJhUIYiiEFIAEgBSASfHwhASANIAGFQhCKIQ0gCSANfCEJIAUgCYVCP4ohBSACIAYgE3x8IQIgDiAChUIgiiEOIAogDnwhCiAGIAqFQhiKIQYgAiAGIBR8fCECIA4gAoVCEIohDiAKIA58IQogBiAKhUI/iiEGIAMgByAVfHwhAyAPIAOFQiCKIQ8gCyAPfCELIAcgC4VCGIohByADIAcgFnx8IQMgDyADhUIQiiEPIAsgD3whCyAHIAuFQj+KIQcgBCAIIBd8fCEEIBAgBIVCIIohECAMIBB8IQwgCCAMhUIYiiEIIAQgCCAYfHwhBCAQIASFQhCKIRAgDCAQfCEMIAggDIVCP4ohCCABIAYgGXx8IQEgECABhUIgiiEQIAsgEHwhCyAGIAuFQhiKIQYgASAGIBp8fCEBIBAgAYVCEIohECALIBB8IQsgBiALhUI/iiEGIAIgByAbfHwhAiANIAKFQiCKIQ0gDCANfCEMIAcgDIVCGIohByACIAcgHHx8IQIgDSAChUIQiiENIAwgDXwhDCAHIAyFQj+KIQcgAyAIIB18fCEDIA4gA4VCIIohDiAJIA58IQkgCCAJhUIYiiEIIAMgCCAefHwhAyAOIAOFQhCKIQ4gCSAOfCEJIAggCYVCP4ohCCAEIAUgH3x8IQQgDyAEhUIgiiEPIAogD3whCiAFIAqFQhiKIQUgBCAFICB8fCEEIA8gBIVCEIohDyAKIA98IQogBSAKhUI/iiEFIAEgBSAffHwhASANIAGFQiCKIQ0gCSANfCEJIAUgCYVCGIohBSABIAUgG3x8IQEgDSABhUIQiiENIAkgDXwhCSAFIAmFQj+KIQUgAiAGIBV8fCECIA4gAoVCIIohDiAKIA58IQogBiAKhUIYiiEGIAIgBiAZfHwhAiAOIAKFQhCKIQ4gCiAOfCEKIAYgCoVCP4ohBiADIAcgGnx8IQMgDyADhUIgiiEPIAsgD3whCyAHIAuFQhiKIQcgAyAHICB8fCEDIA8gA4VCEIohDyALIA98IQsgByALhUI/iiEHIAQgCCAefHwhBCAQIASFQiCKIRAgDCAQfCEMIAggDIVCGIohCCAEIAggF3x8IQQgECAEhUIQiiEQIAwgEHwhDCAIIAyFQj+KIQggASAGIBJ8fCEBIBAgAYVCIIohECALIBB8IQsgBiALhUIYiiEGIAEgBiAdfHwhASAQIAGFQhCKIRAgCyAQfCELIAYgC4VCP4ohBiACIAcgEXx8IQIgDSAChUIgiiENIAwgDXwhDCAHIAyFQhiKIQcgAiAHIBN8fCECIA0gAoVCEIohDSAMIA18IQwgByAMhUI/iiEHIAMgCCAcfHwhAyAOIAOFQiCKIQ4gCSAOfCEJIAggCYVCGIohCCADIAggGHx8IQMgDiADhUIQiiEOIAkgDnwhCSAIIAmFQj+KIQggBCAFIBZ8fCEEIA8gBIVCIIohDyAKIA98IQogBSAKhUIYiiEFIAQgBSAUfHwhBCAPIASFQhCKIQ8gCiAPfCEKIAUgCoVCP4ohBSABIAUgHHx8IQEgDSABhUIgiiENIAkgDXwhCSAFIAmFQhiKIQUgASAFIBl8fCEBIA0gAYVCEIohDSAJIA18IQkgBSAJhUI/iiEFIAIgBiAdfHwhAiAOIAKFQiCKIQ4gCiAOfCEKIAYgCoVCGIohBiACIAYgEXx8IQIgDiAChUIQiiEOIAogDnwhCiAGIAqFQj+KIQYgAyAHIBZ8fCEDIA8gA4VCIIohDyALIA98IQsgByALhUIYiiEHIAMgByATfHwhAyAPIAOFQhCKIQ8gCyAPfCELIAcgC4VCP4ohByAEIAggIHx8IQQgECAEhUIgiiEQIAwgEHwhDCAIIAyFQhiKIQggBCAIIB58fCEEIBAgBIVCEIohECAMIBB8IQwgCCAMhUI/iiEIIAEgBiAbfHwhASAQIAGFQiCKIRAgCyAQfCELIAYgC4VCGIohBiABIAYgH3x8IQEgECABhUIQiiEQIAsgEHwhCyAGIAuFQj+KIQYgAiAHIBR8fCECIA0gAoVCIIohDSAMIA18IQwgByAMhUIYiiEHIAIgByAXfHwhAiANIAKFQhCKIQ0gDCANfCEMIAcgDIVCP4ohByADIAggGHx8IQMgDiADhUIgiiEOIAkgDnwhCSAIIAmFQhiKIQggAyAIIBJ8fCEDIA4gA4VCEIohDiAJIA58IQkgCCAJhUI/iiEIIAQgBSAafHwhBCAPIASFQiCKIQ8gCiAPfCEKIAUgCoVCGIohBSAEIAUgFXx8IQQgDyAEhUIQiiEPIAogD3whCiAFIAqFQj+KIQUgASAFIBh8fCEBIA0gAYVCIIohDSAJIA18IQkgBSAJhUIYiiEFIAEgBSAafHwhASANIAGFQhCKIQ0gCSANfCEJIAUgCYVCP4ohBSACIAYgFHx8IQIgDiAChUIgiiEOIAogDnwhCiAGIAqFQhiKIQYgAiAGIBJ8fCECIA4gAoVCEIohDiAKIA58IQogBiAKhUI/iiEGIAMgByAefHwhAyAPIAOFQiCKIQ8gCyAPfCELIAcgC4VCGIohByADIAcgHXx8IQMgDyADhUIQiiEPIAsgD3whCyAHIAuFQj+KIQcgBCAIIBx8fCEEIBAgBIVCIIohECAMIBB8IQwgCCAMhUIYiiEIIAQgCCAffHwhBCAQIASFQhCKIRAgDCAQfCEMIAggDIVCP4ohCCABIAYgE3x8IQEgECABhUIgiiEQIAsgEHwhCyAGIAuFQhiKIQYgASAGIBd8fCEBIBAgAYVCEIohECALIBB8IQsgBiALhUI/iiEGIAIgByAWfHwhAiANIAKFQiCKIQ0gDCANfCEMIAcgDIVCGIohByACIAcgG3x8IQIgDSAChUIQiiENIAwgDXwhDCAHIAyFQj+KIQcgAyAIIBV8fCEDIA4gA4VCIIohDiAJIA58IQkgCCAJhUIYiiEIIAMgCCARfHwhAyAOIAOFQhCKIQ4gCSAOfCEJIAggCYVCP4ohCCAEIAUgIHx8IQQgDyAEhUIgiiEPIAogD3whCiAFIAqFQhiKIQUgBCAFIBl8fCEEIA8gBIVCEIohDyAKIA98IQogBSAKhUI/iiEFIAEgBSAafHwhASANIAGFQiCKIQ0gCSANfCEJIAUgCYVCGIohBSABIAUgEXx8IQEgDSABhUIQiiENIAkgDXwhCSAFIAmFQj+KIQUgAiAGIBZ8fCECIA4gAoVCIIohDiAKIA58IQogBiAKhUIYiiEGIAIgBiAYfHwhAiAOIAKFQhCKIQ4gCiAOfCEKIAYgCoVCP4ohBiADIAcgE3x8IQMgDyADhUIgiiEPIAsgD3whCyAHIAuFQhiKIQcgAyAHIBV8fCEDIA8gA4VCEIohDyALIA98IQsgByALhUI/iiEHIAQgCCAbfHwhBCAQIASFQiCKIRAgDCAQfCEMIAggDIVCGIohCCAEIAggIHx8IQQgECAEhUIQiiEQIAwgEHwhDCAIIAyFQj+KIQggASAGIB98fCEBIBAgAYVCIIohECALIBB8IQsgBiALhUIYiiEGIAEgBiASfHwhASAQIAGFQhCKIRAgCyAQfCELIAYgC4VCP4ohBiACIAcgHHx8IQIgDSAChUIgiiENIAwgDXwhDCAHIAyFQhiKIQcgAiAHIB18fCECIA0gAoVCEIohDSAMIA18IQwgByAMhUI/iiEHIAMgCCAXfHwhAyAOIAOFQiCKIQ4gCSAOfCEJIAggCYVCGIohCCADIAggGXx8IQMgDiADhUIQiiEOIAkgDnwhCSAIIAmFQj+KIQggBCAFIBR8fCEEIA8gBIVCIIohDyAKIA98IQogBSAKhUIYiiEFIAQgBSAefHwhBCAPIASFQhCKIQ8gCiAPfCEKIAUgCoVCP4ohBSABIAUgE3x8IQEgDSABhUIgiiENIAkgDXwhCSAFIAmFQhiKIQUgASAFIB18fCEBIA0gAYVCEIohDSAJIA18IQkgBSAJhUI/iiEFIAIgBiAXfHwhAiAOIAKFQiCKIQ4gCiAOfCEKIAYgCoVCGIohBiACIAYgG3x8IQIgDiAChUIQiiEOIAogDnwhCiAGIAqFQj+KIQYgAyAHIBF8fCEDIA8gA4VCIIohDyALIA98IQsgByALhUIYiiEHIAMgByAcfHwhAyAPIAOFQhCKIQ8gCyAPfCELIAcgC4VCP4ohByAEIAggGXx8IQQgECAEhUIgiiEQIAwgEHwhDCAIIAyFQhiKIQggBCAIIBR8fCEEIBAgBIVCEIohECAMIBB8IQwgCCAMhUI/iiEIIAEgBiAVfHwhASAQIAGFQiCKIRAgCyAQfCELIAYgC4VCGIohBiABIAYgHnx8IQEgECABhUIQiiEQIAsgEHwhCyAGIAuFQj+KIQYgAiAHIBh8fCECIA0gAoVCIIohDSAMIA18IQwgByAMhUIYiiEHIAIgByAWfHwhAiANIAKFQhCKIQ0gDCANfCEMIAcgDIVCP4ohByADIAggIHx8IQMgDiADhUIgiiEOIAkgDnwhCSAIIAmFQhiKIQggAyAIIB98fCEDIA4gA4VCEIohDiAJIA58IQkgCCAJhUI/iiEIIAQgBSASfHwhBCAPIASFQiCKIQ8gCiAPfCEKIAUgCoVCGIohBSAEIAUgGnx8IQQgDyAEhUIQiiEPIAogD3whCiAFIAqFQj+KIQUgASAFIB18fCEBIA0gAYVCIIohDSAJIA18IQkgBSAJhUIYiiEFIAEgBSAWfHwhASANIAGFQhCKIQ0gCSANfCEJIAUgCYVCP4ohBSACIAYgEnx8IQIgDiAChUIgiiEOIAogDnwhCiAGIAqFQhiKIQYgAiAGICB8fCECIA4gAoVCEIohDiAKIA58IQogBiAKhUI/iiEGIAMgByAffHwhAyAPIAOFQiCKIQ8gCyAPfCELIAcgC4VCGIohByADIAcgHnx8IQMgDyADhUIQiiEPIAsgD3whCyAHIAuFQj+KIQcgBCAIIBV8fCEEIBAgBIVCIIohECAMIBB8IQwgCCAMhUIYiiEIIAQgCCAbfHwhBCAQIASFQhCKIRAgDCAQfCEMIAggDIVCP4ohCCABIAYgEXx8IQEgECABhUIgiiEQIAsgEHwhCyAGIAuFQhiKIQYgASAGIBh8fCEBIBAgAYVCEIohECALIBB8IQsgBiALhUI/iiEGIAIgByAXfHwhAiANIAKFQiCKIQ0gDCANfCEMIAcgDIVCGIohByACIAcgFHx8IQIgDSAChUIQiiENIAwgDXwhDCAHIAyFQj+KIQcgAyAIIBp8fCEDIA4gA4VCIIohDiAJIA58IQkgCCAJhUIYiiEIIAMgCCATfHwhAyAOIAOFQhCKIQ4gCSAOfCEJIAggCYVCP4ohCCAEIAUgGXx8IQQgDyAEhUIgiiEPIAogD3whCiAFIAqFQhiKIQUgBCAFIBx8fCEEIA8gBIVCEIohDyAKIA98IQogBSAKhUI/iiEFIAEgBSAefHwhASANIAGFQiCKIQ0gCSANfCEJIAUgCYVCGIohBSABIAUgHHx8IQEgDSABhUIQiiENIAkgDXwhCSAFIAmFQj+KIQUgAiAGIBh8fCECIA4gAoVCIIohDiAKIA58IQogBiAKhUIYiiEGIAIgBiAffHwhAiAOIAKFQhCKIQ4gCiAOfCEKIAYgCoVCP4ohBiADIAcgHXx8IQMgDyADhUIgiiEPIAsgD3whCyAHIAuFQhiKIQcgAyAHIBJ8fCEDIA8gA4VCEIohDyALIA98IQsgByALhUI/iiEHIAQgCCAUfHwhBCAQIASFQiCKIRAgDCAQfCEMIAggDIVCGIohCCAEIAggGnx8IQQgECAEhUIQiiEQIAwgEHwhDCAIIAyFQj+KIQggASAGIBZ8fCEBIBAgAYVCIIohECALIBB8IQsgBiALhUIYiiEGIAEgBiARfHwhASAQIAGFQhCKIRAgCyAQfCELIAYgC4VCP4ohBiACIAcgIHx8IQIgDSAChUIgiiENIAwgDXwhDCAHIAyFQhiKIQcgAiAHIBV8fCECIA0gAoVCEIohDSAMIA18IQwgByAMhUI/iiEHIAMgCCAZfHwhAyAOIAOFQiCKIQ4gCSAOfCEJIAggCYVCGIohCCADIAggF3x8IQMgDiADhUIQiiEOIAkgDnwhCSAIIAmFQj+KIQggBCAFIBN8fCEEIA8gBIVCIIohDyAKIA98IQogBSAKhUIYiiEFIAQgBSAbfHwhBCAPIASFQhCKIQ8gCiAPfCEKIAUgCoVCP4ohBSABIAUgF3x8IQEgDSABhUIgiiENIAkgDXwhCSAFIAmFQhiKIQUgASAFICB8fCEBIA0gAYVCEIohDSAJIA18IQkgBSAJhUI/iiEFIAIgBiAffHwhAiAOIAKFQiCKIQ4gCiAOfCEKIAYgCoVCGIohBiACIAYgGnx8IQIgDiAChUIQiiEOIAogDnwhCiAGIAqFQj+KIQYgAyAHIBx8fCEDIA8gA4VCIIohDyALIA98IQsgByALhUIYiiEHIAMgByAUfHwhAyAPIAOFQhCKIQ8gCyAPfCELIAcgC4VCP4ohByAEIAggEXx8IQQgECAEhUIgiiEQIAwgEHwhDCAIIAyFQhiKIQggBCAIIBl8fCEEIBAgBIVCEIohECAMIBB8IQwgCCAMhUI/iiEIIAEgBiAdfHwhASAQIAGFQiCKIRAgCyAQfCELIAYgC4VCGIohBiABIAYgE3x8IQEgECABhUIQiiEQIAsgEHwhCyAGIAuFQj+KIQYgAiAHIB58fCECIA0gAoVCIIohDSAMIA18IQwgByAMhUIYiiEHIAIgByAYfHwhAiANIAKFQhCKIQ0gDCANfCEMIAcgDIVCP4ohByADIAggEnx8IQMgDiADhUIgiiEOIAkgDnwhCSAIIAmFQhiKIQggAyAIIBV8fCEDIA4gA4VCEIohDiAJIA58IQkgCCAJhUI/iiEIIAQgBSAbfHwhBCAPIASFQiCKIQ8gCiAPfCEKIAUgCoVCGIohBSAEIAUgFnx8IQQgDyAEhUIQiiEPIAogD3whCiAFIAqFQj+KIQUgASAFIBt8fCEBIA0gAYVCIIohDSAJIA18IQkgBSAJhUIYiiEFIAEgBSATfHwhASANIAGFQhCKIQ0gCSANfCEJIAUgCYVCP4ohBSACIAYgGXx8IQIgDiAChUIgiiEOIAogDnwhCiAGIAqFQhiKIQYgAiAGIBV8fCECIA4gAoVCEIohDiAKIA58IQogBiAKhUI/iiEGIAMgByAYfHwhAyAPIAOFQiCKIQ8gCyAPfCELIAcgC4VCGIohByADIAcgF3x8IQMgDyADhUIQiiEPIAsgD3whCyAHIAuFQj+KIQcgBCAIIBJ8fCEEIBAgBIVCIIohECAMIBB8IQwgCCAMhUIYiiEIIAQgCCAWfHwhBCAQIASFQhCKIRAgDCAQfCEMIAggDIVCP4ohCCABIAYgIHx8IQEgECABhUIgiiEQIAsgEHwhCyAGIAuFQhiKIQYgASAGIBx8fCEBIBAgAYVCEIohECALIBB8IQsgBiALhUI/iiEGIAIgByAafHwhAiANIAKFQiCKIQ0gDCANfCEMIAcgDIVCGIohByACIAcgH3x8IQIgDSAChUIQiiENIAwgDXwhDCAHIAyFQj+KIQcgAyAIIBR8fCEDIA4gA4VCIIohDiAJIA58IQkgCCAJhUIYiiEIIAMgCCAdfHwhAyAOIAOFQhCKIQ4gCSAOfCEJIAggCYVCP4ohCCAEIAUgHnx8IQQgDyAEhUIgiiEPIAogD3whCiAFIAqFQhiKIQUgBCAFIBF8fCEEIA8gBIVCEIohDyAKIA98IQogBSAKhUI/iiEFIAEgBSARfHwhASANIAGFQiCKIQ0gCSANfCEJIAUgCYVCGIohBSABIAUgEnx8IQEgDSABhUIQiiENIAkgDXwhCSAFIAmFQj+KIQUgAiAGIBN8fCECIA4gAoVCIIohDiAKIA58IQogBiAKhUIYiiEGIAIgBiAUfHwhAiAOIAKFQhCKIQ4gCiAOfCEKIAYgCoVCP4ohBiADIAcgFXx8IQMgDyADhUIgiiEPIAsgD3whCyAHIAuFQhiKIQcgAyAHIBZ8fCEDIA8gA4VCEIohDyALIA98IQsgByALhUI/iiEHIAQgCCAXfHwhBCAQIASFQiCKIRAgDCAQfCEMIAggDIVCGIohCCAEIAggGHx8IQQgECAEhUIQiiEQIAwgEHwhDCAIIAyFQj+KIQggASAGIBl8fCEBIBAgAYVCIIohECALIBB8IQsgBiALhUIYiiEGIAEgBiAafHwhASAQIAGFQhCKIRAgCyAQfCELIAYgC4VCP4ohBiACIAcgG3x8IQIgDSAChUIgiiENIAwgDXwhDCAHIAyFQhiKIQcgAiAHIBx8fCECIA0gAoVCEIohDSAMIA18IQwgByAMhUI/iiEHIAMgCCAdfHwhAyAOIAOFQiCKIQ4gCSAOfCEJIAggCYVCGIohCCADIAggHnx8IQMgDiADhUIQiiEOIAkgDnwhCSAIIAmFQj+KIQggBCAFIB98fCEEIA8gBIVCIIohDyAKIA98IQogBSAKhUIYiiEFIAQgBSAgfHwhBCAPIASFQhCKIQ8gCiAPfCEKIAUgCoVCP4ohBSABIAUgH3x8IQEgDSABhUIgiiENIAkgDXwhCSAFIAmFQhiKIQUgASAFIBt8fCEBIA0gAYVCEIohDSAJIA18IQkgBSAJhUI/iiEFIAIgBiAVfHwhAiAOIAKFQiCKIQ4gCiAOfCEKIAYgCoVCGIohBiACIAYgGXx8IQIgDiAChUIQiiEOIAogDnwhCiAGIAqFQj+KIQYgAyAHIBp8fCEDIA8gA4VCIIohDyALIA98IQsgByALhUIYiiEHIAMgByAgfHwhAyAPIAOFQhCKIQ8gCyAPfCELIAcgC4VCP4ohByAEIAggHnx8IQQgECAEhUIgiiEQIAwgEHwhDCAIIAyFQhiKIQggBCAIIBd8fCEEIBAgBIVCEIohECAMIBB8IQwgCCAMhUI/iiEIIAEgBiASfHwhASAQIAGFQiCKIRAgCyAQfCELIAYgC4VCGIohBiABIAYgHXx8IQEgECABhUIQiiEQIAsgEHwhCyAGIAuFQj+KIQYgAiAHIBF8fCECIA0gAoVCIIohDSAMIA18IQwgByAMhUIYiiEHIAIgByATfHwhAiANIAKFQhCKIQ0gDCANfCEMIAcgDIVCP4ohByADIAggHHx8IQMgDiADhUIgiiEOIAkgDnwhCSAIIAmFQhiKIQggAyAIIBh8fCEDIA4gA4VCEIohDiAJIA58IQkgCCAJhUI/iiEIIAQgBSAWfHwhBCAPIASFQiCKIQ8gCiAPfCEKIAUgCoVCGIohBSAEIAUgFHx8IQQgDyAEhUIQiiEPIAogD3whCiAFIAqFQj+KIQUgISAhKQMAIAEgCYWFNwMAICIgIikDACACIAqFhTcDACAjICMpAwAgAyALhYU3AwAgJCAkKQMAIAQgDIWFNwMAICUgJSkDACAFIA2FhTcDACAmICYpAwAgBiAOhYU3AwAgJyAnKQMAIAcgD4WFNwMAICggKCkDACAIIBCFhTcDAAs=");}},function(){return g$b||(0, C$8[Object.keys(C$8)[0]])((g$b={exports:{}}).exports,g$b),g$b.exports})(),E$a=WebAssembly.compile(Q$8),B$a=r$l,o$k=L$6,D$7=null,f$c="undefined"!=typeof WebAssembly&&(async A=>(await WebAssembly.instantiate(await E$a,void 0)).exports)().then((A=>{D$7=A;})),t$b=64,e$8=[];i$h.exports=s$f;var y$e=i$h.exports.BYTES_MIN=16,w$7=i$h.exports.BYTES_MAX=64;i$h.exports.BYTES=32;var K$6=i$h.exports.KEYBYTES_MIN=16,F$6=i$h.exports.KEYBYTES_MAX=64;i$h.exports.KEYBYTES=32;var U$7=i$h.exports.SALTBYTES=16,S$9=i$h.exports.PERSONALBYTES=16;function s$f(A,I,C,g,i){if(!(this instanceof s$f))return new s$f(A,I,C,g,i);if(!D$7)throw new Error("WASM not loaded. Wait for Blake2b.ready(cb)");A||(A=32),!0!==i&&(B$a(A>=y$e,"digestLength must be at least "+y$e+", was given "+A),B$a(A<=w$7,"digestLength must be at most "+w$7+", was given "+A),null!=I&&(B$a(I instanceof Uint8Array,"key must be Uint8Array or Buffer"),B$a(I.length>=K$6,"key must be at least "+K$6+", was given "+I.length),B$a(I.length<=F$6,"key must be at least "+F$6+", was given "+I.length)),null!=C&&(B$a(C instanceof Uint8Array,"salt must be Uint8Array or Buffer"),B$a(C.length===U$7,"salt must be exactly "+U$7+", was given "+C.length)),null!=g&&(B$a(g instanceof Uint8Array,"personal must be Uint8Array or Buffer"),B$a(g.length===S$9,"personal must be exactly "+S$9+", was given "+g.length))),e$8.length||(e$8.push(t$b),t$b+=216),this.digestLength=A,this.finalized=!1,this.pointer=e$8.pop(),this._memory=new Uint8Array(D$7.memory.buffer),this._memory.fill(0,0,64),this._memory[0]=this.digestLength,this._memory[1]=I?I.length:0,this._memory[2]=1,this._memory[3]=1,C&&this._memory.set(C,32),g&&this._memory.set(g,48),this.pointer+216>this._memory.length&&this._realloc(this.pointer+216),D$7.blake2b_init(this.pointer,this.digestLength),I&&(this.update(I),this._memory.fill(0,t$b,t$b+I.length),this._memory[this.pointer+200]=128);}function n$h(){}s$f.prototype._realloc=function(A){D$7.memory.grow(Math.max(0,Math.ceil(Math.abs(A-this._memory.length)/65536))),this._memory=new Uint8Array(D$7.memory.buffer);},s$f.prototype.update=function(A){return B$a(!1===this.finalized,"Hash instance finalized"),B$a(A instanceof Uint8Array,"input must be Uint8Array or Buffer"),t$b+A.length>this._memory.length&&this._realloc(t$b+A.length),this._memory.set(A,t$b),D$7.blake2b_update(this.pointer,t$b,t$b+A.length),this},s$f.prototype.digest=function(A){if(B$a(!1===this.finalized,"Hash instance finalized"),this.finalized=!0,e$8.push(this.pointer),D$7.blake2b_final(this.pointer),!A||"binary"===A)return this._memory.slice(this.pointer+128,this.pointer+128+this.digestLength);if("string"==typeof A)return o$k.toString(this._memory,A,this.pointer+128,this.pointer+128+this.digestLength);B$a(A instanceof Uint8Array&&A.length>=this.digestLength,"input must be Uint8Array or Buffer");for(var I=0;I<this.digestLength;I++)A[I]=this._memory[this.pointer+128+I];return A},s$f.prototype.final=s$f.prototype.digest,s$f.WASM=D$7,s$f.SUPPORTED="undefined"!=typeof WebAssembly,s$f.ready=function(A){return A||(A=n$h),f$c?f$c.then((()=>A()),A):A(new Error("WebAssembly not supported"))},s$f.prototype.ready=s$f.ready,s$f.prototype.getPartialHash=function(){return this._memory.slice(this.pointer,this.pointer+216)},s$f.prototype.setPartialHash=function(A){this._memory.set(A,this.pointer);};var r$g=i$h.exports;i$h.exports.SUPPORTED;i$h.exports.WASM;i$h.exports.ready;

var n$g={exports:{}},e$7=r$l,a$d=r$g;function o$j(t,r,n){var e=t[r]+t[n],a=t[r+1]+t[n+1];e>=4294967296&&a++,t[r]=e,t[r+1]=a;}function s$e(t,r,n,e){var a=t[r]+n;n<0&&(a+=4294967296);var o=t[r+1]+e;a>=4294967296&&o++,t[r]=a,t[r+1]=o;}function i$g(t,r){return t[r]^t[r+1]<<8^t[r+2]<<16^t[r+3]<<24}function u$9(t,r,n,e,a,i){var u=y$d[a],f=y$d[a+1],l=y$d[i],h=y$d[i+1];o$j(c$f,t,r),s$e(c$f,t,u,f);var p=c$f[e]^c$f[t],A=c$f[e+1]^c$f[t+1];c$f[e]=A,c$f[e+1]=p,o$j(c$f,n,e),p=c$f[r]^c$f[n],A=c$f[r+1]^c$f[n+1],c$f[r]=p>>>24^A<<8,c$f[r+1]=A>>>24^p<<8,o$j(c$f,t,r),s$e(c$f,t,l,h),p=c$f[e]^c$f[t],A=c$f[e+1]^c$f[t+1],c$f[e]=p>>>16^A<<16,c$f[e+1]=A>>>16^p<<16,o$j(c$f,n,e),p=c$f[r]^c$f[n],A=c$f[r+1]^c$f[n+1],c$f[r]=A>>>31^p<<1,c$f[r+1]=p>>>31^A<<1;}var f$b=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),l$c=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3].map((function(t){return 2*t}))),c$f=new Uint32Array(32),y$d=new Uint32Array(32);function h$c(t,r){var n=0;for(n=0;n<16;n++)c$f[n]=t.h[n],c$f[n+16]=f$b[n];for(c$f[24]=c$f[24]^t.t,c$f[25]=c$f[25]^t.t/4294967296,r&&(c$f[28]=~c$f[28],c$f[29]=~c$f[29]),n=0;n<32;n++)y$d[n]=i$g(t.b,4*n);for(n=0;n<12;n++)u$9(0,8,16,24,l$c[16*n+0],l$c[16*n+1]),u$9(2,10,18,26,l$c[16*n+2],l$c[16*n+3]),u$9(4,12,20,28,l$c[16*n+4],l$c[16*n+5]),u$9(6,14,22,30,l$c[16*n+6],l$c[16*n+7]),u$9(0,10,20,30,l$c[16*n+8],l$c[16*n+9]),u$9(2,12,22,24,l$c[16*n+10],l$c[16*n+11]),u$9(4,14,16,26,l$c[16*n+12],l$c[16*n+13]),u$9(6,8,18,28,l$c[16*n+14],l$c[16*n+15]);for(n=0;n<16;n++)t.h[n]=t.h[n]^c$f[n]^c$f[n+16];}var p$d=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function A$9(t,r,n,e){p$d.fill(0),this.b=new Uint8Array(128),this.h=new Uint32Array(16),this.t=0,this.c=0,this.outlen=t,p$d[0]=t,r&&(p$d[1]=r.length),p$d[2]=1,p$d[3]=1,n&&p$d.set(n,32),e&&p$d.set(e,48);for(var a=0;a<16;a++)this.h[a]=f$b[a]^i$g(p$d,4*a);r&&(v$6(this,r),this.c=128);}function v$6(t,r){for(var n=0;n<r.length;n++)128===t.c&&(t.t+=t.c,h$c(t,!1),t.c=0),t.b[t.c++]=r[n];}function m$8(t){return t<16?"0"+t.toString(16):t.toString(16)}A$9.prototype.update=function(t){return e$7(t instanceof Uint8Array,"input must be Uint8Array or Buffer"),v$6(this,t),this},A$9.prototype.digest=function(t){var r=t&&"binary"!==t&&"hex"!==t?t:new Uint8Array(this.outlen);return e$7(r instanceof Uint8Array,'out must be "binary", "hex", Uint8Array, or Buffer'),e$7(r.length>=this.outlen,"out must have at least outlen bytes of space"),function(t,r){for(t.t+=t.c;t.c<128;)t.b[t.c++]=0;h$c(t,!0);for(var n=0;n<t.outlen;n++)r[n]=t.h[n>>2]>>8*(3&n);}(this,r),"hex"===t?function(t){for(var r="",n=0;n<t.length;n++)r+=m$8(t[n]);return r}(r):r},A$9.prototype.final=A$9.prototype.digest,A$9.ready=function(t){a$d.ready((function(){t();}));};var g$a=A$9;n$g.exports=function(t,r,n,a,o){return !0!==o&&(e$7(t>=S$8,"outlen must be at least "+S$8+", was given "+t),e$7(t<=E$9,"outlen must be at most "+E$9+", was given "+t),null!=r&&(e$7(r instanceof Uint8Array,"key must be Uint8Array or Buffer"),e$7(r.length>=w$6,"key must be at least "+w$6+", was given "+r.length),e$7(r.length<=B$9,"key must be at most "+B$9+", was given "+r.length)),null!=n&&(e$7(n instanceof Uint8Array,"salt must be Uint8Array or Buffer"),e$7(n.length===T$6,"salt must be exactly "+T$6+", was given "+n.length)),null!=a&&(e$7(a instanceof Uint8Array,"personal must be Uint8Array or Buffer"),e$7(a.length===Y$5,"personal must be exactly "+Y$5+", was given "+a.length))),new g$a(t,r,n,a)};n$g.exports.ready=function(t){a$d.ready((function(){t();}));};n$g.exports.WASM_SUPPORTED=a$d.SUPPORTED;n$g.exports.WASM_LOADED=!1;var S$8=n$g.exports.BYTES_MIN=16,E$9=n$g.exports.BYTES_MAX=64;n$g.exports.BYTES=32;var w$6=n$g.exports.KEYBYTES_MIN=16,B$9=n$g.exports.KEYBYTES_MAX=64;n$g.exports.KEYBYTES=32;var T$6=n$g.exports.SALTBYTES=16,Y$5=n$g.exports.PERSONALBYTES=16;a$d.ready((function(t){t||(n$g.exports.WASM_LOADED=!0,n$g.exports=a$d);}));var d$9=n$g.exports;

var A$8,I$7,E$8=(()=>{for(var A=new Uint8Array(128),I=0;I<64;I++)A[I<26?I+65:I<52?I+71:I<62?I-4:4*I-205]=I;return I=>{for(var E=I.length,B=new Uint8Array(3*(E-("="==I[E-1])-("="==I[E-2]))/4|0),g=0,Q=0;g<E;){var o=A[I.charCodeAt(g++)],i=A[I.charCodeAt(g++)],t=A[I.charCodeAt(g++)],C=A[I.charCodeAt(g++)];B[Q++]=o<<2|i>>4,B[Q++]=i<<4|t>>2,B[Q++]=t<<6|C;}return B}})(),B$8=(A$8={"wasm-binary:./xsalsa20.wat"(A,I){I.exports=E$8("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");}},function(){return I$7||(0, A$8[Object.keys(A$8)[0]])((I$7={exports:{}}).exports,I$7),I$7.exports})(),g$9=new WebAssembly.Module(B$8),Q$7="undefined"!=typeof WebAssembly&&new WebAssembly.Instance(g$9,undefined).exports,o$i=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]),i$f=144,t$a=i$f,C$7=[],e$6=h$b;function h$b(A,I){if(!(this instanceof h$b))return new h$b(A,I);if(!A||A.length<24)throw new Error("nonce must be at least 24 bytes");if(!I||I.length<32)throw new Error("key must be at least 32 bytes");this._xor=Q$7?new r$f(A,I):new a$c(A,I);}function r$f(A,I){C$7.length||(C$7.push(i$f),i$f+=64),this._pointer=C$7.pop(),this._nonce=this._pointer+8,this._key=this._nonce+24,this._overflow=0,this._memory=new Uint8Array(Q$7.memory.buffer),this._memory.fill(0,this._pointer,this._pointer+8),this._memory.set(A,this._nonce),this._memory.set(I,this._key);}function a$c(A,I){this._s=new Uint8Array(32),this._z=new Uint8Array(16),this._overflow=0,s$d(this._s,A,I,o$i);for(var E=0;E<8;E++)this._z[E]=A[E+16];}function n$f(A,I,E,B){for(var g,Q=255&B[0]|(255&B[1])<<8|(255&B[2])<<16|(255&B[3])<<24,o=255&E[0]|(255&E[1])<<8|(255&E[2])<<16|(255&E[3])<<24,i=255&E[4]|(255&E[5])<<8|(255&E[6])<<16|(255&E[7])<<24,t=255&E[8]|(255&E[9])<<8|(255&E[10])<<16|(255&E[11])<<24,C=255&E[12]|(255&E[13])<<8|(255&E[14])<<16|(255&E[15])<<24,e=255&B[4]|(255&B[5])<<8|(255&B[6])<<16|(255&B[7])<<24,h=255&I[0]|(255&I[1])<<8|(255&I[2])<<16|(255&I[3])<<24,r=255&I[4]|(255&I[5])<<8|(255&I[6])<<16|(255&I[7])<<24,a=255&I[8]|(255&I[9])<<8|(255&I[10])<<16|(255&I[11])<<24,n=255&I[12]|(255&I[13])<<8|(255&I[14])<<16|(255&I[15])<<24,s=255&B[8]|(255&B[9])<<8|(255&B[10])<<16|(255&B[11])<<24,y=255&E[16]|(255&E[17])<<8|(255&E[18])<<16|(255&E[19])<<24,w=255&E[20]|(255&E[21])<<8|(255&E[22])<<16|(255&E[23])<<24,D=255&E[24]|(255&E[25])<<8|(255&E[26])<<16|(255&E[27])<<24,c=255&E[28]|(255&E[29])<<8|(255&E[30])<<16|(255&E[31])<<24,M=255&B[12]|(255&B[13])<<8|(255&B[14])<<16|(255&B[15])<<24,p=Q,d=o,f=i,l=t,k=C,G=e,q=h,S=r,_=a,N=n,m=s,u=y,K=w,R=D,F=c,U=M,H=0;H<20;H+=2)p^=(g=(K^=(g=(_^=(g=(k^=(g=p+K|0)<<7|g>>>25)+p|0)<<9|g>>>23)+k|0)<<13|g>>>19)+_|0)<<18|g>>>14,G^=(g=(d^=(g=(R^=(g=(N^=(g=G+d|0)<<7|g>>>25)+G|0)<<9|g>>>23)+N|0)<<13|g>>>19)+R|0)<<18|g>>>14,m^=(g=(q^=(g=(f^=(g=(F^=(g=m+q|0)<<7|g>>>25)+m|0)<<9|g>>>23)+F|0)<<13|g>>>19)+f|0)<<18|g>>>14,U^=(g=(u^=(g=(S^=(g=(l^=(g=U+u|0)<<7|g>>>25)+U|0)<<9|g>>>23)+l|0)<<13|g>>>19)+S|0)<<18|g>>>14,p^=(g=(l^=(g=(f^=(g=(d^=(g=p+l|0)<<7|g>>>25)+p|0)<<9|g>>>23)+d|0)<<13|g>>>19)+f|0)<<18|g>>>14,G^=(g=(k^=(g=(S^=(g=(q^=(g=G+k|0)<<7|g>>>25)+G|0)<<9|g>>>23)+q|0)<<13|g>>>19)+S|0)<<18|g>>>14,m^=(g=(N^=(g=(_^=(g=(u^=(g=m+N|0)<<7|g>>>25)+m|0)<<9|g>>>23)+u|0)<<13|g>>>19)+_|0)<<18|g>>>14,U^=(g=(F^=(g=(R^=(g=(K^=(g=U+F|0)<<7|g>>>25)+U|0)<<9|g>>>23)+K|0)<<13|g>>>19)+R|0)<<18|g>>>14;p=p+Q|0,d=d+o|0,f=f+i|0,l=l+t|0,k=k+C|0,G=G+e|0,q=q+h|0,S=S+r|0,_=_+a|0,N=N+n|0,m=m+s|0,u=u+y|0,K=K+w|0,R=R+D|0,F=F+c|0,U=U+M|0,A[0]=p>>>0&255,A[1]=p>>>8&255,A[2]=p>>>16&255,A[3]=p>>>24&255,A[4]=d>>>0&255,A[5]=d>>>8&255,A[6]=d>>>16&255,A[7]=d>>>24&255,A[8]=f>>>0&255,A[9]=f>>>8&255,A[10]=f>>>16&255,A[11]=f>>>24&255,A[12]=l>>>0&255,A[13]=l>>>8&255,A[14]=l>>>16&255,A[15]=l>>>24&255,A[16]=k>>>0&255,A[17]=k>>>8&255,A[18]=k>>>16&255,A[19]=k>>>24&255,A[20]=G>>>0&255,A[21]=G>>>8&255,A[22]=G>>>16&255,A[23]=G>>>24&255,A[24]=q>>>0&255,A[25]=q>>>8&255,A[26]=q>>>16&255,A[27]=q>>>24&255,A[28]=S>>>0&255,A[29]=S>>>8&255,A[30]=S>>>16&255,A[31]=S>>>24&255,A[32]=_>>>0&255,A[33]=_>>>8&255,A[34]=_>>>16&255,A[35]=_>>>24&255,A[36]=N>>>0&255,A[37]=N>>>8&255,A[38]=N>>>16&255,A[39]=N>>>24&255,A[40]=m>>>0&255,A[41]=m>>>8&255,A[42]=m>>>16&255,A[43]=m>>>24&255,A[44]=u>>>0&255,A[45]=u>>>8&255,A[46]=u>>>16&255,A[47]=u>>>24&255,A[48]=K>>>0&255,A[49]=K>>>8&255,A[50]=K>>>16&255,A[51]=K>>>24&255,A[52]=R>>>0&255,A[53]=R>>>8&255,A[54]=R>>>16&255,A[55]=R>>>24&255,A[56]=F>>>0&255,A[57]=F>>>8&255,A[58]=F>>>16&255,A[59]=F>>>24&255,A[60]=U>>>0&255,A[61]=U>>>8&255,A[62]=U>>>16&255,A[63]=U>>>24&255;}function s$d(A,I,E,B){for(var g,Q=255&B[0]|(255&B[1])<<8|(255&B[2])<<16|(255&B[3])<<24,o=255&E[0]|(255&E[1])<<8|(255&E[2])<<16|(255&E[3])<<24,i=255&E[4]|(255&E[5])<<8|(255&E[6])<<16|(255&E[7])<<24,t=255&E[8]|(255&E[9])<<8|(255&E[10])<<16|(255&E[11])<<24,C=255&E[12]|(255&E[13])<<8|(255&E[14])<<16|(255&E[15])<<24,e=255&B[4]|(255&B[5])<<8|(255&B[6])<<16|(255&B[7])<<24,h=255&I[0]|(255&I[1])<<8|(255&I[2])<<16|(255&I[3])<<24,r=255&I[4]|(255&I[5])<<8|(255&I[6])<<16|(255&I[7])<<24,a=255&I[8]|(255&I[9])<<8|(255&I[10])<<16|(255&I[11])<<24,n=255&I[12]|(255&I[13])<<8|(255&I[14])<<16|(255&I[15])<<24,s=255&B[8]|(255&B[9])<<8|(255&B[10])<<16|(255&B[11])<<24,y=255&E[16]|(255&E[17])<<8|(255&E[18])<<16|(255&E[19])<<24,w=255&E[20]|(255&E[21])<<8|(255&E[22])<<16|(255&E[23])<<24,D=255&E[24]|(255&E[25])<<8|(255&E[26])<<16|(255&E[27])<<24,c=255&E[28]|(255&E[29])<<8|(255&E[30])<<16|(255&E[31])<<24,M=255&B[12]|(255&B[13])<<8|(255&B[14])<<16|(255&B[15])<<24,p=0;p<20;p+=2)Q^=(g=(w^=(g=(a^=(g=(C^=(g=Q+w|0)<<7|g>>>25)+Q|0)<<9|g>>>23)+C|0)<<13|g>>>19)+a|0)<<18|g>>>14,e^=(g=(o^=(g=(D^=(g=(n^=(g=e+o|0)<<7|g>>>25)+e|0)<<9|g>>>23)+n|0)<<13|g>>>19)+D|0)<<18|g>>>14,s^=(g=(h^=(g=(i^=(g=(c^=(g=s+h|0)<<7|g>>>25)+s|0)<<9|g>>>23)+c|0)<<13|g>>>19)+i|0)<<18|g>>>14,M^=(g=(y^=(g=(r^=(g=(t^=(g=M+y|0)<<7|g>>>25)+M|0)<<9|g>>>23)+t|0)<<13|g>>>19)+r|0)<<18|g>>>14,Q^=(g=(t^=(g=(i^=(g=(o^=(g=Q+t|0)<<7|g>>>25)+Q|0)<<9|g>>>23)+o|0)<<13|g>>>19)+i|0)<<18|g>>>14,e^=(g=(C^=(g=(r^=(g=(h^=(g=e+C|0)<<7|g>>>25)+e|0)<<9|g>>>23)+h|0)<<13|g>>>19)+r|0)<<18|g>>>14,s^=(g=(n^=(g=(a^=(g=(y^=(g=s+n|0)<<7|g>>>25)+s|0)<<9|g>>>23)+y|0)<<13|g>>>19)+a|0)<<18|g>>>14,M^=(g=(c^=(g=(D^=(g=(w^=(g=M+c|0)<<7|g>>>25)+M|0)<<9|g>>>23)+w|0)<<13|g>>>19)+D|0)<<18|g>>>14;A[0]=Q>>>0&255,A[1]=Q>>>8&255,A[2]=Q>>>16&255,A[3]=Q>>>24&255,A[4]=e>>>0&255,A[5]=e>>>8&255,A[6]=e>>>16&255,A[7]=e>>>24&255,A[8]=s>>>0&255,A[9]=s>>>8&255,A[10]=s>>>16&255,A[11]=s>>>24&255,A[12]=M>>>0&255,A[13]=M>>>8&255,A[14]=M>>>16&255,A[15]=M>>>24&255,A[16]=h>>>0&255,A[17]=h>>>8&255,A[18]=h>>>16&255,A[19]=h>>>24&255,A[20]=r>>>0&255,A[21]=r>>>8&255,A[22]=r>>>16&255,A[23]=r>>>24&255,A[24]=a>>>0&255,A[25]=a>>>8&255,A[26]=a>>>16&255,A[27]=a>>>24&255,A[28]=n>>>0&255,A[29]=n>>>8&255,A[30]=n>>>16&255,A[31]=n>>>24&255;}h$b.NONCEBYTES=24,h$b.KEYBYTES=32,h$b.core_hsalsa20=s$d,h$b.SIGMA=o$i,h$b.prototype.update=function(A,I){if(!A)throw new Error("input must be Uint8Array or Buffer");return I||(I=new Uint8Array(A.length)),A.length&&this._xor.update(A,I),I},h$b.prototype.final=h$b.prototype.finalize=function(){this._xor.finalize(),this._xor=null;},r$f.prototype.realloc=function(A){Q$7.memory.grow(Math.ceil(Math.abs(A-this._memory.length)/65536)),this._memory=new Uint8Array(Q$7.memory.buffer);},r$f.prototype.update=function(A,I){var E=this._overflow+A.length,B=i$f+this._overflow;(t$a=i$f+E)>=this._memory.length&&this.realloc(t$a),this._memory.set(A,B),Q$7.xsalsa20_xor(this._pointer,i$f,i$f,E,this._nonce,this._key),I.set(this._memory.subarray(B,i$f+E)),this._overflow=63&E;},r$f.prototype.finalize=function(){this._memory.fill(0,this._pointer,this._key+32),t$a>i$f&&(this._memory.fill(0,i$f,t$a),t$a=0),C$7.push(this._pointer);},a$c.prototype.update=function(A,I){for(var E=new Uint8Array(64),B=0,g=this._overflow,Q=A.length+this._overflow,i=this._z,t=-this._overflow,C=-this._overflow;Q>=64;){for(n$f(E,i,this._s,o$i);g<64;g++)I[C+g]=A[t+g]^E[g];for(B=1,g=8;g<16;g++)B+=255&i[g]|0,i[g]=255&B,B>>>=8;Q-=64,C+=64,t+=64,g=0;}if(Q>0)for(n$f(E,i,this._s,o$i);g<Q;g++)I[C+g]=A[t+g]^E[g];this._overflow=63&Q;},a$c.prototype.finalize=function(){this._s.fill(0),this._z.fill(0);};

var g$8,i$e,t$9={exports:{}},Q$6=(()=>{for(var A=new Uint8Array(128),I=0;I<64;I++)A[I<26?I+65:I<52?I+71:I<62?I-4:4*I-205]=I;return I=>{for(var g=I.length,i=new Uint8Array(3*(g-("="==I[g-1])-("="==I[g-2]))/4|0),t=0,Q=0;t<g;){var B=A[I.charCodeAt(t++)],C=A[I.charCodeAt(t++)],E=A[I.charCodeAt(t++)],e=A[I.charCodeAt(t++)];i[Q++]=B<<2|C>>4,i[Q++]=C<<4|E>>2,i[Q++]=E<<6|e;}return i}})(),B$7=(g$8={"wasm-binary:./sha256.wat"(A,I){I.exports=Q$6("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");}},function(){return i$e||(0, g$8[Object.keys(g$8)[0]])((i$e={exports:{}}).exports,i$e),i$e.exports})(),C$6=new WebAssembly.Module(B$7);const E$7=r$l,e$5=L$6,o$h="undefined"!=typeof WebAssembly&&(s$c={imports:{debug:{log(...A){console.log(...A.map((A=>(A>>>0).toString(16).padStart(8,"0"))));},log_tee:A=>(console.log((A>>>0).toString(16).padStart(8,"0")),A)}}},new WebAssembly.Instance(C$6,s$c).exports);var s$c;let h$a=0;const r$e=[];t$9.exports=y$c;const n$e=t$9.exports.SHA256_BYTES=32,a$b=108;function y$c(){if(!(this instanceof y$c))return new y$c;if(!o$h)throw new Error("WASM not loaded. Wait for Sha256.ready(cb)");r$e.length||(r$e.push(h$a),h$a+=a$b),this.finalized=!1,this.digestLength=n$e,this.pointer=r$e.pop(),this.pos=0,this._memory=new Uint8Array(o$h.memory.buffer),this._memory.fill(0,this.pointer,this.pointer+a$b),this.pointer+this.digestLength>this._memory.length&&this._realloc(this.pointer+a$b);}function c$e(A){if(!(this instanceof c$e))return new c$e(A);this.pad=e$5.alloc(64),this.inner=y$c(),this.outer=y$c();const I=e$5.alloc(32);A.byteLength>64&&(y$c().update(A).digest(I),A=I),this.pad.fill(54);for(let I=0;I<A.byteLength;I++)this.pad[I]^=A[I];this.inner.update(this.pad),this.pad.fill(92);for(let I=0;I<A.byteLength;I++)this.pad[I]^=A[I];this.outer.update(this.pad),this.pad.fill(0),I.fill(0);}function M$6(){}y$c.prototype._realloc=function(A){o$h.memory.grow(Math.max(0,Math.ceil(Math.abs(A-this._memory.length)/65536))),this._memory=new Uint8Array(o$h.memory.buffer);},y$c.prototype.update=function(A,I){E$7(!1===this.finalized,"Hash instance finalized"),h$a%4!=0&&(h$a+=4-h$a%4),E$7(h$a%4==0,"input shoud be aligned for int32");const[g,i]=function(A,I){var g=e$5.from(A,I);return [g,g.byteLength]}(A,I);return E$7(g instanceof Uint8Array,"input must be Uint8Array or Buffer"),h$a+i>this._memory.length&&this._realloc(h$a+A.length),this._memory.fill(0,h$a,h$a+(i+64-1&-64)-64),this._memory.set(g.subarray(0,64-this.pos),this.pointer+40+this.pos),this._memory.set(g.subarray(64-this.pos),h$a),this.pos=this.pos+i&63,o$h.sha256(this.pointer,h$a,i,0),this},y$c.prototype.digest=function(A,I=0){E$7(!1===this.finalized,"Hash instance finalized"),this.finalized=!0,r$e.push(this.pointer);const g=this.pointer+40+this.pos;this._memory.fill(0,g,this.pointer+40+64),o$h.sha256(this.pointer,h$a,0,1);const i=this._memory.subarray(this.pointer,this.pointer+this.digestLength);if(!A)return i;if("string"==typeof A)return e$5.toString(i,A);E$7(A instanceof Uint8Array,"output must be Uint8Array or Buffer"),E$7(A.byteLength>=this.digestLength+I,"output must have at least 'SHA256_BYTES' bytes remaining");for(let g=0;g<this.digestLength;g++)A[g+I]=i[g];return A},y$c.WASM=o$h,y$c.WASM_SUPPORTED="undefined"!=typeof WebAssembly,y$c.ready=function(A){return A||(A=M$6),o$h?(A(),Promise.resolve()):A(new Error("WebAssembly not supported"))},y$c.prototype.ready=y$c.ready,c$e.prototype.update=function(A,I){return this.inner.update(A,I),this},c$e.prototype.digest=function(A,I=0){return this.outer.update(this.inner.digest()),this.outer.digest(A,I)},y$c.HMAC=c$e;var p$c=t$9.exports;t$9.exports.HMAC;t$9.exports.WASM;t$9.exports.WASM_SUPPORTED;t$9.exports.ready;

var e$4={exports:{}},n$d={exports:{}};const r$d=r$k,o$g=L$6;n$d.exports=u$8;const a$a=n$d.exports.SHA256_BYTES=32,h$9=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function f$a(t,s,i,e){return ((t>>>17|t<<15)^(t>>>19|t<<13)^t>>>10)+s+(((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)+e)<<0}function p$b(t,s){var i,e,n,[r,o,a,p,u,d,c,y]=t;const g=new Uint32Array(64);for(let t=0;t<16;t++)g[t]=l$b(s[t]);for(let t=16;t<64;t++)g[t]=f$a(g[t-2],g[t-7],g[t-15],g[t-16]);for(let t=0;t<64;t+=4)A(t);function A(t){i=r&o^r&a^o&a,e=(r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10),n=y+(u&d^~u&c)+((u>>>6|u<<26)^(u>>>11|u<<21)^(u>>>25|u<<7))+g[t]+h$9[t],y=p+n,i=(p=n+(e+i))&r^p&o^r&o,e=(p>>>2|p<<30)^(p>>>13|p<<19)^(p>>>22|p<<10),n=c+(y&u^~y&d)+((y>>>6|y<<26)^(y>>>11|y<<21)^(y>>>25|y<<7))+g[t+1]+h$9[t+1],c=a+n,i=(a=n+(e+i))&p^a&r^p&r,e=(a>>>2|a<<30)^(a>>>13|a<<19)^(a>>>22|a<<10),n=d+(c&y^~c&u)+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))+g[t+2]+h$9[t+2],d=o+n,i=(o=n+(e+i))&a^o&p^a&p,e=(o>>>2|o<<30)^(o>>>13|o<<19)^(o>>>22|o<<10),n=u+(d&c^~d&y)+((d>>>6|d<<26)^(d>>>11|d<<21)^(d>>>25|d<<7))+g[t+3]+h$9[t+3],u=r+n,r=n+(e+i);}t[0]=t[0]+r,t[1]=t[1]+o,t[2]=t[2]+a,t[3]=t[3]+p,t[4]=t[4]+u,t[5]=t[5]+d,t[6]=t[6]+c,t[7]=t[7]+y;}function u$8(){return this instanceof u$8?(this.buffer=new ArrayBuffer(64),this.bytesRead=0,this.pos=0,this.digestLength=a$a,this.finalised=!1,this.load=new Uint8Array(this.buffer),this.words=new Uint32Array(this.buffer),this.state=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),this):new u$8}function d$8(t){if(!(this instanceof d$8))return new d$8(t);this.pad=o$g.alloc(64),this.inner=u$8(),this.outer=u$8();const s=o$g.alloc(32);t.byteLength>64&&(u$8().update(t).digest(s),t=s),this.pad.fill(54);for(let s=0;s<t.byteLength;s++)this.pad[s]^=t[s];this.inner.update(this.pad),this.pad.fill(92);for(let s=0;s<t.byteLength;s++)this.pad[s]^=t[s];this.outer.update(this.pad),this.pad.fill(0),s.fill(0);}function l$b(t){return (16711935&t)>>>8|(16711935&t)<<24|(4278255360&t)<<8|(4278255360&t)>>>24}u$8.prototype.update=function(t,s){r$d(!1===this.finalised,"Hash instance finalised");var[i,e]=function(t,s){var i=o$g.from(t,s);return [i,i.byteLength]}(t,s),n=0;for(this.bytesRead+=e;e>0&&(this.load.set(i.subarray(n,n+64-this.pos),this.pos),n+=64-this.pos,!((e-=64-this.pos)<0));)this.pos=0,p$b(this.state,this.words);return this.pos=63&this.bytesRead,this.load.fill(0,this.pos),this},u$8.prototype.digest=function(t,s=0){r$d(!1===this.finalised,"Hash instance finalised"),this.finalised=!0,this.load.fill(0,this.pos),this.load[this.pos]=128,this.pos>55&&(p$b(this.state,this.words),this.words.fill(0),this.pos=0);const i=new DataView(this.buffer);i.setUint32(56,this.bytesRead/2**29),i.setUint32(60,this.bytesRead<<3),p$b(this.state,this.words);const e=new Uint8Array(this.state.map(l$b).buffer);if(!t)return new Uint8Array(e);if("string"==typeof t)return o$g.toString(e,t);r$d(t instanceof Uint8Array,"input must be Uint8Array or Buffer"),r$d(t.byteLength>=this.digestLength+s,"input not large enough for digest");for(let i=0;i<this.digestLength;i++)t[i+s]=e[i];return t},d$8.prototype.update=function(t,s){return this.inner.update(t,s),this},d$8.prototype.digest=function(t,s=0){return this.outer.update(this.inner.digest()),this.outer.digest(t,s)},u$8.HMAC=d$8;const c$d=n$d.exports,y$b=p$c;var g$7=c$d;e$4.exports=function(){return new g$7};e$4.exports.ready=function(t){y$b.ready((function(){t();}));};e$4.exports.WASM_SUPPORTED=y$b.WASM_SUPPORTED;e$4.exports.WASM_LOADED=!1;e$4.exports.SHA256_BYTES=32,y$b.ready((function(t){t||(e$4.exports.WASM_LOADED=!0,e$4.exports=g$7=y$b);}));var m$7=e$4.exports;

const e$3=r$l;var s$b=i$d;const n$c=[1634760805,857760878,2036477234,1797285236];function i$d(t,s,i){e$3(32===s.byteLength),e$3(8===t.byteLength||12===t.byteLength);const f=new Uint32Array(t.buffer,t.byteOffset,t.byteLength/4),r=new Uint32Array(s.buffer,s.byteOffset,s.byteLength/4);i||(i=0),e$3(i<Number.MAX_SAFE_INTEGER),this.finalized=!1,this.pos=0,this.state=new Uint32Array(16);for(let t=0;t<4;t++)this.state[t]=n$c[t];for(let t=0;t<8;t++)this.state[4+t]=r[t];return this.state[12]=4294967295&i,8===f.byteLength?(this.state[13]=(i&&0xffffffff00000000)>>32,this.state[14]=f[0],this.state[15]=f[1]):(this.state[13]=f[0],this.state[14]=f[1],this.state[15]=f[2]),this}function f$9(t){const e=new Uint32Array(16);for(let s=16;s--;)e[s]=t[s];for(let t=0;t<20;t+=2)h$8(e,0,4,8,12),h$8(e,1,5,9,13),h$8(e,2,6,10,14),h$8(e,3,7,11,15),h$8(e,0,5,10,15),h$8(e,1,6,11,12),h$8(e,2,7,8,13),h$8(e,3,4,9,14);for(let s=0;s<16;s++)e[s]+=t[s];return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}function r$c(t,e){return t<<e|t>>>32-e}function h$8(t,e,s,n,i){t[e]+=t[s],t[i]^=t[e],t[i]=r$c(t[i],16),t[n]+=t[i],t[s]^=t[n],t[s]=r$c(t[s],12),t[e]+=t[s],t[i]^=t[e],t[i]=r$c(t[i],8),t[n]+=t[i],t[s]^=t[n],t[s]=r$c(t[s],7);}i$d.prototype.update=function(t,s){e$3(!this.finalized,"cipher finalized."),e$3(t.byteLength>=s.byteLength,"output cannot be shorter than input.");let n=s.length,i=this.pos%64;this.pos+=n;let r=0,h=f$9(this.state);for(;i>0&&n>0;)t[r]=s[r++]^h[i],i=i+1&63,i||this.state[12]++,n--;for(;n>0;){if(h=f$9(this.state),n<64){for(let e=0;e<n;e++)t[r]=s[r++]^h[i++],i&=63;return}for(;i<64;)t[r]=s[r++]^h[i++];this.state[12]++,i=0,n-=64;}},i$d.prototype.final=function(){this.state.fill(0),this.pos=0,this.finalized=!0;};

var I$6,h$7,Q$5=(()=>{for(var A=new Uint8Array(128),I=0;I<64;I++)A[I<26?I+65:I<52?I+71:I<62?I-4:4*I-205]=I;return I=>{for(var h=I.length,Q=new Uint8Array(3*(h-("="==I[h-1])-("="==I[h-2]))/4|0),g=0,C=0;g<h;){var E=A[I.charCodeAt(g++)],B=A[I.charCodeAt(g++)],e=A[I.charCodeAt(g++)],r=A[I.charCodeAt(g++)];Q[C++]=E<<2|B>>4,Q[C++]=B<<4|e>>2,Q[C++]=e<<6|r;}return Q}})(),g$6=(I$6={"wasm-binary:./siphash24.wat"(A,I){I.exports=Q$5("AGFzbQEAAAABBgFgAn9/AAMCAQAFBQEBCpBOBxQCBm1lbW9yeQIAB3NpcGhhc2gAAArdCAHaCAIIfgJ/QvXKzYPXrNu38wAhAkLt3pHzlszct+QAIQNC4eSV89bs2bzsACEEQvPK0cunjNmy9AAhBUEIKQMAIQdBECkDACEIIAGtQjiGIQYgAUEHcSELIAAgAWogC2shCiAFIAiFIQUgBCAHhSEEIAMgCIUhAyACIAeFIQICQANAIAAgCkYNASAAKQMAIQkgBSAJhSEFIAIgA3whAiADQg2JIQMgAyAChSEDIAJCIIkhAiAEIAV8IQQgBUIQiSEFIAUgBIUhBSACIAV8IQIgBUIViSEFIAUgAoUhBSAEIAN8IQQgA0IRiSEDIAMgBIUhAyAEQiCJIQQgAiADfCECIANCDYkhAyADIAKFIQMgAkIgiSECIAQgBXwhBCAFQhCJIQUgBSAEhSEFIAIgBXwhAiAFQhWJIQUgBSAChSEFIAQgA3whBCADQhGJIQMgAyAEhSEDIARCIIkhBCACIAmFIQIgAEEIaiEADAALCwJAAkACQAJAAkACQAJAAkAgCw4HBwYFBAMCAQALIAYgADEABkIwhoQhBgsgBiAAMQAFQiiGhCEGCyAGIAAxAARCIIaEIQYLIAYgADEAA0IYhoQhBgsgBiAAMQACQhCGhCEGCyAGIAAxAAFCCIaEIQYLIAYgADEAAIQhBgsgBSAGhSEFIAIgA3whAiADQg2JIQMgAyAChSEDIAJCIIkhAiAEIAV8IQQgBUIQiSEFIAUgBIUhBSACIAV8IQIgBUIViSEFIAUgAoUhBSAEIAN8IQQgA0IRiSEDIAMgBIUhAyAEQiCJIQQgAiADfCECIANCDYkhAyADIAKFIQMgAkIgiSECIAQgBXwhBCAFQhCJIQUgBSAEhSEFIAIgBXwhAiAFQhWJIQUgBSAChSEFIAQgA3whBCADQhGJIQMgAyAEhSEDIARCIIkhBCACIAaFIQIgBEL/AYUhBCACIAN8IQIgA0INiSEDIAMgAoUhAyACQiCJIQIgBCAFfCEEIAVCEIkhBSAFIASFIQUgAiAFfCECIAVCFYkhBSAFIAKFIQUgBCADfCEEIANCEYkhAyADIASFIQMgBEIgiSEEIAIgA3whAiADQg2JIQMgAyAChSEDIAJCIIkhAiAEIAV8IQQgBUIQiSEFIAUgBIUhBSACIAV8IQIgBUIViSEFIAUgAoUhBSAEIAN8IQQgA0IRiSEDIAMgBIUhAyAEQiCJIQQgAiADfCECIANCDYkhAyADIAKFIQMgAkIgiSECIAQgBXwhBCAFQhCJIQUgBSAEhSEFIAIgBXwhAiAFQhWJIQUgBSAChSEFIAQgA3whBCADQhGJIQMgAyAEhSEDIARCIIkhBCACIAN8IQIgA0INiSEDIAMgAoUhAyACQiCJIQIgBCAFfCEEIAVCEIkhBSAFIASFIQUgAiAFfCECIAVCFYkhBSAFIAKFIQUgBCADfCEEIANCEYkhAyADIASFIQMgBEIgiSEEQQAgAiADIAQgBYWFhTcDAAs=");}},function(){return h$7||(0, I$6[Object.keys(I$6)[0]])((h$7={exports:{}}).exports,h$7),h$7.exports})(),C$5=new WebAssembly.Module(g$6);function E$6(A,I){var h=A.l+I.l,Q={h:A.h+I.h+(h/2>>>31)>>>0,l:h>>>0};A.h=Q.h,A.l=Q.l;}function B$6(A,I){A.h^=I.h,A.h>>>=0,A.l^=I.l,A.l>>>=0;}function e$2(A,I){var h={h:A.h<<I|A.l>>>32-I,l:A.l<<I|A.h>>>32-I};A.h=h.h,A.l=h.l;}function r$b(A){var I=A.l;A.l=A.h,A.h=I;}function i$c(A,I,h,Q){E$6(A,I),E$6(h,Q),e$2(I,13),e$2(Q,16),B$6(I,A),B$6(Q,h),r$b(A),E$6(h,I),E$6(A,Q),e$2(I,17),e$2(Q,21),B$6(I,h),B$6(Q,A),r$b(h);}function t$8(A,I){return A[I+3]<<24|A[I+2]<<16|A[I+1]<<8|A[I]}var S$7=r$l,n$b="undefined"!=typeof WebAssembly&&new WebAssembly.Instance(C$5,undefined).exports,l$a=function(A,I,h){var Q,g={h:t$8(h,4),l:t$8(h,0)},C={h:t$8(h,12),l:t$8(h,8)},E={h:g.h,l:g.l},e=g,r={h:C.h,l:C.l},S=C,n=0,l=I.length,F=l-7,a=new Uint8Array(new ArrayBuffer(8));for(B$6(E,{h:1936682341,l:1886610805}),B$6(r,{h:1685025377,l:1852075885}),B$6(e,{h:1819895653,l:1852142177}),B$6(S,{h:1952801890,l:2037671283});n<F;)B$6(S,Q={h:t$8(I,n+4),l:t$8(I,n)}),i$c(E,r,e,S),i$c(E,r,e,S),B$6(E,Q),n+=8;a[7]=l;for(var U=0;n<l;)a[U++]=I[n++];for(;U<7;)a[U++]=0;B$6(S,Q={h:a[7]<<24|a[6]<<16|a[5]<<8|a[4],l:a[3]<<24|a[2]<<16|a[1]<<8|a[0]}),i$c(E,r,e,S),i$c(E,r,e,S),B$6(E,Q),B$6(e,{h:0,l:255}),i$c(E,r,e,S),i$c(E,r,e,S),i$c(E,r,e,S),i$c(E,r,e,S);var o=E;B$6(o,r),B$6(o,e),B$6(o,S),A[0]=255&o.l,A[1]=o.l>>8&255,A[2]=o.l>>16&255,A[3]=o.l>>24&255,A[4]=255&o.h,A[5]=o.h>>8&255,A[6]=o.h>>16&255,A[7]=o.h>>24&255;},F$5=D$6,a$9=D$6.BYTES=8,U$6=D$6.KEYBYTES=16;D$6.WASM_SUPPORTED=!!n$b,D$6.WASM_LOADED=!!n$b;var o$f=new Uint8Array(n$b?n$b.memory.buffer:0);function D$6(A,I,h,Q){var g;return h||(h=new Uint8Array(8)),!0!==Q&&(S$7(h.length>=a$9,"output must be at least "+a$9),S$7(I.length>=U$6,"key must be at least "+U$6)),n$b?(A.length+24>o$f.length&&(g=A.length+24,n$b.memory.grow(Math.max(0,Math.ceil(Math.abs(g-o$f.length)/65536))),o$f=new Uint8Array(n$b.memory.buffer)),o$f.set(I,8),o$f.set(A,24),n$b.siphash(24,A.length),h.set(o$f.subarray(0,8))):l$a(h,A,I),h}

function s$a(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var c$c,_$8={exports:{}},y$a={exports:{}};function i$b(t){t.fill(0);}!function(e){var r,n=r$l,o=(r=globalThis.crypto||globalThis.msCrypto)&&r.getRandomValues?function(t,e){for(let n=0;n<e;n+=65536)r.getRandomValues(new Uint8Array(t.buffer,n+t.byteOffset,Math.min(e-n,65536)));}:null!=s$a&&(r=s$a("crypto"))&&r.randomBytes?function(t,e){new Uint8Array(t.buffer,t.byteOffset,e).set(r.randomBytes(e));}:function(){throw new Error("No secure random number generator available")};Object.defineProperty(e.exports,"randombytes",{value:o}),e.exports.randombytes_buf=function(t){n(t,"out must be given"),o(t,t.byteLength);};}(y$a);var p$a={sodium_malloc:function(t){return new Uint8Array(t)},sodium_free:function(t){i$b(t),function(){if(c$c)return c$c;var t=globalThis.MessageChannel;return null==t&&({MessageChannel:t}=s$a("worker_threads")),c$c=new t}().port1.postMessage(t.buffer,[t.buffer]);},sodium_memzero:i$b},u$7={exports:{}};!function(t){function e(t,e,r,n,o){var a=0;for(let h=0;h<o;h++)a|=t[e+h]^r[n+h];return (1&a-1>>>8)-1}t.exports={crypto_verify_16:function(t,r,n,o){return 0===e(t,r,n,o,16)},crypto_verify_32:function(t,r,n,o){return 0===e(t,r,n,o,32)},crypto_verify_64:function(t,r,n,o){return 0===e(t,r,n,o,64)}},Object.defineProperty(t.exports,"vn",{value:e});}(u$7);const f$8=r$l,{vn:b$5}=u$7.exports;var l$9={sodium_increment:function(t){const e=t.byteLength;for(var r=1,n=0;n<e;n++)r+=t[n],t[n]=r,r>>=8;},sodium_memcmp:function(t,e){return f$8(t.byteLength===e.byteLength,"buffers must be the same size"),0===b$5(t,0,e,0,t.byteLength)},sodium_is_zero:function(t){var e=0;for(let r=0;r<t.length;r++)e|=t[r];return 0===e}};const{crypto_verify_32:E$5}=u$7.exports,g$5=m$9,m$6=r$l;var S$6={crypto_auth_BYTES:32,crypto_auth_KEYBYTES:32,crypto_auth:function(t,e,r){m$6(32===t.byteLength,"out should be 'crypto_auth_BYTES' in length"),m$6(32===r.byteLength,"key should be 'crypto_auth_KEYBYTES' in length");const n=new Uint8Array(64),o=g$5.HMAC(r);o.update(e),o.digest(n),t.set(n.subarray(0,32));},crypto_auth_verify:function(t,e,r){m$6(32===t.byteLength,"h should be 'crypto_auth_BYTES' in length"),m$6(32===r.byteLength,"key should be 'crypto_auth_KEYBYTES' in length");const n=g$5.HMAC(r).update(e).digest();return E$5(t,0,n,0)}};const Y$4=m$9,T$5=r$l;if(1!==new Uint16Array([1])[0])throw new Error("Big endian architecture is not supported.");function d$7(t,e,r){return T$5(64===t.byteLength,"out must be 'crypto_hash_sha512_BYTES' bytes long"),Y$4().update(e.subarray(0,r)).digest(t),0}var B$5={crypto_hash:function(t,e,r){return d$7(t,e,r)},crypto_hash_sha512:d$7,crypto_hash_sha512_BYTES:64,crypto_hash_BYTES:64};if(1!==new Uint16Array([1])[0])throw new Error("Big endian architecture is not supported.");var A$7=function(t){var e,r=new Float64Array(16);if(t)for(e=0;e<t.length;e++)r[e]=t[e];return r},L$5=new Uint8Array(32);L$5[0]=9;var x$5=A$7(),w$5=A$7([1]),v$5=A$7([56129,1]),U$5=A$7([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),M$5=A$7([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),k$5=A$7([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),N$5=A$7([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),K$5=A$7([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function C$4(t,e,r){var n,o,a=0,h=0,s=0,c=0,_=0,y=0,i=0,p=0,u=0,f=0,b=0,l=0,E=0,g=0,m=0,S=0,Y=0,T=0,d=0,B=0,A=0,L=0,x=0,w=0,v=0,U=0,M=0,k=0,N=0,K=0,C=0,O=r[0],R=r[1],I=r[2],P=r[3],D=r[4],X=r[5],G=r[6],F=r[7],W=r[8],Z=r[9],V=r[10],H=r[11],z=r[12],j=r[13],q=r[14],Q=r[15];a+=(n=e[0])*O,h+=n*R,s+=n*I,c+=n*P,_+=n*D,y+=n*X,i+=n*G,p+=n*F,u+=n*W,f+=n*Z,b+=n*V,l+=n*H,E+=n*z,g+=n*j,m+=n*q,S+=n*Q,h+=(n=e[1])*O,s+=n*R,c+=n*I,_+=n*P,y+=n*D,i+=n*X,p+=n*G,u+=n*F,f+=n*W,b+=n*Z,l+=n*V,E+=n*H,g+=n*z,m+=n*j,S+=n*q,Y+=n*Q,s+=(n=e[2])*O,c+=n*R,_+=n*I,y+=n*P,i+=n*D,p+=n*X,u+=n*G,f+=n*F,b+=n*W,l+=n*Z,E+=n*V,g+=n*H,m+=n*z,S+=n*j,Y+=n*q,T+=n*Q,c+=(n=e[3])*O,_+=n*R,y+=n*I,i+=n*P,p+=n*D,u+=n*X,f+=n*G,b+=n*F,l+=n*W,E+=n*Z,g+=n*V,m+=n*H,S+=n*z,Y+=n*j,T+=n*q,d+=n*Q,_+=(n=e[4])*O,y+=n*R,i+=n*I,p+=n*P,u+=n*D,f+=n*X,b+=n*G,l+=n*F,E+=n*W,g+=n*Z,m+=n*V,S+=n*H,Y+=n*z,T+=n*j,d+=n*q,B+=n*Q,y+=(n=e[5])*O,i+=n*R,p+=n*I,u+=n*P,f+=n*D,b+=n*X,l+=n*G,E+=n*F,g+=n*W,m+=n*Z,S+=n*V,Y+=n*H,T+=n*z,d+=n*j,B+=n*q,A+=n*Q,i+=(n=e[6])*O,p+=n*R,u+=n*I,f+=n*P,b+=n*D,l+=n*X,E+=n*G,g+=n*F,m+=n*W,S+=n*Z,Y+=n*V,T+=n*H,d+=n*z,B+=n*j,A+=n*q,L+=n*Q,p+=(n=e[7])*O,u+=n*R,f+=n*I,b+=n*P,l+=n*D,E+=n*X,g+=n*G,m+=n*F,S+=n*W,Y+=n*Z,T+=n*V,d+=n*H,B+=n*z,A+=n*j,L+=n*q,x+=n*Q,u+=(n=e[8])*O,f+=n*R,b+=n*I,l+=n*P,E+=n*D,g+=n*X,m+=n*G,S+=n*F,Y+=n*W,T+=n*Z,d+=n*V,B+=n*H,A+=n*z,L+=n*j,x+=n*q,w+=n*Q,f+=(n=e[9])*O,b+=n*R,l+=n*I,E+=n*P,g+=n*D,m+=n*X,S+=n*G,Y+=n*F,T+=n*W,d+=n*Z,B+=n*V,A+=n*H,L+=n*z,x+=n*j,w+=n*q,v+=n*Q,b+=(n=e[10])*O,l+=n*R,E+=n*I,g+=n*P,m+=n*D,S+=n*X,Y+=n*G,T+=n*F,d+=n*W,B+=n*Z,A+=n*V,L+=n*H,x+=n*z,w+=n*j,v+=n*q,U+=n*Q,l+=(n=e[11])*O,E+=n*R,g+=n*I,m+=n*P,S+=n*D,Y+=n*X,T+=n*G,d+=n*F,B+=n*W,A+=n*Z,L+=n*V,x+=n*H,w+=n*z,v+=n*j,U+=n*q,M+=n*Q,E+=(n=e[12])*O,g+=n*R,m+=n*I,S+=n*P,Y+=n*D,T+=n*X,d+=n*G,B+=n*F,A+=n*W,L+=n*Z,x+=n*V,w+=n*H,v+=n*z,U+=n*j,M+=n*q,k+=n*Q,g+=(n=e[13])*O,m+=n*R,S+=n*I,Y+=n*P,T+=n*D,d+=n*X,B+=n*G,A+=n*F,L+=n*W,x+=n*Z,w+=n*V,v+=n*H,U+=n*z,M+=n*j,k+=n*q,N+=n*Q,m+=(n=e[14])*O,S+=n*R,Y+=n*I,T+=n*P,d+=n*D,B+=n*X,A+=n*G,L+=n*F,x+=n*W,w+=n*Z,v+=n*V,U+=n*H,M+=n*z,k+=n*j,N+=n*q,K+=n*Q,S+=(n=e[15])*O,h+=38*(T+=n*I),s+=38*(d+=n*P),c+=38*(B+=n*D),_+=38*(A+=n*X),y+=38*(L+=n*G),i+=38*(x+=n*F),p+=38*(w+=n*W),u+=38*(v+=n*Z),f+=38*(U+=n*V),b+=38*(M+=n*H),l+=38*(k+=n*z),E+=38*(N+=n*j),g+=38*(K+=n*q),m+=38*(C+=n*Q),a=(n=(a+=38*(Y+=n*R))+(o=1)+65535)-65536*(o=Math.floor(n/65536)),h=(n=h+o+65535)-65536*(o=Math.floor(n/65536)),s=(n=s+o+65535)-65536*(o=Math.floor(n/65536)),c=(n=c+o+65535)-65536*(o=Math.floor(n/65536)),_=(n=_+o+65535)-65536*(o=Math.floor(n/65536)),y=(n=y+o+65535)-65536*(o=Math.floor(n/65536)),i=(n=i+o+65535)-65536*(o=Math.floor(n/65536)),p=(n=p+o+65535)-65536*(o=Math.floor(n/65536)),u=(n=u+o+65535)-65536*(o=Math.floor(n/65536)),f=(n=f+o+65535)-65536*(o=Math.floor(n/65536)),b=(n=b+o+65535)-65536*(o=Math.floor(n/65536)),l=(n=l+o+65535)-65536*(o=Math.floor(n/65536)),E=(n=E+o+65535)-65536*(o=Math.floor(n/65536)),g=(n=g+o+65535)-65536*(o=Math.floor(n/65536)),m=(n=m+o+65535)-65536*(o=Math.floor(n/65536)),S=(n=S+o+65535)-65536*(o=Math.floor(n/65536)),a=(n=(a+=o-1+37*(o-1))+(o=1)+65535)-65536*(o=Math.floor(n/65536)),h=(n=h+o+65535)-65536*(o=Math.floor(n/65536)),s=(n=s+o+65535)-65536*(o=Math.floor(n/65536)),c=(n=c+o+65535)-65536*(o=Math.floor(n/65536)),_=(n=_+o+65535)-65536*(o=Math.floor(n/65536)),y=(n=y+o+65535)-65536*(o=Math.floor(n/65536)),i=(n=i+o+65535)-65536*(o=Math.floor(n/65536)),p=(n=p+o+65535)-65536*(o=Math.floor(n/65536)),u=(n=u+o+65535)-65536*(o=Math.floor(n/65536)),f=(n=f+o+65535)-65536*(o=Math.floor(n/65536)),b=(n=b+o+65535)-65536*(o=Math.floor(n/65536)),l=(n=l+o+65535)-65536*(o=Math.floor(n/65536)),E=(n=E+o+65535)-65536*(o=Math.floor(n/65536)),g=(n=g+o+65535)-65536*(o=Math.floor(n/65536)),m=(n=m+o+65535)-65536*(o=Math.floor(n/65536)),S=(n=S+o+65535)-65536*(o=Math.floor(n/65536)),a+=o-1+37*(o-1),t[0]=a,t[1]=h,t[2]=s,t[3]=c,t[4]=_,t[5]=y,t[6]=i,t[7]=p,t[8]=u,t[9]=f,t[10]=b,t[11]=l,t[12]=E,t[13]=g,t[14]=m,t[15]=S;}function O$6(t,e){C$4(t,e,e);}function R$4(t,e,r){for(var n,o=~(r-1),a=0;a<16;a++)n=o&(t[a]^e[a]),t[a]^=n,e[a]^=n;}function I$5(t){var e,r,n=1;for(e=0;e<16;e++)r=t[e]+n+65535,n=Math.floor(r/65536),t[e]=r-65536*n;t[0]+=n-1+37*(n-1);}var P$6={gf:A$7,A:function(t,e,r){for(var n=0;n<16;n++)t[n]=e[n]+r[n];},Z:function(t,e,r){for(var n=0;n<16;n++)t[n]=e[n]-r[n];},M:C$4,S:O$6,sel25519:R$4,pack25519:function(t,e){var r,n,o,a=A$7(),h=A$7();for(r=0;r<16;r++)h[r]=e[r];for(I$5(h),I$5(h),I$5(h),n=0;n<2;n++){for(a[0]=h[0]-65517,r=1;r<15;r++)a[r]=h[r]-65535-(a[r-1]>>16&1),a[r-1]&=65535;a[15]=h[15]-32767-(a[14]>>16&1),o=a[15]>>16&1,a[14]&=65535,R$4(h,a,1-o);}for(r=0;r<16;r++)t[2*r]=255&h[r],t[2*r+1]=h[r]>>8;},unpack25519:function(t,e){var r;for(r=0;r<16;r++)t[r]=e[2*r]+(e[2*r+1]<<8);t[15]&=32767;},inv25519:function(t,e){var r,n=A$7();for(r=0;r<16;r++)n[r]=e[r];for(r=253;r>=0;r--)O$6(n,n),2!==r&&4!==r&&C$4(n,n,e);for(r=0;r<16;r++)t[r]=n[r];},gf0:x$5,gf1:w$5,_9:L$5,_121665:v$5,D:U$5,D2:M$5,X:k$5,Y:N$5,I:K$5};const{_9:D$5,_121665:X$4,gf:G$4,inv25519:F$4,pack25519:W$5,unpack25519:Z$4,sel25519:V$4,A:H$5,M:z$4,Z:j$4,S:q$4}=P$6;var Q$4={crypto_scalarmult:J$4,crypto_scalarmult_base:function(t,e){return J$4(t,e,D$5)},crypto_scalarmult_BYTES:32,crypto_scalarmult_SCALARBYTES:32};function J$4(t,e,r){$$4(t,32),$$4(e,32),$$4(r,32);var n,o,a=new Uint8Array(32),h=new Float64Array(80),s=G$4(),c=G$4(),_=G$4(),y=G$4(),i=G$4(),p=G$4();for(o=0;o<31;o++)a[o]=e[o];for(a[31]=127&e[31]|64,a[0]&=248,Z$4(h,r),o=0;o<16;o++)c[o]=h[o],y[o]=s[o]=_[o]=0;for(s[0]=y[0]=1,o=254;o>=0;--o)n=a[o>>>3]>>>(7&o)&1,V$4(s,c,n),V$4(_,y,n),H$5(i,s,_),j$4(s,s,_),H$5(_,c,y),j$4(c,c,y),q$4(y,i),q$4(p,s),z$4(s,_,s),z$4(_,c,i),H$5(i,s,_),j$4(s,s,_),q$4(c,s),j$4(_,y,p),z$4(s,_,X$4),H$5(s,s,y),z$4(_,_,s),z$4(s,y,p),z$4(y,c,h),q$4(c,i),V$4(s,c,n),V$4(_,y,n);for(o=0;o<16;o++)h[o+16]=s[o],h[o+32]=_[o],h[o+48]=c[o],h[o+64]=y[o];var u=h.subarray(32),f=h.subarray(16);return F$4(u,u),z$4(f,f,u),W$5(t,f),0}function $$4(t,e){if(!t||e&&t.length<e)throw new Error("Argument must be a buffer"+(e?" of length "+e:""))}var tt$4={exports:{}};!function(t){var e=d$9;if(1!==new Uint16Array([1])[0])throw new Error("Big endian architecture is not supported.");t.exports.crypto_generichash_PRIMITIVE="blake2b",t.exports.crypto_generichash_BYTES_MIN=e.BYTES_MIN,t.exports.crypto_generichash_BYTES_MAX=e.BYTES_MAX,t.exports.crypto_generichash_BYTES=e.BYTES,t.exports.crypto_generichash_KEYBYTES_MIN=e.KEYBYTES_MIN,t.exports.crypto_generichash_KEYBYTES_MAX=e.KEYBYTES_MAX,t.exports.crypto_generichash_KEYBYTES=e.KEYBYTES,t.exports.crypto_generichash_WASM_SUPPORTED=e.WASM_SUPPORTED,t.exports.crypto_generichash_WASM_LOADED=!1,t.exports.crypto_generichash=function(t,r,n){e(t.length,n).update(r).final(t);},t.exports.crypto_generichash_ready=e.ready,t.exports.crypto_generichash_batch=function(t,r,n){for(var o=e(t.length,n),a=0;a<r.length;a++)o.update(r[a]);o.final(t);},t.exports.crypto_generichash_instance=function(r,n){return null==n&&(n=t.exports.crypto_generichash_BYTES),e(n,r)},e.ready((function(r){t.exports.crypto_generichash_WASM_LOADED=e.WASM_LOADED;}));}(tt$4);var et$4={};if(function(t){const e=e$6;if(1!==new Uint16Array([1])[0])throw new Error("Big endian architecture is not supported.");function r(t,r){this._instance=e(t,r);}t.crypto_stream_KEYBYTES=32,t.crypto_stream_NONCEBYTES=24,t.crypto_stream_PRIMITIVE="xsalsa20",t.crypto_stream_xsalsa20_MESSAGEBYTES_MAX=Number.MAX_SAFE_INTEGER,t.crypto_stream=function(e,r,n){e.fill(0),t.crypto_stream_xor(e,e,r,n);},t.crypto_stream_xor=function(t,r,n,o){const a=e(n,o);a.update(r,t),a.final();},t.crypto_stream_xor_instance=function(t,e){return new r(t,e)},r.prototype.update=function(t,e){this._instance.update(e,t);},r.prototype.final=function(){this._instance.finalize(),this._instance=null;};}(et$4),1!==new Uint16Array([1])[0])throw new Error("Big endian architecture is not supported.");var rt$3=function(t){var e,r,n,o,a,h,s,c;this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0,e=255&t[0]|(255&t[1])<<8,this.r[0]=8191&e,r=255&t[2]|(255&t[3])<<8,this.r[1]=8191&(e>>>13|r<<3),n=255&t[4]|(255&t[5])<<8,this.r[2]=7939&(r>>>10|n<<6),o=255&t[6]|(255&t[7])<<8,this.r[3]=8191&(n>>>7|o<<9),a=255&t[8]|(255&t[9])<<8,this.r[4]=255&(o>>>4|a<<12),this.r[5]=a>>>1&8190,h=255&t[10]|(255&t[11])<<8,this.r[6]=8191&(a>>>14|h<<2),s=255&t[12]|(255&t[13])<<8,this.r[7]=8065&(h>>>11|s<<5),c=255&t[14]|(255&t[15])<<8,this.r[8]=8191&(s>>>8|c<<8),this.r[9]=c>>>5&127,this.pad[0]=255&t[16]|(255&t[17])<<8,this.pad[1]=255&t[18]|(255&t[19])<<8,this.pad[2]=255&t[20]|(255&t[21])<<8,this.pad[3]=255&t[22]|(255&t[23])<<8,this.pad[4]=255&t[24]|(255&t[25])<<8,this.pad[5]=255&t[26]|(255&t[27])<<8,this.pad[6]=255&t[28]|(255&t[29])<<8,this.pad[7]=255&t[30]|(255&t[31])<<8;};rt$3.prototype.blocks=function(t,e,r){for(var n,o,a,h,s,c,_,y,i,p,u,f,b,l,E,g,m,S,Y,T=this.fin?0:2048,d=this.h[0],B=this.h[1],A=this.h[2],L=this.h[3],x=this.h[4],w=this.h[5],v=this.h[6],U=this.h[7],M=this.h[8],k=this.h[9],N=this.r[0],K=this.r[1],C=this.r[2],O=this.r[3],R=this.r[4],I=this.r[5],P=this.r[6],D=this.r[7],X=this.r[8],G=this.r[9];r>=16;)p=i=0,p+=(d+=8191&(n=255&t[e+0]|(255&t[e+1])<<8))*N,p+=(B+=8191&(n>>>13|(o=255&t[e+2]|(255&t[e+3])<<8)<<3))*(5*G),p+=(A+=8191&(o>>>10|(a=255&t[e+4]|(255&t[e+5])<<8)<<6))*(5*X),p+=(L+=8191&(a>>>7|(h=255&t[e+6]|(255&t[e+7])<<8)<<9))*(5*D),i=(p+=(x+=8191&(h>>>4|(s=255&t[e+8]|(255&t[e+9])<<8)<<12))*(5*P))>>>13,p&=8191,p+=(w+=s>>>1&8191)*(5*I),p+=(v+=8191&(s>>>14|(c=255&t[e+10]|(255&t[e+11])<<8)<<2))*(5*R),p+=(U+=8191&(c>>>11|(_=255&t[e+12]|(255&t[e+13])<<8)<<5))*(5*O),p+=(M+=8191&(_>>>8|(y=255&t[e+14]|(255&t[e+15])<<8)<<8))*(5*C),u=i+=(p+=(k+=y>>>5|T)*(5*K))>>>13,u+=d*K,u+=B*N,u+=A*(5*G),u+=L*(5*X),i=(u+=x*(5*D))>>>13,u&=8191,u+=w*(5*P),u+=v*(5*I),u+=U*(5*R),u+=M*(5*O),i+=(u+=k*(5*C))>>>13,u&=8191,f=i,f+=d*C,f+=B*K,f+=A*N,f+=L*(5*G),i=(f+=x*(5*X))>>>13,f&=8191,f+=w*(5*D),f+=v*(5*P),f+=U*(5*I),f+=M*(5*R),b=i+=(f+=k*(5*O))>>>13,b+=d*O,b+=B*C,b+=A*K,b+=L*N,i=(b+=x*(5*G))>>>13,b&=8191,b+=w*(5*X),b+=v*(5*D),b+=U*(5*P),b+=M*(5*I),l=i+=(b+=k*(5*R))>>>13,l+=d*R,l+=B*O,l+=A*C,l+=L*K,i=(l+=x*N)>>>13,l&=8191,l+=w*(5*G),l+=v*(5*X),l+=U*(5*D),l+=M*(5*P),E=i+=(l+=k*(5*I))>>>13,E+=d*I,E+=B*R,E+=A*O,E+=L*C,i=(E+=x*K)>>>13,E&=8191,E+=w*N,E+=v*(5*G),E+=U*(5*X),E+=M*(5*D),g=i+=(E+=k*(5*P))>>>13,g+=d*P,g+=B*I,g+=A*R,g+=L*O,i=(g+=x*C)>>>13,g&=8191,g+=w*K,g+=v*N,g+=U*(5*G),g+=M*(5*X),m=i+=(g+=k*(5*D))>>>13,m+=d*D,m+=B*P,m+=A*I,m+=L*R,i=(m+=x*O)>>>13,m&=8191,m+=w*C,m+=v*K,m+=U*N,m+=M*(5*G),S=i+=(m+=k*(5*X))>>>13,S+=d*X,S+=B*D,S+=A*P,S+=L*I,i=(S+=x*R)>>>13,S&=8191,S+=w*O,S+=v*C,S+=U*K,S+=M*N,Y=i+=(S+=k*(5*G))>>>13,Y+=d*G,Y+=B*X,Y+=A*D,Y+=L*P,i=(Y+=x*I)>>>13,Y&=8191,Y+=w*R,Y+=v*O,Y+=U*C,Y+=M*K,d=p=8191&(i=(i=((i+=(Y+=k*N)>>>13)<<2)+i|0)+(p&=8191)|0),B=u+=i>>>=13,A=f&=8191,L=b&=8191,x=l&=8191,w=E&=8191,v=g&=8191,U=m&=8191,M=S&=8191,k=Y&=8191,e+=16,r-=16;this.h[0]=d,this.h[1]=B,this.h[2]=A,this.h[3]=L,this.h[4]=x,this.h[5]=w,this.h[6]=v,this.h[7]=U,this.h[8]=M,this.h[9]=k;},rt$3.prototype.finish=function(t,e){var r,n,o,a,h=new Uint16Array(10);if(this.leftover){for(a=this.leftover,this.buffer[a++]=1;a<16;a++)this.buffer[a]=0;this.fin=1,this.blocks(this.buffer,0,16);}for(r=this.h[1]>>>13,this.h[1]&=8191,a=2;a<10;a++)this.h[a]+=r,r=this.h[a]>>>13,this.h[a]&=8191;for(this.h[0]+=5*r,r=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=r,r=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=r,h[0]=this.h[0]+5,r=h[0]>>>13,h[0]&=8191,a=1;a<10;a++)h[a]=this.h[a]+r,r=h[a]>>>13,h[a]&=8191;for(h[9]-=8192,n=(1^r)-1,a=0;a<10;a++)h[a]&=n;for(n=~n,a=0;a<10;a++)this.h[a]=this.h[a]&n|h[a];for(this.h[0]=65535&(this.h[0]|this.h[1]<<13),this.h[1]=65535&(this.h[1]>>>3|this.h[2]<<10),this.h[2]=65535&(this.h[2]>>>6|this.h[3]<<7),this.h[3]=65535&(this.h[3]>>>9|this.h[4]<<4),this.h[4]=65535&(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14),this.h[5]=65535&(this.h[6]>>>2|this.h[7]<<11),this.h[6]=65535&(this.h[7]>>>5|this.h[8]<<8),this.h[7]=65535&(this.h[8]>>>8|this.h[9]<<5),o=this.h[0]+this.pad[0],this.h[0]=65535&o,a=1;a<8;a++)o=(this.h[a]+this.pad[a]|0)+(o>>>16)|0,this.h[a]=65535&o;t[e+0]=this.h[0]>>>0&255,t[e+1]=this.h[0]>>>8&255,t[e+2]=this.h[1]>>>0&255,t[e+3]=this.h[1]>>>8&255,t[e+4]=this.h[2]>>>0&255,t[e+5]=this.h[2]>>>8&255,t[e+6]=this.h[3]>>>0&255,t[e+7]=this.h[3]>>>8&255,t[e+8]=this.h[4]>>>0&255,t[e+9]=this.h[4]>>>8&255,t[e+10]=this.h[5]>>>0&255,t[e+11]=this.h[5]>>>8&255,t[e+12]=this.h[6]>>>0&255,t[e+13]=this.h[6]>>>8&255,t[e+14]=this.h[7]>>>0&255,t[e+15]=this.h[7]>>>8&255;},rt$3.prototype.update=function(t,e,r){var n,o;if(this.leftover){for((o=16-this.leftover)>r&&(o=r),n=0;n<o;n++)this.buffer[this.leftover+n]=t[e+n];if(r-=o,e+=o,this.leftover+=o,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0;}if(r>=16&&(o=r-r%16,this.blocks(t,e,o),e+=o,r-=o),r){for(n=0;n<r;n++)this.buffer[this.leftover+n]=t[e+n];this.leftover+=r;}};var nt$3=rt$3;const ot$2=r$l,at$3=nt$3,{crypto_verify_16:ht$1}=u$7.exports;var st$4={crypto_onetimeauth:ct$1,crypto_onetimeauth_verify:function(t,e,r){ot$2(16===t.byteLength,"mac must be 'crypto_onetimeauth_BYTES' bytes"),ot$2(null!=e.byteLength,"msg must be buffer"),ot$2(32===r.byteLength,"key must be 'crypto_onetimeauth_KEYBYTES' bytes");var n=new Uint8Array(16);return ct$1(n,e,r),ht$1(t,0,n,0)},crypto_onetimeauth_BYTES:16,crypto_onetimeauth_KEYBYTES:32,crypto_onetimeauth_PRIMITIVE:"poly1305"};function ct$1(t,e,r){ot$2(16===t.byteLength,"mac must be 'crypto_onetimeauth_BYTES' bytes"),ot$2(null!=e.byteLength,"msg must be buffer"),ot$2(32===r.byteLength,"key must be 'crypto_onetimeauth_KEYBYTES' bytes");var n=new at$3(r);n.update(e,0,e.byteLength),n.finish(t,0);}const _t$1=r$l,{crypto_stream:yt$1,crypto_stream_xor:it$4}=et$4,{crypto_onetimeauth:pt$1,crypto_onetimeauth_verify:ut$3,crypto_onetimeauth_BYTES:ft$1,crypto_onetimeauth_KEYBYTES:bt$1}=st$4,lt$3=32,Et$1=24,gt$1=32,mt$1=16;var St$1={crypto_secretbox:Yt$1,crypto_secretbox_open:Tt$1,crypto_secretbox_detached:function(t,e,r,n,o){_t$1(t.byteLength===r.byteLength,"o must be 'msg.byteLength' bytes"),_t$1(16===e.byteLength,"mac must be 'crypto_secretbox_MACBYTES' bytes"),_t$1(n.byteLength===Et$1,"n must be 'crypto_secretbox_NONCEBYTES' bytes"),_t$1(o.byteLength===lt$3,"k must be 'crypto_secretbox_KEYBYTES' bytes");const a=new Uint8Array(r.byteLength+e.byteLength);return dt$1(a,r,n,o),e.set(a.subarray(0,e.byteLength)),t.set(a.subarray(e.byteLength)),!0},crypto_secretbox_open_detached:function(t,e,r,n,o){_t$1(e.byteLength===t.byteLength,"o must be 'msg.byteLength' bytes"),_t$1(16===r.byteLength,"mac must be 'crypto_secretbox_MACBYTES' bytes"),_t$1(n.byteLength===Et$1,"n must be 'crypto_secretbox_NONCEBYTES' bytes"),_t$1(o.byteLength===lt$3,"k must be 'crypto_secretbox_KEYBYTES' bytes");const a=new Uint8Array(e.byteLength+r.byteLength);return a.set(r),a.set(e,r.byteLength),Bt$1(t,a,n,o)},crypto_secretbox_easy:dt$1,crypto_secretbox_open_easy:Bt$1,crypto_secretbox_KEYBYTES:lt$3,crypto_secretbox_NONCEBYTES:Et$1,crypto_secretbox_ZEROBYTES:gt$1,crypto_secretbox_BOXZEROBYTES:mt$1,crypto_secretbox_MACBYTES:16};function Yt$1(t,e,r,n){_t$1(t.byteLength===e.byteLength,"c must be 'm.byteLength' bytes");const o=e.byteLength;_t$1(o>=gt$1,"mlen must be at least 'crypto_secretbox_ZEROBYTES'"),_t$1(r.byteLength===Et$1,"n must be 'crypto_secretbox_NONCEBYTES' bytes"),_t$1(n.byteLength===lt$3,"k must be 'crypto_secretbox_KEYBYTES' bytes"),it$4(t,e,r,n),pt$1(t.subarray(mt$1,mt$1+ft$1),t.subarray(mt$1+ft$1,t.byteLength),t.subarray(0,bt$1)),t.fill(0,0,mt$1);}function Tt$1(t,e,r,n){_t$1(e.byteLength===t.byteLength,"c must be 'm.byteLength' bytes");const o=t.byteLength;_t$1(o>=gt$1,"mlen must be at least 'crypto_secretbox_ZEROBYTES'"),_t$1(r.byteLength===Et$1,"n must be 'crypto_secretbox_NONCEBYTES' bytes"),_t$1(n.byteLength===lt$3,"k must be 'crypto_secretbox_KEYBYTES' bytes");const a=new Uint8Array(bt$1);return yt$1(a,r,n),!1!==ut$3(e.subarray(mt$1,mt$1+ft$1),e.subarray(mt$1+ft$1,e.byteLength),a)&&(it$4(t,e,r,n),t.fill(0,0,32),!0)}function dt$1(t,e,r,n){_t$1(t.byteLength===e.byteLength+16,"o must be 'msg.byteLength + crypto_secretbox_MACBYTES' bytes"),_t$1(r.byteLength===Et$1,"n must be 'crypto_secretbox_NONCEBYTES' bytes"),_t$1(n.byteLength===lt$3,"k must be 'crypto_secretbox_KEYBYTES' bytes");const o=new Uint8Array(gt$1+e.byteLength),a=new Uint8Array(o.byteLength);o.set(e,gt$1),Yt$1(a,o,r,n),t.set(a.subarray(mt$1));}function Bt$1(t,e,r,n){_t$1(e.byteLength===t.byteLength+16,"box must be 'msg.byteLength + crypto_secretbox_MACBYTES' bytes"),_t$1(r.byteLength===Et$1,"n must be 'crypto_secretbox_NONCEBYTES' bytes"),_t$1(n.byteLength===lt$3,"k must be 'crypto_secretbox_KEYBYTES' bytes");const o=new Uint8Array(mt$1+e.byteLength),a=new Uint8Array(o.byteLength);return o.set(e,mt$1),!1!==Tt$1(a,o,r,n)&&(t.set(a.subarray(gt$1)),!0)}const{crypto_hash_sha512:At$1}=B$5,{crypto_scalarmult:Lt$1,crypto_scalarmult_base:xt$1}=Q$4,{randombytes:wt$1}=y$a.exports,{crypto_generichash_batch:vt$1}=tt$4.exports,{crypto_stream_xsalsa20_MESSAGEBYTES_MAX:Ut$1}=et$4,{crypto_secretbox_open_easy:Mt$1,crypto_secretbox_easy:kt$1,crypto_secretbox_detached:Nt$1,crypto_secretbox_open_detached:Kt$1}=St$1,Ct$1=e$6,Ot$1=r$l,Rt$1=32,It$1=32,Pt$1=32,Dt$1=16,Xt$1=Ut$1-16;var Gt$1={crypto_box_easy:function(t,e,r,n,o){return Ot$1(t.length>=e.length+Dt$1,"c should be at least 'm.length + crypto_box_MACBYTES' bytes"),Ot$1(e.length<=Xt$1,"m should be at most 'crypto_box_MESSAGEBYTES_MAX' bytes"),function(t,e,r,n,o,a){Zt$1(e,Dt$1),Zt$1(n,24),Zt$1(o,Rt$1),Zt$1(a,It$1);const h=new Uint8Array(Pt$1);Ot$1(Wt$1(h,o,a));const s=function(t,e,r,n,o){return Nt$1(t,e,r,n,o)}(t,e,r,n,h);return Vt$1(h),s}(t.subarray(Dt$1,e.length+Dt$1),t.subarray(0,Dt$1),e,r,n,o)},crypto_box_open_easy:function(t,e,r,n,o){return Ot$1(e.length>=t.length+Dt$1,"c should be at least 'm.length + crypto_box_MACBYTES' bytes"),function(t,e,r,n,o,a){const h=new Uint8Array(Pt$1);Ot$1(Wt$1(h,o,a));const s=function(t,e,r,n,o){return Kt$1(t,e,r,n,o)}(t,e,r,n,h);return Vt$1(h),s}(t,e.subarray(Dt$1,t.length+Dt$1),e.subarray(0,Dt$1),r,n,o)},crypto_box_keypair:Ft$1,crypto_box_seed_keypair:function(t,e,r){Ot$1(t.byteLength===Rt$1,"pk should be 'crypto_box_PUBLICKEYBYTES' bytes"),Ot$1(e.byteLength===It$1,"sk should be 'crypto_box_SECRETKEYBYTES' bytes"),Ot$1(32===e.byteLength,"sk should be 'crypto_box_SEEDBYTES' bytes");const n=new Uint8Array(64);return At$1(n,r,32),e.set(n.subarray(0,32)),n.fill(0),xt$1(t,e)},crypto_box_seal:function(t,e,r){Zt$1(t,48+e.length),Zt$1(r,Rt$1);var n=t.subarray(0,Rt$1),o=new Uint8Array(It$1);Ft$1(n,o);var a=new Uint8Array(24);vt$1(a,[n,r]);var h=new Uint8Array(Rt$1);Lt$1(h,o,r);var s=new Uint8Array(Pt$1),c=new Uint8Array(16);Ct$1.core_hsalsa20(s,c,h,Ct$1.SIGMA),kt$1(t.subarray(n.length),e,a,s),Vt$1(o);},crypto_box_seal_open:function(t,e,r,n){Zt$1(e,48),Zt$1(t,e.length-48),Zt$1(r,Rt$1),Zt$1(n,It$1);var o=e.subarray(0,Rt$1),a=new Uint8Array(24);vt$1(a,[o,r]);var h=new Uint8Array(Rt$1);Lt$1(h,n,o);var s=new Uint8Array(Pt$1),c=new Uint8Array(16);return Ct$1.core_hsalsa20(s,c,h,Ct$1.SIGMA),Mt$1(t,e.subarray(o.length),a,s)},crypto_box_PUBLICKEYBYTES:Rt$1,crypto_box_SECRETKEYBYTES:It$1,crypto_box_NONCEBYTES:24,crypto_box_ZEROBYTES:32,crypto_box_BOXZEROBYTES:16,crypto_box_SEALBYTES:48,crypto_box_SEEDBYTES:32,crypto_box_BEFORENMBYTES:Pt$1,crypto_box_MACBYTES:Dt$1};function Ft$1(t,e){return Zt$1(t,Rt$1),Zt$1(e,It$1),wt$1(e,32),xt$1(t,e)}function Wt$1(t,e,r){const n=new Uint8Array(16),o=new Uint8Array(32);return Ot$1(0===Lt$1(o,r,e)),Ct$1.core_hsalsa20(t,n,o,Ct$1.SIGMA),!0}function Zt$1(t,e){if(!t||e&&t.length<e)throw new Error("Argument must be a buffer"+(e?" of length "+e:""))}function Vt$1(t){for(let e=0;e<t.length;e++)t[e]=0;}const Ht$1=m$7,zt$1=r$l;if(1!==new Uint16Array([1])[0])throw new Error("Big endian architecture is not supported.");var jt$1={crypto_hash_sha256:function(t,e,r){return zt$1(32===t.byteLength,"out must be 'crypto_hash_sha256_BYTES' bytes long"),Ht$1().update(e.subarray(0,r)).digest(t),0},crypto_hash_sha256_BYTES:32},qt$1={exports:{}};!function(e){const n=r$l,o=y$a.exports.randombytes_buf,a=d$9;e.exports.crypto_kdf_PRIMITIVE="blake2b",e.exports.crypto_kdf_BYTES_MIN=16,e.exports.crypto_kdf_BYTES_MAX=64,e.exports.crypto_kdf_CONTEXTBYTES=8,e.exports.crypto_kdf_KEYBYTES=32,e.exports.crypto_kdf_derive_from_key=function(t,r,o,h){n(t.length>=e.exports.crypto_kdf_BYTES_MIN,"subkey must be at least crypto_kdf_BYTES_MIN"),n(r>=0&&r<=9007199254740991,"subkey_id must be safe integer"),n(o.length>=e.exports.crypto_kdf_CONTEXTBYTES,"context must be at least crypto_kdf_CONTEXTBYTES");var s=new Uint8Array(a.PERSONALBYTES),c=new Uint8Array(a.SALTBYTES);s.set(o,0,e.exports.crypto_kdf_CONTEXTBYTES),function(t,e){var r=1,n=0;for(t[0]=255&e;++n<8&&(r*=256);)t[n]=e/r&255;}(c,r);var _=Math.min(t.length,e.exports.crypto_kdf_BYTES_MAX);a(_,h.subarray(0,e.exports.crypto_kdf_KEYBYTES),c,s,!0).final(t);},e.exports.crypto_kdf_keygen=function(t){n(t.length>=e.exports.crypto_kdf_KEYBYTES,"out.length must be crypto_kdf_KEYBYTES"),o(t.subarray(0,e.exports.crypto_kdf_KEYBYTES));};}(qt$1);const{crypto_scalarmult_base:Qt$1}=Q$4,{crypto_generichash:Jt$1}=tt$4.exports,{randombytes_buf:$t$1}=y$a.exports,te$1=r$l;var ee$1={crypto_kx_keypair:function(t,e){return te$1(32===t.byteLength,"pk must be 'crypto_kx_PUBLICKEYBYTES' bytes"),te$1(32===e.byteLength,"sk must be 'crypto_kx_SECRETKEYBYTES' bytes"),$t$1(e,32),Qt$1(t,e)},crypto_kx_seed_keypair:function(t,e,r){return te$1(32===t.byteLength,"pk must be 'crypto_kx_PUBLICKEYBYTES' bytes"),te$1(32===e.byteLength,"sk must be 'crypto_kx_SECRETKEYBYTES' bytes"),te$1(32===r.byteLength,"seed must be 'crypto_kx_SEEDBYTES' bytes"),Jt$1(e,r),Qt$1(t,e)},crypto_kx_SEEDBYTES:32,crypto_kx_SECRETKEYBYTES:32,crypto_kx_PUBLICKEYBYTES:32},re$1={};!function(e){const r=r$l,n=s$b;if(1!==new Uint16Array([1])[0])throw new Error("Big endian architecture is not supported.");e.crypto_stream_chacha20_KEYBYTES=32,e.crypto_stream_chacha20_NONCEBYTES=8,e.crypto_stream_chacha20_MESSAGEBYTES_MAX=Number.MAX_SAFE_INTEGER,e.crypto_stream_chacha20_ietf_KEYBYTES=32,e.crypto_stream_chacha20_ietf_NONCEBYTES=12,e.crypto_stream_chacha20_ietf_MESSAGEBYTES_MAX=2**32,e.crypto_stream_chacha20=function(t,r,n){t.fill(0),e.crypto_stream_chacha20_xor(t,t,r,n);},e.crypto_stream_chacha20_xor=function(t,o,a,h){r(a.byteLength===e.crypto_stream_chacha20_NONCEBYTES,"n should be crypto_stream_chacha20_NONCEBYTES"),r(h.byteLength===e.crypto_stream_chacha20_KEYBYTES,"k should be crypto_stream_chacha20_KEYBYTES");const s=new n(a,h);s.update(t,o),s.final();},e.crypto_stream_chacha20_xor_ic=function(t,o,a,h,s){r(a.byteLength===e.crypto_stream_chacha20_NONCEBYTES,"n should be crypto_stream_chacha20_NONCEBYTES"),r(s.byteLength===e.crypto_stream_chacha20_KEYBYTES,"k should be crypto_stream_chacha20_KEYBYTES");const c=new n(a,s,h);c.update(t,o),c.final();},e.crypto_stream_chacha20_xor_instance=function(t,o){return r(t.byteLength===e.crypto_stream_chacha20_NONCEBYTES,"n should be crypto_stream_chacha20_NONCEBYTES"),r(o.byteLength===e.crypto_stream_chacha20_KEYBYTES,"k should be crypto_stream_chacha20_KEYBYTES"),new n(t,o)},e.crypto_stream_chacha20_ietf=function(t,r,n){t.fill(0),e.crypto_stream_chacha20_ietf_xor(t,t,r,n);},e.crypto_stream_chacha20_ietf_xor=function(t,o,a,h){r(a.byteLength===e.crypto_stream_chacha20_ietf_NONCEBYTES,"n should be crypto_stream_chacha20_ietf_NONCEBYTES"),r(h.byteLength===e.crypto_stream_chacha20_ietf_KEYBYTES,"k should be crypto_stream_chacha20_ietf_KEYBYTES");const s=new n(a,h);s.update(t,o),s.final();},e.crypto_stream_chacha20_ietf_xor_ic=function(t,o,a,h,s){r(a.byteLength===e.crypto_stream_chacha20_ietf_NONCEBYTES,"n should be crypto_stream_chacha20_ietf_NONCEBYTES"),r(s.byteLength===e.crypto_stream_chacha20_ietf_KEYBYTES,"k should be crypto_stream_chacha20_ietf_KEYBYTES");const c=new n(a,s,h);c.update(t,o),c.final();},e.crypto_stream_chacha20_ietf_xor_instance=function(t,o){return r(t.byteLength===e.crypto_stream_chacha20_ietf_NONCEBYTES,"n should be crypto_stream_chacha20_ietf_NONCEBYTES"),r(o.byteLength===e.crypto_stream_chacha20_ietf_KEYBYTES,"k should be crypto_stream_chacha20_ietf_KEYBYTES"),new n(t,o)};}(re$1);const{crypto_stream_chacha20_ietf:ne$1,crypto_stream_chacha20_ietf_xor_ic:oe$1}=re$1,{crypto_verify_16:ae$1}=u$7.exports,he$1=nt$3,se$1=r$l,ce$1=16,_e$1=Number.MAX_SAFE_INTEGER,ye$1=new Uint8Array(16);function ie$1(t,e,r,n,o,a,h){if(null===n)return ie$1(t,e,r,new Uint8Array(0),o,a,h);se$1(t.byteLength===r.byteLength,"ciphertext should be same length than message"),se$1(12===a.byteLength,"npub should be 'crypto_aead_chacha20poly1305_ietf_NPUBBYTES' long"),se$1(32===h.byteLength,"k should be 'crypto_aead_chacha20poly1305_ietf_KEYBYTES' long"),se$1(r.byteLength<=_e$1,"message is too large"),se$1(e.byteLength<=ce$1,"mac should be 'crypto_aead_chacha20poly1305_ietf_ABYTES' long");const s=new Uint8Array(64);var c=new Uint8Array(8);ne$1(s,a,h);const _=new he$1(s);return s.fill(0),_.update(n,0,n.byteLength),_.update(ye$1,0,16-n.byteLength&15),oe$1(t,r,a,1,h),_.update(t,0,r.byteLength),_.update(ye$1,0,16-r.byteLength&15),ue$1(c,0,n.byteLength),_.update(c,0,c.byteLength),ue$1(c,0,r.byteLength),_.update(c,0,c.byteLength),_.finish(e,0),c.fill(0),ce$1}function pe$1(t,e,r,n,o,a,h){if(null===o)return pe$1(t,e,r,n,new Uint8Array(0),a,h);se$1(r.byteLength===t.byteLength,"message should be same length than ciphertext"),se$1(12===a.byteLength,"npub should be 'crypto_aead_chacha20poly1305_ietf_NPUBBYTES' long"),se$1(32===h.byteLength,"k should be 'crypto_aead_chacha20poly1305_ietf_KEYBYTES' long"),se$1(t.byteLength<=_e$1,"message is too large"),se$1(n.byteLength<=ce$1,"mac should be 'crypto_aead_chacha20poly1305_ietf_ABYTES' long");const s=new Uint8Array(64),c=new Uint8Array(8),_=new Uint8Array(ce$1);ne$1(s,a,h);const y=new he$1(s);s.fill(0),y.update(o,0,o.byteLength),y.update(ye$1,0,16-o.byteLength&15);const i=r.byteLength;y.update(r,0,i),y.update(ye$1,0,16-i&15),ue$1(c,0,o.byteLength),y.update(c,0,c.byteLength),ue$1(c,0,i),y.update(c,0,c.byteLength),y.finish(_,0),se$1(16===_.byteLength);const p=ae$1(_,0,n,0);if(_.fill(0),c.fill(0),!p)throw t.fill(0),new Error("could not verify data");oe$1(t,r,a,1,h);}function ue$1(t,e,r){t.fill(0,0,8);const n=new DataView(t.buffer,t.byteOffset,t.byteLength);n.setUint32(e,4294967295&r,!0),n.setUint32(e+4,r/2**32&4294967295,!0);}var fe$1={crypto_aead_chacha20poly1305_ietf_encrypt:function t(e,r,n,o,a,h){if(null===n)return t(e,r,new Uint8Array(0),o,a,h);se$1(e.byteLength===r.byteLength+ce$1,"ciphertext should be 'crypto_aead_chacha20poly1305_ietf_ABYTES' longer than message"),se$1(12===a.byteLength,"npub should be 'crypto_aead_chacha20poly1305_ietf_NPUBBYTES' long"),se$1(32===h.byteLength,"k should be 'crypto_aead_chacha20poly1305_ietf_KEYBYTES' long"),se$1(r.byteLength<=_e$1,"message is too large");const s=ie$1(e.subarray(0,r.byteLength),e.subarray(r.byteLength),r,n,o,a,h);return r.byteLength+s},crypto_aead_chacha20poly1305_ietf_encrypt_detached:ie$1,crypto_aead_chacha20poly1305_ietf_decrypt:function t(e,r,n,o,a,h){if(null===o)return t(e,r,n,new Uint8Array(0),a,h);if(se$1(e.byteLength===n.byteLength-ce$1,"message should be 'crypto_aead_chacha20poly1305_ietf_ABYTES' shorter than ciphertext"),se$1(12===a.byteLength,"npub should be 'crypto_aead_chacha20poly1305_ietf_NPUBBYTES' long"),se$1(32===h.byteLength,"k should be 'crypto_aead_chacha20poly1305_ietf_KEYBYTES' long"),se$1(e.byteLength<=_e$1,"message is too large"),n.byteLength<ce$1)throw new Error("could not verify data");return pe$1(e,r,n.subarray(0,n.byteLength-ce$1),n.subarray(n.byteLength-ce$1),o,a,h),n.byteLength-ce$1},crypto_aead_chacha20poly1305_ietf_decrypt_detached:pe$1,crypto_aead_chacha20poly1305_ietf_ABYTES:ce$1,crypto_aead_chacha20poly1305_ietf_KEYBYTES:32,crypto_aead_chacha20poly1305_ietf_NPUBBYTES:12,crypto_aead_chacha20poly1305_ietf_NSECBYTES:0,crypto_aead_chacha20poly1305_ietf_MESSAGEBYTES_MAX:_e$1};const be$1=r$l;if(1!==new Uint16Array([1])[0])throw new Error("Big endian architecture is not supported.");function le$1(t,e){return (t&=4294967295)<<(e&=4294967295)|t>>>32-e}function Ee$1(t,e){be$1(t instanceof Uint8Array,"src not byte array");let r=t[e];return r|=t[e+1]<<8,r|=t[e+2]<<16,r|=t[e+3]<<24,r}function ge$1(t,e,r){be$1(t instanceof Uint8Array,"dest not byte array");var n=1,o=0;for(t[r]=255&e;++o<4&&(n*=256);)t[r+o]=e/n&255;}function me$1(t,e,r,n,o){t[e]+=t[r],t[o]=le$1(t[o]^t[e],16),t[n]+=t[o],t[r]=le$1(t[r]^t[n],12),t[e]+=t[r],t[o]=le$1(t[o]^t[e],8),t[n]+=t[o],t[r]=le$1(t[r]^t[n],7);}var Se$1={crypto_core_hchacha20_INPUTBYTES:16,LOAD32_LE:Ee$1,STORE32_LE:ge$1,QUARTERROUND:me$1,crypto_core_hchacha20:function(t,e,r,n){be$1(t instanceof Uint8Array&&32===t.length,"out is not an array of 32 bytes"),be$1(r instanceof Uint8Array&&32===r.length,"k is not an array of 32 bytes"),be$1(null===n||n instanceof Uint8Array&&16===n.length,"c is not null or an array of 16 bytes");let o=0;const a=new Uint32Array(16);for(n?(a[0]=Ee$1(n,0),a[1]=Ee$1(n,4),a[2]=Ee$1(n,8),a[3]=Ee$1(n,12)):(a[0]=1634760805,a[1]=857760878,a[2]=2036477234,a[3]=1797285236),a[4]=Ee$1(r,0),a[5]=Ee$1(r,4),a[6]=Ee$1(r,8),a[7]=Ee$1(r,12),a[8]=Ee$1(r,16),a[9]=Ee$1(r,20),a[10]=Ee$1(r,24),a[11]=Ee$1(r,28),a[12]=Ee$1(e,0),a[13]=Ee$1(e,4),a[14]=Ee$1(e,8),a[15]=Ee$1(e,12),o=0;o<10;o++)me$1(a,0,4,8,12),me$1(a,1,5,9,13),me$1(a,2,6,10,14),me$1(a,3,7,11,15),me$1(a,0,5,10,15),me$1(a,1,6,11,12),me$1(a,2,7,8,13),me$1(a,3,4,9,14);return ge$1(t,a[0],0),ge$1(t,a[1],4),ge$1(t,a[2],8),ge$1(t,a[3],12),ge$1(t,a[12],16),ge$1(t,a[13],20),ge$1(t,a[14],24),ge$1(t,a[15],28),0},crypto_core_hchacha20_outputbytes:function(){return 32},crypto_core_hchacha20_inputbytes:function(){return 16},crypto_core_hchacha20_keybytes:function(){return 32},crypto_core_hchacha20_constbytes:function(){return 16}};const Ye$1=r$l,{randombytes_buf:Te$1}=y$a.exports,{crypto_stream_chacha20_ietf:de$1,crypto_stream_chacha20_ietf_xor:Be$1,crypto_stream_chacha20_ietf_xor_ic:Ae$1,crypto_stream_chacha20_ietf_KEYBYTES:Le$1}=re$1,{crypto_core_hchacha20:xe$1,crypto_core_hchacha20_INPUTBYTES:we$1}=Se$1,ve$1=nt$3,{sodium_increment:Ue$1,sodium_is_zero:Me$1,sodium_memcmp:ke$1}=l$9,Ne$1=4,Ke$1=32,Ce$1=Number.MAX_SAFE_INTEGER,Oe$1=Number.MAX_SAFE_INTEGER,Re$1=new Uint8Array([0]),Ie$1=new Uint8Array([1]),Pe$1=new Uint8Array([2]),De$1=new Uint8Array([Ie$1|Pe$1]),Xe$1=40+Ne$1+8,Ge$1=Ke$1,Fe$1=Ge$1+8+Ne$1,We$1=new Uint8Array(16);function Ze$1(t,e){let r=1,n=0;for(t[0]=255&e;++n<8&&(r*=256);)t[n]=e/r&255;}function Ve$1(t){Ye$1(t.byteLength===Xe$1,"state is should be crypto_secretstream_xchacha20poly1305_STATEBYTES long");const e=t.subarray(Ge$1,Fe$1);for(let t=0;t<Ne$1;t++)e[t]=0;e[0]=1;}function He$1(t){Ye$1(t.byteLength===Xe$1,"state is should be crypto_secretstream_xchacha20poly1305_STATEBYTES long");const e=t.subarray(0,Ge$1),r=t.subarray(Ge$1,Fe$1),n=new Uint8Array(Le$1+8);let o;for(o=0;o<Le$1;o++)n[o]=e[o];for(o=0;o<8;o++)n[Le$1+o]=r[Ne$1+o];for(Be$1(n,n,r,e),o=0;o<Le$1;o++)e[o]=n[o];for(o=0;o<8;o++)r[Ne$1+o]=n[Le$1+o];Ve$1(t);}function ze$1(t,e,r){for(let n=0;n<r;n++)t[n]^=e[n];}var je$1={crypto_secretstream_xchacha20poly1305_keygen:function(t){Ye$1(t.length===Ke$1),Te$1(t);},crypto_secretstream_xchacha20poly1305_init_push:function(t,e,r){Ye$1(t.byteLength===Xe$1,"state is should be crypto_secretstream_xchacha20poly1305_STATEBYTES long"),Ye$1(e instanceof Uint8Array&&24===e.length,"out not byte array of length crypto_secretstream_xchacha20poly1305_HEADERBYTES"),Ye$1(r instanceof Uint8Array&&r.length===Ke$1,"key not byte array of length crypto_secretstream_xchacha20poly1305_KEYBYTES");const n=t.subarray(0,Ge$1),o=t.subarray(Ge$1,Fe$1),a=t.subarray(Fe$1);Te$1(e,24),xe$1(n,e,r,null),Ve$1(t);for(let t=0;t<8;t++)o[t+Ne$1]=e[t+we$1];a.fill(0);},crypto_secretstream_xchacha20poly1305_init_pull:function(t,e,r){Ye$1(t.byteLength===Xe$1,"state is should be crypto_secretstream_xchacha20poly1305_STATEBYTES long"),Ye$1(e instanceof Uint8Array&&24===e.length,"_in not byte array of length crypto_secretstream_xchacha20poly1305_HEADERBYTES"),Ye$1(r instanceof Uint8Array&&r.length===Ke$1,"key not byte array of length crypto_secretstream_xchacha20poly1305_KEYBYTES");const n=t.subarray(0,Ge$1),o=t.subarray(Ge$1,Fe$1),a=t.subarray(Fe$1);xe$1(n,e,r,null),Ve$1(t);for(let t=0;t<8;t++)o[t+Ne$1]=e[t+we$1];a.fill(0);},crypto_secretstream_xchacha20poly1305_rekey:He$1,crypto_secretstream_xchacha20poly1305_push:function(t,e,r,n,o){Ye$1(t.byteLength===Xe$1,"state is should be crypto_secretstream_xchacha20poly1305_STATEBYTES long"),n||(n=new Uint8Array(0));const a=t.subarray(0,Ge$1),h=t.subarray(Ge$1,Fe$1),s=new Uint8Array(64),c=new Uint8Array(8);Ye$1(Ce$1<=Oe$1),de$1(s,h,a);const _=new ve$1(s);s.fill(0),_.update(n,0,n.byteLength),_.update(We$1,0,16-n.byteLength&15),s[0]=o[0],Ae$1(s,s,h,1,a),_.update(s,0,s.byteLength),e[0]=s[0];const y=e.subarray(1,e.byteLength);Ae$1(y,r,h,2,a),_.update(y,0,r.byteLength),_.update(We$1,0,16-s.byteLength+r.byteLength&15),Ze$1(c,n.byteLength),_.update(c,0,c.byteLength),Ze$1(c,s.byteLength+r.byteLength),_.update(c,0,c.byteLength);const i=e.subarray(1+r.byteLength,e.byteLength);return _.finish(i,0),Ye$1(!0),ze$1(h.subarray(Ne$1,h.length),i,8),Ue$1(h),(0!=(o[0]&Pe$1)||Me$1(h.subarray(0,Ne$1)))&&He$1(t),17+r.byteLength},crypto_secretstream_xchacha20poly1305_pull:function(t,e,r,n,o){Ye$1(t.byteLength===Xe$1,"state is should be crypto_secretstream_xchacha20poly1305_STATEBYTES long"),o||(o=new Uint8Array(0));const a=t.subarray(0,Ge$1),h=t.subarray(Ge$1,Fe$1),s=new Uint8Array(64),c=new Uint8Array(8),_=new Uint8Array(16);Ye$1(n.byteLength>=17,"ciphertext is too short.");const y=n.byteLength-17;de$1(s,h,a);const i=new ve$1(s);s.fill(0),i.update(o,0,o.byteLength),i.update(We$1,0,16-o.byteLength&15),s.fill(0),s[0]=n[0],Ae$1(s,s,h,1,a),r[0]=s[0],s[0]=n[0],i.update(s,0,s.byteLength);const p=n.subarray(1,n.length);i.update(p,0,y),i.update(We$1,0,16-s.byteLength+y&15),Ze$1(c,o.byteLength),i.update(c,0,c.byteLength),Ze$1(c,s.byteLength+e.byteLength),i.update(c,0,c.byteLength),i.finish(_,0);const u=n.subarray(1+y,n.length);if(!ke$1(_,u))throw _.fill(0),new Error("MAC could not be verified.");return Ae$1(e,p.subarray(0,e.length),h,2,a),ze$1(h.subarray(Ne$1,h.length),_,8),Ue$1(h),(0!=(r&Pe$1)||Me$1(h.subarray(0,Ne$1)))&&He$1(t),y},crypto_secretstream_xchacha20poly1305_STATEBYTES:Xe$1,crypto_secretstream_xchacha20poly1305_ABYTES:17,crypto_secretstream_xchacha20poly1305_HEADERBYTES:24,crypto_secretstream_xchacha20poly1305_KEYBYTES:Ke$1,crypto_secretstream_xchacha20poly1305_MESSAGEBYTES_MAX:Ce$1,crypto_secretstream_xchacha20poly1305_TAGBYTES:1,crypto_secretstream_xchacha20poly1305_TAG_MESSAGE:Re$1,crypto_secretstream_xchacha20poly1305_TAG_PUSH:Ie$1,crypto_secretstream_xchacha20poly1305_TAG_REKEY:Pe$1,crypto_secretstream_xchacha20poly1305_TAG_FINAL:De$1},qe$1={},Qe$1=F$5;if(1!==new Uint16Array([1])[0])throw new Error("Big endian architecture is not supported.");qe$1.crypto_shorthash_PRIMITIVE="siphash24",qe$1.crypto_shorthash_BYTES=Qe$1.BYTES,qe$1.crypto_shorthash_KEYBYTES=Qe$1.KEYBYTES,qe$1.crypto_shorthash_WASM_SUPPORTED=Qe$1.WASM_SUPPORTED,qe$1.crypto_shorthash_WASM_LOADED=Qe$1.WASM_LOADED,qe$1.crypto_shorthash=function(t,e,r,n){Qe$1(e,r,t,n);};const{crypto_verify_32:Je$1}=u$7.exports,{crypto_hash:$e$1}=B$5,{gf:tr,gf0:er,gf1:rr,D:nr,D2:or,X:ar,Y:hr,I:sr,A:cr,Z:_r,M:yr,S:ir,sel25519:pr,pack25519:ur,inv25519:fr,unpack25519:br}=P$6,{randombytes:lr}=y$a.exports,{crypto_scalarmult_BYTES:Er}=Q$4,{crypto_hash_sha512_BYTES:gr}=B$5,mr=r$l,Sr=64;var Yr={crypto_sign_keypair:wr,crypto_sign_seed_keypair:function(t,e,r){return Rr(r,32),e.set(r),wr(t,e,!0)},crypto_sign:kr,crypto_sign_detached:function(t,e,r){var n=new Uint8Array(e.length+Sr);kr(n,e,r);for(let e=0;e<Sr;e++)t[e]=n[e];},crypto_sign_open:Kr,crypto_sign_verify_detached:function(t,e,r){Rr(t,Sr);var n=new Uint8Array(e.length+Sr),o=0;for(o=0;o<Sr;o++)n[o]=t[o];for(o=0;o<e.length;o++)n[o+Sr]=e[o];return Kr(e,n,r)},crypto_sign_BYTES:Sr,crypto_sign_PUBLICKEYBYTES:32,crypto_sign_SECRETKEYBYTES:64,crypto_sign_SEEDBYTES:32,crypto_sign_ed25519_PUBLICKEYBYTES:32,crypto_sign_ed25519_SECRETKEYBYTES:64,crypto_sign_ed25519_SEEDBYTES:32,crypto_sign_ed25519_BYTES:64,crypto_sign_ed25519_pk_to_curve25519:function(t,e){Rr(t,32),Rr(e,32);var r=[tr(),tr(),tr(),tr()],n=tr([1]),o=tr([1]);mr(function(t){var e,r=[Uint8Array.from([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Uint8Array.from([1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Uint8Array.from([38,232,149,143,194,178,39,176,69,195,244,137,242,239,152,240,213,223,172,5,211,198,51,57,177,56,2,136,109,83,252,5]),Uint8Array.from([199,23,106,112,61,77,216,79,186,60,11,118,13,16,103,15,42,32,83,250,44,57,204,198,78,199,253,119,146,172,3,122]),Uint8Array.from([236,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,127]),Uint8Array.from([237,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,127]),Uint8Array.from([238,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,127])],n=new Uint8Array(7);Rr(r,7);for(let o=0;o<r.length;o++)for(e=0;e<31;e++)n[o]|=t[e]^r[o][e];for(let o=0;o<r.length;o++)n[o]|=127&t[e]^r[o][e];var o=0;for(let t=0;t<r.length;t++)o|=n[t]-1;return 0==(o>>8&1)}(e)&&Nr(r,e)&&function(t){var e=[tr(),tr(),tr(),tr()];!function(t,e){Lr(t,e,vr);}(e,t);var r=0;for(let t=0;t<16;t++)r|=65535&e[0][t];return 0===r}(r),"Cannot convert key: bad point");for(let e=0;e<r.length;e++)ur(t,r[e]);return _r(o,o,r[1]),cr(n,n,r[1]),fr(o,o),yr(n,n,o),ur(t,n),0},crypto_sign_ed25519_sk_to_curve25519:function(t,e){mr(t&&t.byteLength===Er,"curveSk must be 'crypto_sign_SECRETKEYBYTES' long"),mr(e&&64===e.byteLength,"edSk must be 'crypto_sign_ed25519_SECRETKEYBYTES' long");var r=new Uint8Array(gr);return $e$1(r,e,32),r[0]&=248,r[31]&=127,r[31]|=64,t.set(r.subarray(0,Er)),r.fill(0),t},crypto_sign_ed25519_sk_to_pk:function(t,e){return Rr(t,32),t.set(e.subarray(32)),t},unpackneg:Nr,pack:Ar};function Tr(t,e){for(let r=0;r<16;r++)t[r]=0|e[r];}function dr(t,e){var r=tr(),n=tr(),o=tr(),a=tr(),h=tr(),s=tr(),c=tr(),_=tr(),y=tr();_r(r,t[1],t[0]),_r(y,e[1],e[0]),yr(r,r,y),cr(n,t[0],t[1]),cr(y,e[0],e[1]),yr(n,n,y),yr(o,t[3],e[3]),yr(o,o,or),yr(a,t[2],e[2]),cr(a,a,a),_r(h,n,r),_r(s,a,o),cr(c,a,o),cr(_,n,r),yr(t[0],h,s),yr(t[1],_,c),yr(t[2],c,s),yr(t[3],h,_);}function Br(t,e,r){var n;for(n=0;n<4;n++)pr(t[n],e[n],r);}function Ar(t,e){var r=tr(),n=tr(),o=tr();fr(o,e[2]),yr(r,e[0],o),yr(n,e[1],o),ur(t,n),t[31]^=Cr(r)<<7;}function Lr(t,e,r){var n,o,a=[tr(e[0]),tr(e[1]),tr(e[2]),tr(e[3])];for(Tr(t[0],er),Tr(t[1],rr),Tr(t[2],rr),Tr(t[3],er),o=255;o>=0;--o)Br(t,a,n=r[o/8|0]>>(7&o)&1),dr(a,t),dr(t,t),Br(t,a,n);}function xr(t,e){var r=[tr(),tr(),tr(),tr()];Tr(r[0],ar),Tr(r[1],hr),Tr(r[2],rr),yr(r[3],ar,hr),Lr(t,r,e);}function wr(t,e,r){Rr(t,32),Rr(e,64);var n,o=new Uint8Array(64),a=[tr(),tr(),tr(),tr()];for(r||lr(e,32),$e$1(o,e,32),o[0]&=248,o[31]&=127,o[31]|=64,xr(a,o),Ar(t,a),n=0;n<32;n++)e[n+32]=t[n];}var vr=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function Ur(t,e){var r,n,o,a;for(n=63;n>=32;--n){for(r=0,o=n-32,a=n-12;o<a;++o)e[o]+=r-16*e[n]*vr[o-(n-32)],r=e[o]+128>>8,e[o]-=256*r;e[o]+=r,e[n]=0;}for(r=0,o=0;o<32;o++)e[o]+=r-(e[31]>>4)*vr[o],r=e[o]>>8,e[o]&=255;for(o=0;o<32;o++)e[o]-=r*vr[o];for(n=0;n<32;n++)e[n+1]+=e[n]>>8,t[n]=255&e[n];}function Mr(t){var e=new Float64Array(64);for(let r=0;r<64;r++)e[r]=t[r];for(let e=0;e<64;e++)t[e]=0;Ur(t,e);}function kr(t,e,r){Rr(t,Sr+e.length),Rr(e,0),Rr(r,64);var n,o,a=e.length,h=new Uint8Array(64),s=new Uint8Array(64),c=new Uint8Array(64),_=new Float64Array(64),y=[tr(),tr(),tr(),tr()];$e$1(h,r,32),h[0]&=248,h[31]&=127,h[31]|=64;var i=a+64;for(n=0;n<a;n++)t[64+n]=e[n];for(n=0;n<32;n++)t[32+n]=h[32+n];for($e$1(c,t.subarray(32),a+32),Mr(c),xr(y,c),Ar(t,y),n=32;n<64;n++)t[n]=r[n];for($e$1(s,t,a+64),Mr(s),n=0;n<64;n++)_[n]=0;for(n=0;n<32;n++)_[n]=c[n];for(n=0;n<32;n++)for(o=0;o<32;o++)_[n+o]+=s[n]*h[o];return Ur(t.subarray(32),_),i}function Nr(t,e){var r=tr(),n=tr(),o=tr(),a=tr(),h=tr(),s=tr(),c=tr();return Tr(t[2],rr),br(t[1],e),ir(o,t[1]),yr(a,o,nr),_r(o,o,t[2]),cr(a,t[2],a),ir(h,a),ir(s,h),yr(c,s,h),yr(r,c,o),yr(r,r,a),function(t,e){var r,n=tr();for(r=0;r<16;r++)n[r]=e[r];for(r=250;r>=0;r--)ir(n,n),1!==r&&yr(n,n,e);for(r=0;r<16;r++)t[r]=n[r];}(r,r),yr(r,r,o),yr(r,r,a),yr(r,r,a),yr(t[0],r,a),ir(n,t[0]),yr(n,n,a),Or(n,o)||yr(t[0],t[0],sr),ir(n,t[0]),yr(n,n,a),!!Or(n,o)&&(Cr(t[0])===e[31]>>7&&_r(t[0],tr(),t[0]),yr(t[3],t[0],t[1]),!0)}function Kr(t,e,r){Rr(t,e.length-Sr),Rr(e,Sr),Rr(r,32);var n,o=e.length,a=new Uint8Array(e.length),h=new Uint8Array(32),s=new Uint8Array(64),c=[tr(),tr(),tr(),tr()],_=[tr(),tr(),tr(),tr()];if(o<64)return !1;if(!Nr(_,r))return !1;for(n=0;n<o;n++)a[n]=e[n];for(n=0;n<32;n++)a[n+32]=r[n];if($e$1(s,a,o),Mr(s),Lr(c,_,s),xr(_,e.subarray(32)),dr(c,_),Ar(h,c),o-=64,!Je$1(e,0,h,0)){for(n=0;n<o;n++)a[n]=0;return !1}for(n=0;n<o;n++)t[n]=e[n+64];return !0}function Cr(t){var e=new Uint8Array(32);return ur(e,t),1&e[0]}function Or(t,e){var r=new Uint8Array(32),n=new Uint8Array(32);return ur(r,t),ur(n,e),Je$1(r,0,n,0)}function Rr(t,e,r="Argument"){if(!t||e&&t.length<e)throw new Error(r+" must be a buffer"+(e?" of length "+e:""))}!function(t){function e(e){Object.keys(e).forEach((function(r){t.exports[r]=e[r];}));}e(y$a.exports),e(p$a),e(l$9),e(u$7.exports),e(S$6),e(Gt$1),e(tt$4.exports),e(B$5),e(jt$1),e(qt$1.exports),e(ee$1),e(fe$1),e(st$4),e(Q$4),e(St$1),e(je$1),e(qe$1),e(Yr),e(et$4),e(re$1);}(_$8);var Ir=_$8.exports;

var m$5=Ir;

const s$9=m$5,a$8=L$6;var t$7={hash:function(r){const e=a$8.allocUnsafe(32);return s$9.crypto_generichash(e,r),e},createKeyPair:function(r){const e=a$8.alloc(32),t=a$8.alloc(64);return r?s$9.crypto_sign_seed_keypair(e,t,r):s$9.crypto_sign_keypair(e,t),{publicKey:e,secretKey:t}}};const{hash:o$e,createKeyPair:n$a}=t$7;var c$b=class c{constructor(){throw new Error("hyperdht is not supported in browsers")}static keyPair(r){return n$a(r)}static hash(r){return o$e(r)}};c$b.hash;c$b.keyPair;

var t$6={},r$a={};const n$9=r$a.LE=255===new Uint8Array(new Uint16Array([255]).buffer)[0];r$a.BE=!n$9;var o$d={exports:{}};!function(t,n){const o=L$6,{BE:d}=r$a;n=t.exports={preencode(e,t){e.end+=t.byteLength;},encode(e,t){e.buffer.set(t,e.start),e.start+=t.byteLength;},decode(e){const t=e.buffer.subarray(e.start,e.end);return e.start=e.end,t}};const f=n.buffer={preencode(e,t){t?s.preencode(e,t):e.end++;},encode(e,t){t?s.encode(e,t):e.buffer[e.start++]=0;},decode(e){const t=e.buffer.subarray(e.start);return 0===t.byteLength?null:(e.start=e.end,t)}};function a(e,t){const r=e.BYTES_PER_ELEMENT;return {preencode(e,t){e.end+=t.byteLength;},encode(e,r){const n=new Uint8Array(r.buffer,r.byteOffset,r.byteLength);d&&t&&t(n),e.buffer.set(n,e.start),e.start+=r.byteLength;},decode(n){let o=n.buffer.subarray(n.start);return o.byteOffset%r!=0&&(o=new Uint8Array(o)),d&&t&&t(o),n.start=n.end,new e(o.buffer,o.byteOffset,o.byteLength/r)}}}n.binary={...f,preencode(e,t){"string"==typeof t?u.preencode(e,t):f.preencode(e,t);},encode(e,t){"string"==typeof t?u.encode(e,t):f.encode(e,t);}};const s=n.uint8array=a(Uint8Array);function c(e){return {preencode(t,r){t.end+=o.byteLength(r,e);},encode(t,r){t.start+=o.write(t.buffer,r,t.start,e);},decode(t){const r=o.toString(t.buffer,e,t.start);return t.start=t.end,r}}}n.uint16array=a(Uint16Array,o.swap16),n.uint32array=a(Uint32Array,o.swap32),n.int8array=a(Int8Array),n.int16array=a(Int16Array,o.swap16),n.int32array=a(Int32Array,o.swap32),n.float32array=a(Float32Array,o.swap32),n.float64array=a(Float64Array,o.swap64);const u=n.string=n.utf8=c("utf-8");n.ascii=c("ascii"),n.hex=c("hex"),n.base64=c("base64"),n.ucs2=n.utf16le=c("utf16le"),n.array=function(e){return {preencode(t,r){for(const n of r)e.preencode(t,n);},encode(t,r){for(const n of r)e.encode(t,n);},decode(t){const r=[];for(;t.start<t.end;)r.push(e.decode(t));return r}}},n.json={preencode(e,t){u.preencode(e,JSON.stringify(t));},encode(e,t){u.encode(e,JSON.stringify(t));},decode:e=>JSON.parse(u.decode(e))},n.ndjson={preencode(e,t){u.preencode(e,JSON.stringify(t)+"\n");},encode(e,t){u.encode(e,JSON.stringify(t)+"\n");},decode:e=>JSON.parse(u.decode(e))};}(o$d,o$d.exports);var d$6={preencode:function e(t,r){if(r<251)t.end++;else if(r<256)t.end+=2;else if(r<65536)t.end+=3;else if(r<16777216)t.end+=4;else if(r<4294967296)t.end+=5;else {t.end++;e(t,Math.floor(Math.log(r)/Math.log(2))-32),t.end+=6;}},encode:function e(t,r){const n=r-251;if(r<251)t.buffer[t.start++]=r;else if(r<256)t.buffer[t.start++]=251,t.buffer[t.start++]=n;else if(r<65536)t.buffer[t.start++]=252,t.buffer[t.start++]=n>>8&255,t.buffer[t.start++]=255&n;else if(r<16777216)t.buffer[t.start++]=253,t.buffer[t.start++]=n>>16,t.buffer[t.start++]=n>>8&255,t.buffer[t.start++]=255&n;else if(r<4294967296)t.buffer[t.start++]=254,t.buffer[t.start++]=n>>24,t.buffer[t.start++]=n>>16&255,t.buffer[t.start++]=n>>8&255,t.buffer[t.start++]=255&n;else {const r=Math.floor(Math.log(n)/Math.log(2))-32;t.buffer[t.start++]=255,e(t,r);const o=n/Math.pow(2,r-11);for(let e=5;e>=0;e--)t.buffer[t.start++]=o/Math.pow(2,8*e)&255;}},decode:function e(t){const r=251;if(t.end-t.start<1)throw new Error("Out of bounds");const n=t.buffer[t.start++];if(n<r)return n;if(t.end-t.start<n-r+1)throw new Error("Out of bounds.");if(n<252)return t.buffer[t.start++]+r;if(n<253)return (t.buffer[t.start++]<<8)+t.buffer[t.start++]+r;if(n<254)return (t.buffer[t.start++]<<16)+(t.buffer[t.start++]<<8)+t.buffer[t.start++]+r;if(n<255)return 16777216*t.buffer[t.start++]+(t.buffer[t.start++]<<16)+(t.buffer[t.start++]<<8)+t.buffer[t.start++]+r;const o=e(t);if(t.end-t.start<6)throw new Error("Out of bounds");let d=0;for(let e=5;e>=0;e--)d+=t.buffer[t.start++]*Math.pow(2,8*e);return d*Math.pow(2,o-11)+r}};!function(t){const n=L$6,{BE:f}=r$a;t.state=function(e=0,t=0,r=null){return {start:e,end:t,buffer:r,cache:null}};const a=t.raw=o$d.exports,s=t.uint={preencode(e,t){e.end+=t<=252?1:t<=65535?3:t<=4294967295?5:9;},encode(e,t){t<=252?c.encode(e,t):t<=65535?(e.buffer[e.start++]=253,u.encode(e,t)):t<=4294967295?(e.buffer[e.start++]=254,b.encode(e,t)):(e.buffer[e.start++]=255,w.encode(e,t));},decode(e){const t=c.decode(e);return t<=252?t:253===t?u.decode(e):254===t?b.decode(e):w.decode(e)}},c=t.uint8={preencode(e,t){e.end+=1;},encode(e,t){e.buffer[e.start++]=t;},decode(e){if(e.start>=e.end)throw new Error("Out of bounds");return e.buffer[e.start++]}},u=t.uint16={preencode(e,t){e.end+=2;},encode(e,t){e.buffer[e.start++]=t,e.buffer[e.start++]=t>>>8;},decode(e){if(e.end-e.start<2)throw new Error("Out of bounds");return e.buffer[e.start++]+256*e.buffer[e.start++]}},i=t.uint24={preencode(e,t){e.end+=3;},encode(e,t){e.buffer[e.start++]=t,e.buffer[e.start++]=t>>>8,e.buffer[e.start++]=t>>>16;},decode(e){if(e.end-e.start<3)throw new Error("Out of bounds");return e.buffer[e.start++]+256*e.buffer[e.start++]+65536*e.buffer[e.start++]}},b=t.uint32={preencode(e,t){e.end+=4;},encode(e,t){e.buffer[e.start++]=t,e.buffer[e.start++]=t>>>8,e.buffer[e.start++]=t>>>16,e.buffer[e.start++]=t>>>24;},decode(e){if(e.end-e.start<4)throw new Error("Out of bounds");return e.buffer[e.start++]+256*e.buffer[e.start++]+65536*e.buffer[e.start++]+16777216*e.buffer[e.start++]}},y=t.uint40={preencode(e,t){e.end+=5;},encode(e,t){const r=Math.floor(t/256);c.encode(e,t),b.encode(e,r);},decode(e){if(e.end-e.start<5)throw new Error("Out of bounds");return c.decode(e)+256*b.decode(e)}},p=t.uint48={preencode(e,t){e.end+=6;},encode(e,t){const r=Math.floor(t/65536);u.encode(e,t),b.encode(e,r);},decode(e){if(e.end-e.start<6)throw new Error("Out of bounds");return u.decode(e)+65536*b.decode(e)}},l=t.uint56={preencode(e,t){e.end+=7;},encode(e,t){const r=Math.floor(t/16777216);i.encode(e,t),b.encode(e,r);},decode(e){if(e.end-e.start<7)throw new Error("Out of bounds");return i.decode(e)+16777216*b.decode(e)}},w=t.uint64={preencode(e,t){e.end+=8;},encode(e,t){const r=Math.floor(t/4294967296);b.encode(e,t),b.encode(e,r);},decode(e){if(e.end-e.start<8)throw new Error("Out of bounds");return b.decode(e)+4294967296*b.decode(e)}};t.int=U(s),t.int8=U(c),t.int16=U(u),t.int24=U(i),t.int32=U(b),t.int40=U(y),t.int48=U(p),t.int56=U(l),t.int64=U(w),t.lexint=d$6,t.float32={preencode(e,t){e.end+=4;},encode(e,t){new DataView(e.buffer.buffer,e.start+e.buffer.byteOffset,4).setFloat32(0,t,!0),e.start+=4;},decode(e){if(e.end-e.start<4)throw new Error("Out of bounds");const t=new DataView(e.buffer.buffer,e.start+e.buffer.byteOffset,4).getFloat32(0,!0);return e.start+=4,t}},t.float64={preencode(e,t){e.end+=8;},encode(e,t){new DataView(e.buffer.buffer,e.start+e.buffer.byteOffset,8).setFloat64(0,t,!0),e.start+=8;},decode(e){if(e.end-e.start<8)throw new Error("Out of bounds");const t=new DataView(e.buffer.buffer,e.start+e.buffer.byteOffset,8).getFloat64(0,!0);return e.start+=8,t}};const h=t.buffer={preencode(e,t){t?O.preencode(e,t):e.end++;},encode(e,t){t?O.encode(e,t):e.buffer[e.start++]=0;},decode(e){const t=s.decode(e);if(0===t)return null;if(e.end-e.start<t)throw new Error("Out of bounds");return e.buffer.subarray(e.start,e.start+=t)}};function g(e,t){const r=e.BYTES_PER_ELEMENT;return {preencode(e,t){s.preencode(e,t.length),e.end+=t.byteLength;},encode(e,r){s.encode(e,r.length);const n=new Uint8Array(r.buffer,r.byteOffset,r.byteLength);f&&t&&t(n),e.buffer.set(n,e.start),e.start+=r.byteLength;},decode(n){const o=s.decode(n);let d=n.buffer.subarray(n.start,n.start+=o*r);if(d.byteLength!==o*r)throw new Error("Out of bounds");return d.byteOffset%r!=0&&(d=new Uint8Array(d)),f&&t&&t(d),new e(d.buffer,d.byteOffset,d.byteLength/r)}}}t.binary={...h,preencode(e,t){"string"==typeof t?A.preencode(e,t):h.preencode(e,t);},encode(e,t){"string"==typeof t?A.encode(e,t):h.encode(e,t);}};const O=t.uint8array=g(Uint8Array);function E(e){return {preencode(t,r){const o=n.byteLength(r,e);s.preencode(t,o),t.end+=o;},encode(t,r){const o=n.byteLength(r,e);s.encode(t,o),n.write(t.buffer,r,t.start,e),t.start+=o;},decode(t){const r=s.decode(t);if(t.end-t.start<r)throw new Error("Out of bounds");return n.toString(t.buffer,e,t.start,t.start+=r)},fixed:t=>({preencode(e){e.end+=t;},encode(r,o){n.write(r.buffer,o,r.start,t,e),r.start+=t;},decode(r){if(r.end-r.start<t)throw new Error("Out of bounds");return n.toString(r.buffer,e,r.start,r.start+=t)}})}}t.uint16array=g(Uint16Array,n.swap16),t.uint32array=g(Uint32Array,n.swap32),t.int8array=g(Int8Array),t.int16array=g(Int16Array,n.swap16),t.int32array=g(Int32Array,n.swap32),t.float32array=g(Float32Array,n.swap32),t.float64array=g(Float64Array,n.swap64);const A=t.string=t.utf8=E("utf-8");t.ascii=E("ascii"),t.hex=E("hex"),t.base64=E("base64"),t.ucs2=t.utf16le=E("utf16le"),t.bool={preencode(e,t){e.end++;},encode(e,t){e.buffer[e.start++]=t?1:0;},decode(e){if(e.start>=e.end)throw Error("Out of bounds");return 1===e.buffer[e.start++]}};const x=t.fixed=function(e){return {preencode(t,r){t.end+=e;},encode(t,r){t.buffer.set(r,t.start),t.start+=e;},decode(t){if(t.end-t.start<e)throw new Error("Out of bounds");return t.buffer.subarray(t.start,t.start+=e)}}};t.fixed32=x(32),t.fixed64=x(64),t.array=function(e){return {preencode(t,r){s.preencode(t,r.length);for(let n=0;n<r.length;n++)e.preencode(t,r[n]);},encode(t,r){s.encode(t,r.length);for(let n=0;n<r.length;n++)e.encode(t,r[n]);},decode(t){const r=s.decode(t);if(r>1048576)throw new Error("Array is too big");const n=new Array(r);for(let o=0;o<r;o++)n[o]=e.decode(t);return n}}},t.frame=function(e){const r=t.state();return {preencode(t,r){const n=t.end;e.preencode(t,r),s.preencode(t,t.end-n);},encode(t,n){r.end=0,e.preencode(r,n),s.encode(t,r.end),e.encode(t,n);},decode(t){const r=t.end,n=s.decode(t);t.end=t.start+n;const o=e.decode(t);return t.start=t.end,t.end=r,o}}},t.json={preencode(e,t){A.preencode(e,JSON.stringify(t));},encode(e,t){A.encode(e,JSON.stringify(t));},decode:e=>JSON.parse(A.decode(e))},t.ndjson={preencode(e,t){A.preencode(e,JSON.stringify(t)+"\n");},encode(e,t){A.encode(e,JSON.stringify(t)+"\n");},decode:e=>JSON.parse(A.decode(e))},t.none={preencode(e,t){},encode(e,t){},decode:e=>null};const L={preencode(e,t){s.preencode(e,t.length);for(let r=0;r<t.length;r++)j.preencode(e,t[r]);},encode(e,t){s.encode(e,t.length);for(let r=0;r<t.length;r++)j.encode(e,t[r]);},decode(e){const t=[];let r=s.decode(e);for(;r-- >0;)t.push(j.decode(e));return t}},S={preencode(e,t){const r=Object.keys(t);s.preencode(e,r.length);for(const n of r)A.preencode(e,n),j.preencode(e,t[n]);},encode(e,t){const r=Object.keys(t);s.encode(e,r.length);for(const n of r)A.encode(e,n),j.encode(e,t[n]);},decode(e){let t=s.decode(e);const r={};for(;t-- >0;)r[A.decode(e)]=j.decode(e);return r}},M=[t.none,t.bool,t.string,t.buffer,t.uint,t.int,t.float64,L,S],j=t.any={preencode(e,t){const r=N(t);s.preencode(e,r),M[r].preencode(e,t);},encode(e,t){const r=N(t);s.encode(e,r),M[r].encode(e,t);},decode(e){const t=s.decode(e);if(t>=M.length)throw new Error("Unknown type: "+t);return M[t].decode(e)}};function N(e){if(null==e)return 0;if("boolean"==typeof e)return 1;if("string"==typeof e)return 2;if(n.isBuffer(e))return 3;if("number"==typeof e)return Number.isInteger(e)?e>=0?4:5:6;if(Array.isArray(e))return 7;if("object"==typeof e)return 8;throw new Error("Unsupported type for "+e)}function U(e){return {preencode(t,r){e.preencode(t,m(r));},encode(t,r){e.encode(t,m(r));},decode(t){return 0===(r=e.decode(t))?r:0==(1&r)?r/2:-(r+1)/2;var r;}}}function m(e){return e<0?2*-e-1:0===e?0:2*e}t.from=function(e){return "string"==typeof e?function(e){switch(e){case"ascii":return a.ascii;case"utf-8":case"utf8":return a.utf8;case"hex":return a.hex;case"base64":return a.base64;case"utf16-le":case"utf16le":case"ucs-2":case"ucs2":return a.ucs2;case"ndjson":return a.ndjson;case"json":return a.json;default:return a.binary}}(e):e.preencode?e:e.encodingLength?function(e){return {preencode(t,r){t.end+=e.encodingLength(r);},encode(t,r){e.encode(r,t.buffer,t.start),t.start+=e.encode.bytes;},decode(t){const r=e.decode(t.buffer,t.start,t.end);return t.start+=e.decode.bytes,r}}}(e):function(e){let t=null,r=null;return {preencode(n,o){t=o,r=e.encode(o),n.end+=r.byteLength;},encode(n,o){a.encode(n,o===t?r:e.encode(o)),t=r=null;},decode:t=>e.decode(a.decode(t))}}(e)},t.encode=function(e,r){const o=t.state();return e.preencode(o,r),o.buffer=n.allocUnsafe(o.end),e.encode(o,r),o.buffer},t.decode=function(e,r){return e.decode(t.state(0,r.byteLength,r))};}(t$6);t$6.array;t$6.ascii;t$6.base64;t$6.binary;t$6.bool;t$6.decode;t$6.encode;t$6.fixed32;t$6.fixed64;t$6.float32;t$6.float32array;t$6.float64;t$6.float64array;t$6.frame;t$6.from;t$6.hex;t$6.int;t$6.int16;t$6.int16array;t$6.int24;t$6.int32;t$6.int32array;t$6.int40;t$6.int48;t$6.int56;t$6.int64;t$6.int8;t$6.int8array;t$6.json;t$6.lexint;t$6.ndjson;t$6.none;t$6.state;t$6.ucs2;t$6.uint16array;t$6.uint32array;t$6.utf16le;

var e$1="function"==typeof queueMicrotask?queueMicrotask:e=>Promise.resolve().then(e);

var r$9=function(r){if(function(r){return !!r&&(r instanceof TypeError||r instanceof SyntaxError||r instanceof ReferenceError||r instanceof EvalError||r instanceof RangeError||r instanceof URIError||"ERR_ASSERTION"===r.code)}(r))throw function(r){queueMicrotask((()=>{throw r}));}(r),r};

const i$a=L$6,o$c=t$6,h$6=e$1,r$8=r$9;let a$7 = class a{constructor(t,e,s,n,i,o,h,r,a,d,c,l){this.userData=s,this.protocol=n,this.aliases=i,this.id=o,this.handshake=null,this.messages=[],this.opened=!1,this.closed=!1,this.destroyed=!1,this.onopen=a,this.onclose=d,this.ondestroy=c,this.ondrain=l,this._handshake=h,this._mux=t,this._info=e,this._localId=0,this._remoteId=0,this._active=0,this._extensions=null,this._decBound=this._dec.bind(this),this._decAndDestroyBound=this._decAndDestroy.bind(this);for(const t of r)this.addMessage(t);}get drained(){return this._mux.drained}open(t){const e=this._mux._free.length>0?this._mux._free.pop():this._mux._local.push(null)-1;this._info.opened++,this._localId=e+1,this._mux._local[e]=this,0===this._remoteId&&this._info.outgoing.push(this._localId);const s={buffer:null,start:2,end:2};o$c.uint.preencode(s,this._localId),o$c.string.preencode(s,this.protocol),o$c.buffer.preencode(s,this.id),this._handshake&&this._handshake.preencode(s,t),s.buffer=this._mux._alloc(s.end),s.buffer[0]=0,s.buffer[1]=1,o$c.uint.encode(s,this._localId),o$c.string.encode(s,this.protocol),o$c.buffer.encode(s,this.id),this._handshake&&this._handshake.encode(s,t),this._mux._write0(s.buffer);}_dec(){0==--this._active&&!0===this.closed&&this._destroy();}_decAndDestroy(t){this._dec(),this._mux._safeDestroy(t);}_fullyOpenSoon(){this._mux._remote[this._remoteId-1].session=this,h$6(this._fullyOpen.bind(this));}_fullyOpen(){if(!0===this.opened||!0===this.closed)return;const t=this._mux._remote[this._remoteId-1];this.opened=!0,this.handshake=this._handshake?this._handshake.decode(t.state):null,this._track(this.onopen(this.handshake,this)),t.session=this,t.state=null,null!==t.pending&&this._drain(t);}_drain(t){for(let e=0;e<t.pending.length;e++){const s=t.pending[e];this._mux._buffered-=u$6(s.state),this._recv(s.type,s.state);}t.pending=null,this._mux._resumeMaybe();}_track(t){!0===function(t){return !(!t||"function"!=typeof t.then)}(t)&&(this._active++,t.then(this._decBound,this._decAndDestroyBound));}_close(t){!0!==this.closed&&(this.closed=!0,this._info.opened--,this._remoteId>0&&(this._mux._remote[this._remoteId-1]=null,this._remoteId=0,this._mux._free.push(this._localId-1)),this._mux._local[this._localId-1]=null,this._localId=0,this._mux._gc(this._info),this._track(this.onclose(t,this)),0===this._active&&this._destroy());}_destroy(){!0!==this.destroyed&&(this.destroyed=!0,this._track(this.ondestroy(this)));}_recv(t,e){t<this.messages.length&&this.messages[t].recv(e,this);}cork(){this._mux.cork();}uncork(){this._mux.uncork();}close(){if(!0===this.closed)return;const t={buffer:null,start:2,end:2};o$c.uint.preencode(t,this._localId),t.buffer=this._mux._alloc(t.end),t.buffer[0]=0,t.buffer[1]=3,o$c.uint.encode(t,this._localId),this._close(!1),this._mux._write0(t.buffer);}addMessage(t){if(!t)return this._skipMessage();const e=this.messages.length,s=t.encoding||o$c.raw,n=t.onmessage||c$a,i=this,h=function(t,e){const s={buffer:null,start:0,end:0};return t.preencode(s,e),s.end}(o$c.uint,e),r={type:e,encoding:s,onmessage:n,recv(t,e){e._track(r.onmessage(s.decode(t),e));},send(t,n=i){if(!0===n.closed)return !1;const r=n._mux,a={buffer:null,start:0,end:h};return null!==r._batch?(s.preencode(a,t),a.buffer=r._alloc(a.end),o$c.uint.encode(a,e),s.encode(a,t),r._pushBatch(n._localId,a.buffer),!0):(o$c.uint.preencode(a,n._localId),s.preencode(a,t),a.buffer=r._alloc(a.end),o$c.uint.encode(a,n._localId),o$c.uint.encode(a,e),s.encode(a,t),r.drained=r.stream.write(a.buffer),r.drained)}};return this.messages.push(r),r}_skipMessage(){const t={type:this.messages.length,encoding:o$c.raw,onmessage:c$a,recv(t,e){},send(t,e){}};return this.messages.push(t),t}};var d$5=class d{constructor(t,{alloc:e}={}){null===t.userData&&(t.userData=this),this.isProtomux=!0,this.stream=t,this.corked=0,this.drained=!0,this._alloc=e||("function"==typeof t.alloc?t.alloc.bind(t):i$a.allocUnsafe),this._safeDestroyBound=this._safeDestroy.bind(this),this._remoteBacklog=0,this._buffered=0,this._paused=!1,this._remote=[],this._local=[],this._free=[],this._batch=null,this._batchState=null,this._infos=new Map,this._notify=new Map,this.stream.on("data",this._ondata.bind(this)),this.stream.on("drain",this._ondrain.bind(this)),this.stream.on("end",this._onend.bind(this)),this.stream.on("error",c$a),this.stream.on("close",this._shutdown.bind(this));}static from(t,e){return t.userData&&t.userData.isProtomux?t.userData:t.isProtomux?t:new this(t,e)}static isProtomux(t){return "object"==typeof t&&!0===t.isProtomux}*[Symbol.iterator](){for(const t of this._local)null!==t&&(yield t);}cork(){1==++this.corked&&(this._batch=[],this._batchState={buffer:null,start:0,end:1});}uncork(){0==--this.corked&&(this._sendBatch(this._batch,this._batchState),this._batch=null,this._batchState=null);}pair({protocol:t,id:e=null},s){this._notify.set(l$8(t,e),s);}unpair({protocol:t,id:e=null}){this._notify.delete(l$8(t,e));}opened({protocol:t,id:e=null}){const s=l$8(t,e),n=this._infos.get(s);return !!n&&n.opened>0}createChannel({userData:t=null,protocol:e,aliases:s=[],id:n=null,unique:i=!0,handshake:o=null,messages:h=[],onopen:r=c$a,onclose:d=c$a,ondestroy:l=c$a,ondrain:u=c$a}){if(this.stream.destroyed)return null;const _=this._get(e,n,s);if(i&&_.opened>0)return null;if(0===_.incoming.length)return new a$7(this,_,t,e,s,n,o,h,r,d,l,u);this._remoteBacklog--;const f=_.incoming.shift();if(null===this._remote[f-1])return null;const m=new a$7(this,_,t,e,s,n,o,h,r,d,l,u);return m._remoteId=f,m._fullyOpenSoon(),m}_pushBatch(t,e){this._batchState.end>=8388608&&(this._sendBatch(this._batch,this._batchState),this._batch=[],this._batchState={buffer:null,start:0,end:1}),0!==this._batch.length&&this._batch[this._batch.length-1].localId===t||(this._batchState.end++,o$c.uint.preencode(this._batchState,t)),o$c.buffer.preencode(this._batchState,e),this._batch.push({localId:t,buffer:e});}_sendBatch(t,e){if(0===t.length)return;let s=t[0].localId;e.buffer=this._alloc(e.end),e.buffer[e.start++]=0,e.buffer[e.start++]=0,o$c.uint.encode(e,s);for(let n=0;n<t.length;n++){const i=t[n];s!==i.localId&&(e.buffer[e.start++]=0,o$c.uint.encode(e,s=i.localId)),o$c.buffer.encode(e,i.buffer);}this.drained=this.stream.write(e.buffer);}_get(t,e,s=[]){const n=l$8(t,e);let i=this._infos.get(n);if(i)return i;i={key:n,protocol:t,aliases:[],id:e,pairing:0,opened:0,incoming:[],outgoing:[]},this._infos.set(n,i);for(const t of s){const s=l$8(t,e);i.aliases.push(s),this._infos.set(s,i);}return i}_gc(t){if(0===t.opened&&0===t.outgoing.length&&0===t.incoming.length){this._infos.delete(t.key);for(const e of t.aliases)this._infos.delete(e);}}_ondata(t){if(0!==t.byteLength)try{const e={buffer:t,start:0,end:t.byteLength};this._decode(o$c.uint.decode(e),e);}catch(t){this._safeDestroy(t);}}_ondrain(){this.drained=!0;for(const t of this._local)null!==t&&t._track(t.ondrain(t));}_onend(){this.stream.end();}_decode(t,e){const s=o$c.uint.decode(e);if(0===t)return void this._oncontrolsession(s,e);const n=t<=this._remote.length?this._remote[t-1]:null;null!==n&&(null===n.pending?n.session._recv(s,e):this._bufferMessage(n,s,e));}_oncontrolsession(t,e){switch(t){case 0:this._onbatch(e);break;case 1:this._onopensession(e);break;case 2:this._onrejectsession(e);break;case 3:this._onclosesession(e);}}_bufferMessage(t,e,{buffer:s,start:n,end:i}){const o={buffer:s,start:n,end:i};t.pending.push({type:e,state:o}),this._buffered+=u$6(o),this._pauseMaybe();}_pauseMaybe(){!0===this._paused||this._buffered<=32768||(this._paused=!0,this.stream.pause());}_resumeMaybe(){!1===this._paused||this._buffered>32768||(this._paused=!1,this.stream.resume());}_onbatch(t){const e=t.end;let s=o$c.uint.decode(t);for(;t.end>t.start;){const n=o$c.uint.decode(t);0!==n?(t.end=t.start+n,this._decode(s,t),t.start=t.end,t.end=e):s=o$c.uint.decode(t);}}_onopensession(t){const e=o$c.uint.decode(t),s=o$c.string.decode(t),n=o$c.buffer.decode(t);if(0===e)return void this._rejectSession(0);const i=e-1,h=this._get(s,n);if(this._remote.length===i&&this._remote.push(null),i>=this._remote.length||null!==this._remote[i])throw new Error("Invalid open message");if(h.outgoing.length>0){const s=h.outgoing.shift(),n=this._local[s-1];return null===n?void this._free.push(s-1):(this._remote[i]={state:t,pending:null,session:null},n._remoteId=e,void n._fullyOpen())}const r={buffer:t.buffer,start:t.start,end:t.end};if(this._remote[i]={state:r,pending:[],session:null},++this._remoteBacklog>1/0)throw new Error("Remote exceeded backlog");h.pairing++,h.incoming.push(e),this._requestSession(s,n,h).catch(this._safeDestroyBound);}_onrejectsession(t){const e=o$c.uint.decode(t);for(const t of this._infos.values()){const s=t.outgoing.indexOf(e);if(-1===s)continue;t.outgoing.splice(s,1);const n=this._local[e-1];return this._free.push(e-1),null!==n&&n._close(!0),void this._gc(t)}throw new Error("Invalid reject message")}_onclosesession(t){const e=o$c.uint.decode(t);if(0===e)return;const s=e-1,n=s<this._remote.length?this._remote[s]:null;null!==n&&null!==n.session&&n.session._close(!0);}async _requestSession(t,e,s){const n=this._notify.get(l$8(t,e))||this._notify.get(l$8(t,null));if(n&&await n(e),!(--s.pairing>0)){for(;s.incoming.length>0;)this._rejectSession(s,s.incoming.shift());this._gc(s);}}_rejectSession(t,e){if(e>0){const t=this._remote[e-1];if(null!==t.pending)for(let e=0;e<t.pending.length;e++)this._buffered-=u$6(t.pending[e].state);this._remote[e-1]=null,this._resumeMaybe();}const s={buffer:null,start:2,end:2};o$c.uint.preencode(s,e),s.buffer=this._alloc(s.end),s.buffer[0]=0,s.buffer[1]=2,o$c.uint.encode(s,e),this._write0(s.buffer);}_write0(t){null===this._batch?this.drained=this.stream.write(t):this._pushBatch(0,t.subarray(1));}destroy(t){this.stream.destroy(t);}_safeDestroy(t){r$8(t),this.stream.destroy(t);}_shutdown(){for(const t of this._local)null!==t&&t._close(!0);}};function c$a(){}function l$8(t,e){return t+"##"+(e?i$a.toString(e,"hex"):"")}function u$6(t){return t.end-t.start+512}

const t$5=t$6,r$7=t$5.uint16,o$b=(e,t)=>({preencode(t,o){e.preencode(t,o.host),r$7.preencode(t,o.port);},encode(t,o){e.encode(t,o.host),r$7.encode(t,o.port);},decode:o=>({host:e.decode(o),family:t,port:r$7.decode(o)})}),d$4={preencode(e){e.end+=4;},encode(e,t){const r=e.start+4;let o=0;for(;o<t.length;){let r,d=0;for(;o<t.length&&46!==(r=t.charCodeAt(o++));)d=10*d+(r-48);e.buffer[e.start++]=d;}e.start=r;},decode(e){if(e.end-e.start<4)throw new Error("Out of bounds");return e.buffer[e.start++]+"."+e.buffer[e.start++]+"."+e.buffer[e.start++]+"."+e.buffer[e.start++]}},s$8=o$b(d$4,4),n$8={preencode(e){e.end+=16;},encode(e,t){const r=e.start+16;let o=0,d=null;for(;o<t.length;){let r,s=0;for(;o<t.length&&58!==(r=t.charCodeAt(o++));)r>=48&&r<=57?s=16*s+(r-48):r>=65&&r<=70?s=16*s+(r-65+10):r>=97&&r<=102&&(s=16*s+(r-97+10));e.buffer[e.start++]=s>>>8,e.buffer[e.start++]=s,o<t.length&&58===t.charCodeAt(o)&&(o++,d=e.start);}if(null!==d){const t=r-e.start;e.buffer.copyWithin(d+t,d).fill(0,d,d+t);}e.start=r;},decode(e){if(e.end-e.start<16)throw new Error("Out of bounds");return (256*e.buffer[e.start++]+e.buffer[e.start++]).toString(16)+":"+(256*e.buffer[e.start++]+e.buffer[e.start++]).toString(16)+":"+(256*e.buffer[e.start++]+e.buffer[e.start++]).toString(16)+":"+(256*e.buffer[e.start++]+e.buffer[e.start++]).toString(16)+":"+(256*e.buffer[e.start++]+e.buffer[e.start++]).toString(16)+":"+(256*e.buffer[e.start++]+e.buffer[e.start++]).toString(16)+":"+(256*e.buffer[e.start++]+e.buffer[e.start++]).toString(16)+":"+(256*e.buffer[e.start++]+e.buffer[e.start++]).toString(16)}},f$7=o$b(n$8,6),c$9={preencode(e,r){const o=r.includes(":")?6:4;t$5.uint8.preencode(e,o),4===o?d$4.preencode(e):n$8.preencode(e);},encode(e,r){const o=r.includes(":")?6:4;t$5.uint8.encode(e,o),4===o?d$4.encode(e,r):n$8.encode(e,r);},decode:e=>4===t$5.uint8.decode(e)?d$4.decode(e):n$8.decode(e)},a$6={preencode(e,t){c$9.preencode(e,t.host),r$7.preencode(e,t.port);},encode(e,t){c$9.encode(e,t.host),r$7.encode(e,t.port);},decode(e){const o=t$5.uint8.decode(e);return {host:4===o?d$4.decode(e):n$8.decode(e),family:o,port:r$7.decode(e)}}};var p$9={port:r$7,ipv4:d$4,ipv4Address:s$8,ipv6:n$8,ipv6Address:f$7,ip:c$9,ipAddress:a$6};

const s$7=m$5,a$5=L$6,r$6=s$7.crypto_secretstream_xchacha20poly1305_ABYTES,c$8=s$7.crypto_secretstream_xchacha20poly1305_TAG_MESSAGE,o$a=s$7.crypto_secretstream_xchacha20poly1305_TAG_FINAL,h$5=s$7.crypto_secretstream_xchacha20poly1305_STATEBYTES,l$7=s$7.crypto_secretstream_xchacha20poly1305_HEADERBYTES,p$8=s$7.crypto_secretstream_xchacha20poly1305_KEYBYTES,_$7=a$5.isBuffer(o$a)?o$a[0]:o$a,n$7=a$5.alloc(0),i$9=a$5.alloc(1);var y$9={keygen:function(t=a$5.alloc(p$8)){return s$7.crypto_secretstream_xchacha20poly1305_keygen(t),t},KEYBYTES:p$8,ABYTES:r$6,STATEBYTES:h$5,HEADERBYTES:l$7,Push:class{constructor(t,e=a$5.allocUnsafe(h$5),r=a$5.allocUnsafe(l$7)){if(!o$a)throw new Error("JavaScript sodium version needs to support crypto_secretstream_xchacha20poly");this.key=t,this.state=e,this.header=r,s$7.crypto_secretstream_xchacha20poly1305_init_push(this.state,this.header,this.key);}next(t,e=a$5.allocUnsafe(t.byteLength+r$6)){return s$7.crypto_secretstream_xchacha20poly1305_push(this.state,e,t,null,c$8),e}final(t=n$7,e=a$5.allocUnsafe(r$6)){return s$7.crypto_secretstream_xchacha20poly1305_push(this.state,e,t,null,o$a),e}},Pull:class{constructor(t,e=a$5.allocUnsafe(h$5)){if(!o$a)throw new Error("JavaScript sodium version needs to support crypto_secretstream_xchacha20poly");this.key=t,this.state=e,this.final=!1;}init(t){s$7.crypto_secretstream_xchacha20poly1305_init_pull(this.state,t,this.key);}next(t,e=a$5.allocUnsafe(t.byteLength-r$6)){return s$7.crypto_secretstream_xchacha20poly1305_pull(this.state,e,i$9,t,null),this.final=i$9[0]===_$7,e}}};

var a$4={};const o$9=m$5,s$6=t$6,c$7=L$6,i$8=c$7.from([0]),f$6=c$7.from([1]),y$8=c$7.from([2]),u$5=c$7.from("hypercore");a$4.keyPair=function(e){const n=c$7.allocUnsafe(o$9.crypto_sign_PUBLICKEYBYTES),r=c$7.allocUnsafe(o$9.crypto_sign_SECRETKEYBYTES);return e?o$9.crypto_sign_seed_keypair(n,r,e):o$9.crypto_sign_keypair(n,r),{publicKey:n,secretKey:r}};a$4.validateKeyPair=function(e){const n=c$7.allocUnsafe(o$9.crypto_sign_PUBLICKEYBYTES);return o$9.crypto_sign_ed25519_sk_to_pk(n,e.secretKey),c$7.equals(n,e.publicKey)};a$4.sign=function(e,n){const r=c$7.allocUnsafe(o$9.crypto_sign_BYTES);return o$9.crypto_sign_detached(r,e,n),r};a$4.verify=function(e,n,r){return o$9.crypto_sign_verify_detached(n,e,r)};a$4.data=function(e){const n=c$7.allocUnsafe(32);return o$9.crypto_generichash_batch(n,[i$8,s$6.encode(s$6.uint64,e.byteLength),e]),n};a$4.parent=function(e,n){if(e.index>n.index){const r=e;e=n,n=r;}const r=c$7.allocUnsafe(32);return o$9.crypto_generichash_batch(r,[f$6,s$6.encode(s$6.uint64,e.size+n.size),e.hash,n.hash]),r};a$4.tree=function(e,n){const r=new Array(3*e.length+1);let t=0;r[t++]=y$8;for(let n=0;n<e.length;n++){const a=e[n];r[t++]=a.hash,r[t++]=s$6.encode(s$6.uint64,a.index),r[t++]=s$6.encode(s$6.uint64,a.size);}return n||(n=c$7.allocUnsafe(32)),o$9.crypto_generichash_batch(n,r),n};a$4.hash=function(e,n){return n||(n=c$7.allocUnsafe(32)),Array.isArray(e)||(e=[e]),o$9.crypto_generichash_batch(n,e),n};a$4.randomBytes=function(e){const n=c$7.allocUnsafe(e);return o$9.randombytes_buf(n),n};a$4.discoveryKey=function(e){const n=c$7.allocUnsafe(32);return o$9.crypto_generichash(n,u$5,e),n};o$9.sodium_free?a$4.free=function(e){e.secure&&o$9.sodium_free(e);}:a$4.free=function(){};a$4.namespace=function(e,n){const r="number"==typeof n?function(e){const n=new Array(e);for(let r=0;r<e;r++)n[r]=r;return n}(n):n,t=c$7.allocUnsafe(32*r.length),a=new Array(r.length),s=c$7.allocUnsafe(33);o$9.crypto_generichash(s.subarray(0,32),"string"==typeof e?c$7.from(e):e);for(let e=0;e<a.length;e++)a[e]=t.subarray(32*e,32*e+32),s[32]=r[e],o$9.crypto_generichash(a[e],s);return a};

const t$4=class t{constructor(t){if(!(t>0)||0!=(t-1&t))throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(t),this.mask=t-1,this.top=0,this.btm=0,this.next=null;}clear(){this.top=this.btm=0,this.next=null,this.buffer.fill(void 0);}push(t){return void 0===this.buffer[this.top]&&(this.buffer[this.top]=t,this.top=this.top+1&this.mask,!0)}shift(){const t=this.buffer[this.btm];if(void 0!==t)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,t}peek(){return this.buffer[this.btm]}isEmpty(){return void 0===this.buffer[this.btm]}};var i$7=class i{constructor(i){this.hwm=i||16,this.head=new t$4(this.hwm),this.tail=this.head,this.length=0;}clear(){this.head=this.tail,this.head.clear(),this.length=0;}push(i){if(this.length++,!this.head.push(i)){const h=this.head;this.head=h.next=new t$4(2*this.head.buffer.length),this.head.push(i);}}shift(){0!==this.length&&this.length--;const t=this.tail.shift();if(void 0===t&&this.tail.next){const t=this.tail.next;return this.tail.next=null,this.tail=t,this.tail.shift()}return t}peek(){const t=this.tail.peek();return void 0===t&&this.tail.next?this.tail.next.peek():t}isEmpty(){return 0===this.length}};

function r$5(){}function i$6(){i$6.init.call(this);}function n$6(t){return void 0===t._maxListeners?i$6.defaultMaxListeners:t._maxListeners}function s$5(t,e,i,s){var a,l,u,o;if("function"!=typeof i)throw new TypeError('"listener" argument must be a function');if((l=t._events)?(l.newListener&&(t.emit("newListener",e,i.listener?i.listener:i),l=t._events),u=l[e]):(l=t._events=new r$5,t._eventsCount=0),u){if("function"==typeof u?u=l[e]=s?[i,u]:[u,i]:s?u.unshift(i):u.push(i),!u.warned&&(a=n$6(t))&&a>0&&u.length>a){u.warned=!0;var h=new Error("Possible EventEmitter memory leak detected. "+u.length+" "+e+" listeners added. Use emitter.setMaxListeners() to increase limit");h.name="MaxListenersExceededWarning",h.emitter=t,h.type=e,h.count=u.length,o=h,"function"==typeof console.warn?console.warn(o):console.log(o);}}else u=l[e]=i,++t._eventsCount;return t}function a$3(t,e,r){var i=!1;function n(){t.removeListener(e,n),i||(i=!0,r.apply(t,arguments));}return n.listener=r,n}function l$6(t){var e=this._events;if(e){var r=e[t];if("function"==typeof r)return 1;if(r)return r.length}return 0}function u$4(t,e){for(var r=new Array(e);e--;)r[e]=t[e];return r}r$5.prototype=Object.create(null),i$6.EventEmitter=i$6,i$6.usingDomains=!1,i$6.prototype.domain=void 0,i$6.prototype._events=void 0,i$6.prototype._maxListeners=void 0,i$6.defaultMaxListeners=10,i$6.init=function(){this.domain=null,i$6.usingDomains&&(void 0).active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new r$5,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0;},i$6.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this},i$6.prototype.getMaxListeners=function(){return n$6(this)},i$6.prototype.emit=function(t){var e,r,i,n,s,a,l,o="error"===t;if(a=this._events)o=o&&null==a.error;else if(!o)return !1;if(l=this.domain,o){if(e=arguments[1],!l){if(e instanceof Error)throw e;var h=new Error('Uncaught, unspecified "error" event. ('+e+")");throw h.context=e,h}return e||(e=new Error('Uncaught, unspecified "error" event')),e.domainEmitter=this,e.domain=l,e.domainThrown=!1,l.emit("error",e),!1}if(!(r=a[t]))return !1;var p="function"==typeof r;switch(i=arguments.length){case 1:!function(t,e,r){if(e)t.call(r);else for(var i=t.length,n=u$4(t,i),s=0;s<i;++s)n[s].call(r);}(r,p,this);break;case 2:!function(t,e,r,i){if(e)t.call(r,i);else for(var n=t.length,s=u$4(t,n),a=0;a<n;++a)s[a].call(r,i);}(r,p,this,arguments[1]);break;case 3:!function(t,e,r,i,n){if(e)t.call(r,i,n);else for(var s=t.length,a=u$4(t,s),l=0;l<s;++l)a[l].call(r,i,n);}(r,p,this,arguments[1],arguments[2]);break;case 4:!function(t,e,r,i,n,s){if(e)t.call(r,i,n,s);else for(var a=t.length,l=u$4(t,a),o=0;o<a;++o)l[o].call(r,i,n,s);}(r,p,this,arguments[1],arguments[2],arguments[3]);break;default:for(n=new Array(i-1),s=1;s<i;s++)n[s-1]=arguments[s];!function(t,e,r,i){if(e)t.apply(r,i);else for(var n=t.length,s=u$4(t,n),a=0;a<n;++a)s[a].apply(r,i);}(r,p,this,n);}return !0},i$6.prototype.addListener=function(t,e){return s$5(this,t,e,!1)},i$6.prototype.on=i$6.prototype.addListener,i$6.prototype.prependListener=function(t,e){return s$5(this,t,e,!0)},i$6.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.on(t,a$3(this,t,e)),this},i$6.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.prependListener(t,a$3(this,t,e)),this},i$6.prototype.removeListener=function(t,e){var i,n,s,a,l;if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');if(!(n=this._events))return this;if(!(i=n[t]))return this;if(i===e||i.listener&&i.listener===e)0==--this._eventsCount?this._events=new r$5:(delete n[t],n.removeListener&&this.emit("removeListener",t,i.listener||e));else if("function"!=typeof i){for(s=-1,a=i.length;a-- >0;)if(i[a]===e||i[a].listener&&i[a].listener===e){l=i[a].listener,s=a;break}if(s<0)return this;if(1===i.length){if(i[0]=void 0,0==--this._eventsCount)return this._events=new r$5,this;delete n[t];}else !function(t,e){for(var r=e,i=r+1,n=t.length;i<n;r+=1,i+=1)t[r]=t[i];t.pop();}(i,s);n.removeListener&&this.emit("removeListener",t,l||e);}return this},i$6.prototype.off=function(t,e){return this.removeListener(t,e)},i$6.prototype.removeAllListeners=function(t){var e,i;if(!(i=this._events))return this;if(!i.removeListener)return 0===arguments.length?(this._events=new r$5,this._eventsCount=0):i[t]&&(0==--this._eventsCount?this._events=new r$5:delete i[t]),this;if(0===arguments.length){for(var n,s=Object.keys(i),a=0;a<s.length;++a)"removeListener"!==(n=s[a])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=new r$5,this._eventsCount=0,this}if("function"==typeof(e=i[t]))this.removeListener(t,e);else if(e)do{this.removeListener(t,e[e.length-1]);}while(e[0]);return this},i$6.prototype.listeners=function(t){var e,r=this._events;return r&&(e=r[t])?"function"==typeof e?[e.listener||e]:function(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}(e):[]},i$6.listenerCount=function(t,e){return "function"==typeof t.listenerCount?t.listenerCount(e):l$6.call(t,e)},i$6.prototype.listenerCount=l$6,i$6.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};var o$8=function(t){return t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}(Object.freeze({__proto__:null,default:i$6,EventEmitter:i$6}));const{EventEmitter:h$4}=o$8,p$7=new Error("Stream was destroyed"),d$3=new Error("Premature close"),f$5=e$1,_$6=i$7,c$6=134217727,S$5=1^c$6,m$4=16384,x$4=32768,b$4=768^c$6,w$4=134184959,y$7=2<<17,v$4=4<<17,g$4=8<<17,k$4=32<<17,T$4=64<<17,L$4=128<<17,N$4=512<<17,E$4=100532223,P$5=117440511,W$4=131088,C$3=4210688,M$4=4210702,A$6=16809984,q$3=16809999,U$4=1179663,O$5=Symbol.asyncIterator||Symbol("asyncIterator");let R$3 = class R{constructor(t,{highWaterMark:e=16384,map:r=null,mapWritable:i,byteLength:n,byteLengthWritable:s}={}){this.stream=t,this.queue=new _$6,this.highWaterMark=e,this.buffered=0,this.error=null,this.pipeline=null,this.drains=null,this.byteLength=s||n||st$3,this.map=i||r,this.afterWrite=K$4.bind(this),this.afterUpdateNextTick=J$3.bind(this);}get ended(){return 0!=(this.stream._duplexState&k$4)}push(t){return null!==this.map&&(t=this.map(t)),this.buffered+=this.byteLength(t),this.queue.push(t),this.buffered<this.highWaterMark?(this.stream._duplexState|=g$4,!0):(this.stream._duplexState|=3145728,!1)}shift(){const t=this.queue.shift();return this.buffered-=this.byteLength(t),0===this.buffered&&(this.stream._duplexState&=133169151),t}end(t){"function"==typeof t?this.stream.once("finish",t):null!=t&&this.push(t),this.stream._duplexState=133693439&(this.stream._duplexState|N$4);}autoBatch(t,e){const r=[],i=this.stream;for(r.push(t);1179648==(i._duplexState&U$4);)r.push(i._writableState.shift());if(0!=(15&i._duplexState))return e(null);i._writev(r,e);}update(){const t=this.stream;t._duplexState|=y$7;do{for(;(t._duplexState&U$4)===g$4;){const e=this.shift();t._duplexState|=33685504,t._write(e,this.afterWrite);}0==(655360&t._duplexState)&&this.updateNonPrimary();}while(!0===this.continueUpdate());t._duplexState&=133955583;}updateNonPrimary(){const t=this.stream;if((72482831&t._duplexState)===N$4)return t._duplexState=67108863&(131072|t._duplexState),void t._final(I$4.bind(this));4!=(14&t._duplexState)?1==(t._duplexState&q$3)&&(t._duplexState=(t._duplexState|W$4)&S$5,t._open(Q$3.bind(this))):0==(t._duplexState&A$6)&&(t._duplexState|=W$4,t._destroy(z$3.bind(this)));}continueUpdate(){return 0!=(this.stream._duplexState&L$4)&&(this.stream._duplexState&=P$5,!0)}updateCallback(){(17563663&this.stream._duplexState)===v$4?this.update():this.updateNextTick();}updateNextTick(){0==(this.stream._duplexState&L$4)&&(this.stream._duplexState|=L$4,0==(this.stream._duplexState&y$7)&&f$5(this.afterUpdateNextTick));}};let j$3 = class j{constructor(t,{highWaterMark:e=16384,map:r=null,mapReadable:i,byteLength:n,byteLengthReadable:s}={}){this.stream=t,this.queue=new _$6,this.highWaterMark=e,this.buffered=0,this.error=null,this.pipeline=null,this.byteLength=s||n||st$3,this.map=i||r,this.pipeTo=null,this.afterRead=G$3.bind(this),this.afterUpdateNextTick=H$4.bind(this);}get ended(){return 0!=(this.stream._duplexState&m$4)}pipe(t,e){if(null!==this.pipeTo)throw new Error("Can only pipe to one destination");if("function"!=typeof e&&(e=null),this.stream._duplexState|=512,this.pipeTo=t,this.pipeline=new F$3(this.stream,t,e),e&&this.stream.on("error",at$2),nt$2(t))t._writableState.pipeline=this.pipeline,e&&t.on("error",at$2),t.on("finish",this.pipeline.finished.bind(this.pipeline));else {const e=this.pipeline.done.bind(this.pipeline,t),r=this.pipeline.done.bind(this.pipeline,t,null);t.on("error",e),t.on("close",r),t.on("finish",this.pipeline.finished.bind(this.pipeline));}t.on("drain",B$4.bind(this)),this.stream.emit("piping",t),t.emit("pipe",this.stream);}push(t){const e=this.stream;return null===t?(this.highWaterMark=0,e._duplexState=134152127&(1024|e._duplexState),!1):(null!==this.map&&(t=this.map(t)),this.buffered+=this.byteLength(t),this.queue.push(t),e._duplexState=134152191&(128|e._duplexState),this.buffered<this.highWaterMark)}shift(){const t=this.queue.shift();return this.buffered-=this.byteLength(t),0===this.buffered&&(this.stream._duplexState&=134209407),t}unshift(t){const e=[null!==this.map?this.map(t):t];for(;this.buffered>0;)e.push(this.shift());for(let t=0;t<e.length-1;t++){const r=e[t];this.buffered+=this.byteLength(r),this.queue.push(r);}this.push(e[e.length-1]);}read(){const t=this.stream;if(128==(16527&t._duplexState)){const e=this.shift();return null!==this.pipeTo&&!1===this.pipeTo.write(e)&&(t._duplexState&=b$4),0!=(2048&t._duplexState)&&t.emit("data",e),e}return null}drain(){const t=this.stream;for(;128==(16527&t._duplexState)&&0!=(768&t._duplexState);){const e=this.shift();null!==this.pipeTo&&!1===this.pipeTo.write(e)&&(t._duplexState&=b$4),0!=(2048&t._duplexState)&&t.emit("data",e);}}update(){const t=this.stream;t._duplexState|=32;do{for(this.drain();this.buffered<this.highWaterMark&&0==(82975&t._duplexState);)t._duplexState|=65552,t._read(this.afterRead),this.drain();4224==(12431&t._duplexState)&&(t._duplexState|=8192,t.emit("readable")),0==(80&t._duplexState)&&this.updateNonPrimary();}while(!0===this.continueUpdate());t._duplexState&=134217695;}updateNonPrimary(){const t=this.stream;1024==(1167&t._duplexState)&&(t._duplexState=134216703&(t._duplexState|m$4),t.emit("end"),(t._duplexState&M$4)===C$3&&(t._duplexState|=4),null!==this.pipeTo&&this.pipeTo.end()),4!=(14&t._duplexState)?1==(t._duplexState&q$3)&&(t._duplexState=(t._duplexState|W$4)&S$5,t._open(Q$3.bind(this))):0==(t._duplexState&A$6)&&(t._duplexState|=W$4,t._destroy(z$3.bind(this)));}continueUpdate(){return 0!=(this.stream._duplexState&x$4)&&(this.stream._duplexState&=w$4,!0)}updateCallback(){64==(32879&this.stream._duplexState)?this.update():this.updateNextTick();}updateNextTick(){0==(this.stream._duplexState&x$4)&&(this.stream._duplexState|=x$4,0==(32&this.stream._duplexState)&&f$5(this.afterUpdateNextTick));}};let D$4 = class D{constructor(t){this.data=null,this.afterTransform=V$3.bind(t),this.afterFinal=null;}};let F$3 = class F{constructor(t,e,r){this.from=t,this.to=e,this.afterPipe=r,this.error=null,this.pipeToFinished=!1;}finished(){this.pipeToFinished=!0;}done(t,e){e&&(this.error=e),t!==this.to||(this.to=null,null===this.from)?t!==this.from||(this.from=null,null===this.to)?(null!==this.afterPipe&&this.afterPipe(this.error),this.to=this.from=this.afterPipe=null):0==(t._duplexState&m$4)&&this.to.destroy(this.error||new Error("Readable stream closed before ending")):0!=(this.from._duplexState&m$4)&&this.pipeToFinished||this.from.destroy(this.error||new Error("Writable stream closed prematurely"));}};function B$4(){this.stream._duplexState|=512,this.updateCallback();}function I$4(t){const e=this.stream;t&&e.destroy(t),0==(14&e._duplexState)&&(e._duplexState|=k$4,e.emit("finish")),(e._duplexState&M$4)===C$3&&(e._duplexState|=4),e._duplexState&=E$4,0==(e._duplexState&y$7)?this.update():this.updateNextTick();}function z$3(t){const e=this.stream;t||this.error===p$7||(t=this.error),t&&e.emit("error",t),e._duplexState|=8,e.emit("close");const r=e._readableState,i=e._writableState;if(null!==r&&null!==r.pipeline&&r.pipeline.done(e,t),null!==i){for(;null!==i.drains&&i.drains.length>0;)i.drains.shift().resolve(!1);null!==i.pipeline&&i.pipeline.done(e,t);}}function K$4(t){const e=this.stream;t&&e.destroy(t),e._duplexState&=E$4,null!==this.drains&&function(t){for(let e=0;e<t.length;e++)0==--t[e].writes&&(t.shift().resolve(!0),e--);}(this.drains),2097152==(3276815&e._duplexState)&&(e._duplexState&=132120575,(e._duplexState&T$4)===T$4&&e.emit("drain")),this.updateCallback();}function G$3(t){t&&this.stream.destroy(t),this.stream._duplexState&=134217711,this.updateCallback();}function H$4(){0==(32&this.stream._duplexState)&&(this.stream._duplexState&=w$4,this.update());}function J$3(){0==(this.stream._duplexState&y$7)&&(this.stream._duplexState&=P$5,this.update());}function Q$3(t){const e=this.stream;t&&e.destroy(t),0==(4&e._duplexState)&&(0==(17423&e._duplexState)&&(e._duplexState|=64),0==(71303183&e._duplexState)&&(e._duplexState|=v$4),e.emit("open")),e._duplexState&=134086639,null!==e._writableState&&e._writableState.updateCallback(),null!==e._readableState&&e._readableState.updateCallback();}function V$3(t,e){null!=e&&this.push(e),this._writableState.afterWrite(t);}let X$3 = class X extends h$4{constructor(t){super(),this._duplexState=0,this._readableState=null,this._writableState=null,t&&(t.open&&(this._open=t.open),t.destroy&&(this._destroy=t.destroy),t.predestroy&&(this._predestroy=t.predestroy),t.signal&&t.signal.addEventListener("abort",lt$2.bind(this)));}_open(t){t(null);}_destroy(t){t(null);}_predestroy(){}get readable(){return null!==this._readableState||void 0}get writable(){return null!==this._writableState||void 0}get destroyed(){return 0!=(8&this._duplexState)}get destroying(){return 0!=(14&this._duplexState)}destroy(t){0==(14&this._duplexState)&&(t||(t=p$7),this._duplexState=133693375&(4|this._duplexState),null!==this._readableState&&(this._readableState.highWaterMark=0,this._readableState.error=t),null!==this._writableState&&(this._writableState.highWaterMark=0,this._writableState.error=t),this._duplexState|=2,this._predestroy(),this._duplexState&=134217725,null!==this._readableState&&this._readableState.updateNextTick(),null!==this._writableState&&this._writableState.updateNextTick());}on(t,e){return null!==this._readableState&&("data"===t&&(this._duplexState|=2304,this._readableState.updateNextTick()),"readable"===t&&(this._duplexState|=4096,this._readableState.updateNextTick())),null!==this._writableState&&"drain"===t&&(this._duplexState|=T$4,this._writableState.updateNextTick()),super.on(t,e)}};let Y$3 = class Y extends X$3{constructor(t){super(t),this._duplexState|=4194305,this._readableState=new j$3(this,t),t&&(t.read&&(this._read=t.read),t.eagerOpen&&this._readableState.updateNextTick());}_read(t){t(null);}pipe(t,e){return this._readableState.updateNextTick(),this._readableState.pipe(t,e),t}read(){return this._readableState.updateNextTick(),this._readableState.read()}push(t){return this._readableState.updateNextTick(),this._readableState.push(t)}unshift(t){return this._readableState.updateNextTick(),this._readableState.unshift(t)}resume(){return this._duplexState|=256,this._readableState.updateNextTick(),this}pause(){return this._duplexState&=134217471,this}static _fromAsyncIterator(t,e){let r;const i=new Y({...e,read(e){t.next().then(n).then(e.bind(null,null)).catch(e);},predestroy(){r=t.return();},destroy(t){if(!r)return t(null);r.then(t.bind(null,null)).catch(t);}});return i;function n(t){t.done?i.push(null):i.push(t.value);}}static from(t,e){if(nt$2(r=t)&&r.readable)return t;var r;if(t[O$5])return this._fromAsyncIterator(t[O$5](),e);Array.isArray(t)||(t=void 0===t?[]:[t]);let i=0;return new Y({...e,read(e){this.push(i===t.length?null:t[i++]),e(null);}})}static isBackpressured(t){return 0!=(17422&t._duplexState)||t._readableState.buffered>=t._readableState.highWaterMark}static isPaused(t){return 0==(256&t._duplexState)}[O$5](){const t=this;let e=null,r=null,i=null;return this.on("error",(t=>{e=t;})),this.on("readable",(function(){null!==r&&n(t.read());})),this.on("close",(function(){null!==r&&n(null);})),{[O$5](){return this},next:()=>new Promise((function(e,s){r=e,i=s;const a=t.read();null!==a?n(a):0!=(8&t._duplexState)&&n(null);})),return:()=>s(null),throw:t=>s(t)};function n(n){null!==i&&(e?i(e):null===n&&0==(t._duplexState&m$4)?i(p$7):r({value:n,done:null===n}),i=r=null);}function s(e){return t.destroy(e),new Promise(((r,i)=>{if(8&t._duplexState)return r({value:void 0,done:!0});t.once("close",(function(){e?i(e):r({value:void 0,done:!0});}));}))}}};let Z$3 = class Z extends X$3{constructor(t){super(t),this._duplexState|=16385,this._writableState=new R$3(this,t),t&&(t.writev&&(this._writev=t.writev),t.write&&(this._write=t.write),t.final&&(this._final=t.final),t.eagerOpen&&this._writableState.updateNextTick());}_writev(t,e){e(null);}_write(t,e){this._writableState.autoBatch(t,e);}_final(t){t(null);}static isBackpressured(t){return 0!=(73400334&t._duplexState)}static drained(t){if(t.destroyed)return Promise.resolve(!1);const e=t._writableState;var r;const i=((r=t)._writev!==Z.prototype._writev&&r._writev!==$$3.prototype._writev?Math.min(1,e.queue.length):e.queue.length)+(33554432&t._duplexState?1:0);return 0===i?Promise.resolve(!0):(null===e.drains&&(e.drains=[]),new Promise((t=>{e.drains.push({writes:i,resolve:t});})))}write(t){return this._writableState.updateNextTick(),this._writableState.push(t)}end(t){return this._writableState.updateNextTick(),this._writableState.end(t),this}};let $$3 = class $ extends Y$3{constructor(t){super(t),this._duplexState=1,this._writableState=new R$3(this,t),t&&(t.writev&&(this._writev=t.writev),t.write&&(this._write=t.write),t.final&&(this._final=t.final));}_writev(t,e){e(null);}_write(t,e){this._writableState.autoBatch(t,e);}_final(t){t(null);}write(t){return this._writableState.updateNextTick(),this._writableState.push(t)}end(t){return this._writableState.updateNextTick(),this._writableState.end(t),this}};let tt$3 = class tt extends $$3{constructor(t){super(t),this._transformState=new D$4(this),t&&(t.transform&&(this._transform=t.transform),t.flush&&(this._flush=t.flush));}_write(t,e){this._readableState.buffered>=this._readableState.highWaterMark?this._transformState.data=t:this._transform(t,this._transformState.afterTransform);}_read(t){if(null!==this._transformState.data){const e=this._transformState.data;this._transformState.data=null,t(null),this._transform(e,this._transformState.afterTransform);}else t(null);}destroy(t){super.destroy(t),null!==this._transformState.data&&(this._transformState.data=null,this._transformState.afterTransform());}_transform(t,e){e(null,t);}_flush(t){t(null);}_final(t){this._transformState.afterFinal=t,this._flush(et$3.bind(this));}};function et$3(t,e){const r=this._transformState.afterFinal;if(t)return r(t);null!=e&&this.push(e),this.push(null),r(null);}function rt$2(t,...e){const r=Array.isArray(t)?[...t,...e]:[t,...e],i=r.length&&"function"==typeof r[r.length-1]?r.pop():null;if(r.length<2)throw new Error("Pipeline requires at least 2 streams");let n=r[0],s=null,a=null;for(let t=1;t<r.length;t++)s=r[t],nt$2(n)?n.pipe(s,u):(l(n,!0,t>1,u),n.pipe(s)),n=s;if(i){let t=!1;const e=nt$2(s)||!(!s._writableState||!s._writableState.autoDestroy);s.on("error",(t=>{null===a&&(a=t);})),s.on("finish",(()=>{t=!0,e||i(a);})),e&&s.on("close",(()=>i(a||(t?null:d$3))));}return s;function l(t,e,r,i){t.on("error",i),t.on("close",(function(){return e&&t._readableState&&!t._readableState.ended||r&&t._writableState&&!t._writableState.ended?i(d$3):void 0}));}function u(t){if(t&&!a){a=t;for(const e of r)e.destroy(t);}}}function it$3(t){return !!t._readableState||!!t._writableState}function nt$2(t){return "number"==typeof t._duplexState&&it$3(t)}function st$3(t){return function(t){return "object"==typeof t&&null!==t&&"number"==typeof t.byteLength}(t)?t.byteLength:1024}function at$2(){}function lt$2(){this.destroy(new Error("Stream aborted."));}var ut$2={pipeline:rt$2,pipelinePromise:function(...t){return new Promise(((e,r)=>rt$2(...t,(t=>{if(t)return r(t);e();}))))},isStream:it$3,isStreamx:nt$2,getStreamError:function(t){const e=t._readableState&&t._readableState.error||t._writableState&&t._writableState.error;return e===p$7?null:e},Stream:X$3,Writable:Z$3,Readable:Y$3,Duplex:$$3,Transform:tt$3,PassThrough:class extends tt$3{}};

var t$3=class t{constructor(t,s,n=null,r=!1){this.ms=t,this.ontimeout=s,this.context=n||null,this.interval=r,this.done=!1,this._timer=r?setInterval(i$5,t,this):setTimeout(e,t,this);}unref(){}ref(){}refresh(){this.done||(this.interval?(clearInterval(this._timer),this._timer=setInterval(i$5,this.ms,this)):(clearTimeout(this._timer),this._timer=setTimeout(e,this.ms,this)));}destroy(){this.done=!0,this.ontimeout=null,this.interval?clearInterval(this._timer):clearTimeout(this._timer);}static once(t,e,i){return new this(t,e,i,!1)}static on(t,e,i){return new this(t,e,i,!0)}};function e(t){t.done=!0,t.ontimeout.call(t.context);}function i$5(t){t.ontimeout.call(t.context);}

const t$2=m$5,s$4=r$l,c$5=L$6,n$5=t$2.crypto_scalarmult_ed25519_BYTES,o$7=t$2.crypto_scalarmult_ed25519_BYTES,l$5=t$2.crypto_scalarmult_ed25519_BYTES,y$6=t$2.crypto_sign_SECRETKEYBYTES,i$4="Ed25519";var p$6={DHLEN:n$5,PKLEN:o$7,SCALARLEN:l$5,SKLEN:y$6,ALG:i$4,name:i$4,generateKeyPair:function(e){if(e)return function(e){const a={};return a.secretKey=c$5.alloc(y$6),a.publicKey=c$5.alloc(o$7),t$2.crypto_sign_seed_keypair(a.publicKey,a.secretKey,e),a}(e.subarray(0,32));const a={};return a.secretKey=c$5.alloc(y$6),a.publicKey=c$5.alloc(o$7),t$2.crypto_sign_keypair(a.publicKey,a.secretKey),a},dh:function(e,{scalar:a,secretKey:r}){if(!a){s$4(r.byteLength===y$6);const e=c$5.alloc(64);t$2.crypto_hash_sha512(e,r.subarray(0,32)),e[0]&=248,e[31]&=127,e[31]|=64,a=e.subarray(0,32);}s$4(a.byteLength===l$5),s$4(e.byteLength===o$7);const i=c$5.alloc(n$5);return t$2.crypto_scalarmult_ed25519_noclamp(i,a,e),i}};p$6.ALG;p$6.DHLEN;p$6.PKLEN;p$6.SCALARLEN;p$6.SKLEN;p$6.dh;p$6.generateKeyPair;p$6.name;

const i$3=m$5,r$4=L$6,{crypto_kx_SEEDBYTES:h$3,crypto_kx_keypair:n$4,crypto_kx_seed_keypair:c$4,crypto_scalarmult_BYTES:a$2,crypto_scalarmult_SCALARBYTES:o$6,crypto_scalarmult:l$4,crypto_scalarmult_base:u$3}=m$5,y$5=r$l,f$4=L$6,p$5=a$2,b$3=a$2,d$2=o$6;var m$3={DHLEN:p$5,PKLEN:b$3,SKLEN:d$2,SEEDLEN:h$3,ALG:"25519",generateKeyPair:function(t){const e={};return e.secretKey=t||f$4.alloc(d$2),e.publicKey=f$4.alloc(b$3),t?u$3(e.publicKey,e.secretKey):n$4(e.publicKey,e.secretKey),e},generateSeedKeyPair:function(t){y$5(t.byteLength===d$2);const e={};return e.secretKey=f$4.alloc(d$2),e.publicKey=f$4.alloc(b$3),c$4(e.publicKey,e.secretKey,t),e},dh:function(t,{secretKey:e}){y$5(e.byteLength===d$2),y$5(t.byteLength===b$3);const s=f$4.alloc(p$5);return l$4(s,e,t),s}},_$5={exports:{}};const g$3=L$6,{sodium_memzero:K$3,crypto_generichash:E$3,crypto_generichash_batch:L$3}=m$5,k$3=g$3.alloc(384),x$3=k$3.subarray(0,128),H$3=k$3.subarray(128,256),S$4=k$3.subarray(256,384);_$5.exports=function(t,e,s){s.byteLength>128?(E$3(x$3.subarray(0,64),s),K$3(x$3.subarray(64))):(x$3.set(s),K$3(x$3.subarray(s.byteLength)));for(let t=0;t<x$3.byteLength;t++)H$3[t]=92^x$3[t],S$4[t]=54^x$3[t];K$3(x$3),L$3(t,[S$4].concat(e)),K$3(S$4),L$3(t,[H$3].concat(t)),K$3(H$3);},_$5.exports.BYTES=64,_$5.exports.KEYBYTES=128;const A$5=_$5.exports,B$3=r$l,N$3=L$6,v$3=64;var w$3={hkdf:function(t,e,s="",i=128){const r=function(t,e,s){const i=[N$3.from(e)],r=s/v$3;for(let s=0;s<r;s++){const r=N$3.from(e),h=N$3.concat([i[s],r,N$3.from([s+1])]);i[s+1]=Y$2(t,h);}const h=N$3.concat(i.slice(1));return B$3(h.byteLength===s,"key expansion failed, length not as expected"),h}(function(t,e){return Y$2(t,e)}(t,e),s,i),[h,n]=[r.slice(0,v$3),r.slice(v$3)];return [h,n]},HASHLEN:v$3};function Y$2(t,e){const s=N$3.alloc(v$3);return A$5(s,e,t),s}const P$4=m$5,T$3=r$l,z$2=L$6,C$2=class C{constructor(t){this.key=t||null,this.nonce=0,this.CIPHER_ALG="ChaChaPoly";}initialiseKey(t){this.key=t,this.nonce=0;}setNonce(t){this.nonce=t;}encrypt(t,e){if(!this.hasKey)return t;e||(e=r$4.alloc(0));const s=function(t,e,s,h){r$4.isBuffer(s)||(s=r$4.from(s,"hex")),r$4.isBuffer(h)||(h=r$4.from(h,"hex"));const n=r$4.alloc(i$3.crypto_aead_chacha20poly1305_ietf_NPUBBYTES);new DataView(n.buffer,n.byteOffset,n.byteLength).setUint32(4,e,!0);const c=r$4.alloc(h.byteLength+i$3.crypto_aead_chacha20poly1305_ietf_ABYTES);return i$3.crypto_aead_chacha20poly1305_ietf_encrypt(c,h,s,null,n,t),c}(this.key,this.nonce,e,t);return this.nonce++,s}decrypt(t,e){if(!this.hasKey)return t;e||(e=r$4.alloc(0));const s=function(t,e,s,h){r$4.isBuffer(s)||(s=r$4.from(s,"hex")),r$4.isBuffer(h)||(h=r$4.from(h,"hex"));const n=r$4.alloc(i$3.crypto_aead_chacha20poly1305_ietf_NPUBBYTES);new DataView(n.buffer,n.byteOffset,n.byteLength).setUint32(4,e,!0);const c=r$4.alloc(h.byteLength-i$3.crypto_aead_chacha20poly1305_ietf_ABYTES);return i$3.crypto_aead_chacha20poly1305_ietf_decrypt(c,null,h,s,n,t),c}(this.key,this.nonce,e,t);return this.nonce++,s}get hasKey(){return null!==this.key}_clear(){i$3.sodium_memzero(this.key),this.key=null,this.nonce=null;}static get MACBYTES(){return 16}static get NONCEBYTES(){return 8}static get KEYBYTES(){return 32}},D$3=m$3,{HASHLEN:U$3,hkdf:G$2}=w$3;function I$3(t,e){const s=z$2.concat([t,e]);P$4.crypto_generichash(t,s);}const O$4=r$l,R$2=L$6,j$2=class j extends C$2{constructor(t={}){super(),this.curve=t.curve||D$3,this.digest=z$2.alloc(U$3),this.chainingKey=null,this.offset=0,this.DH_ALG=this.curve.ALG;}mixHash(t){I$3(this.digest,t);}mixKey(t,e){const s=this.curve.dh(t,e),i=G$2(this.chainingKey,s);this.chainingKey=i[0],this.initialiseKey(i[1].subarray(0,32));}encryptAndHash(t){const e=this.encrypt(t,this.digest);return I$3(this.digest,e),e}decryptAndHash(t){const e=this.decrypt(t,this.digest);return I$3(this.digest,t),e}getHandshakeHash(t){return t?(T$3(t.byteLength===U$3,`output must be ${U$3} bytes`),t.set(this.digest),t):this.getHandshakeHash(z$2.alloc(U$3))}split(){return G$2(this.chainingKey,z$2.alloc(0)).map((t=>t.subarray(0,32)))}_clear(){super._clear(),P$4.sodium_memzero(this.digest),P$4.sodium_memzero(this.chainingKey),this.digest=null,this.chainingKey=null,this.offset=null,this.curve=null;}static get alg(){return C$2.alg+"_BLAKE2b"}},{HASHLEN:V$2}=w$3,X$2=Symbol("initiator static key preshared"),q$2=Symbol("responder static key preshared"),M$3=Symbol("s"),$$2=Symbol("e"),F$2=Symbol("es"),J$2=Symbol("se"),Q$2=Symbol("ee"),W$3=Symbol("ss"),Z$2=Object.freeze({XX:[[$$2],[$$2,Q$2,M$3,F$2],[M$3,J$2]],IK:[q$2,[$$2,F$2,M$3,W$3],[$$2,Q$2,J$2]]});let tt$2 = class tt{constructor(){this.size=0,this.buffers=[];}push(t){this.size+=t.byteLength,this.buffers.push(t);}end(){const t=R$2.alloc(this.size);let e=0;for(const s of this.buffers)t.set(s,e),e+=s.byteLength;return t}};let et$2 = class et{constructor(t){this.offset=0,this.buffer=t;}shift(t){const e=this.offset,s=this.offset+=t;if(s>this.buffer.byteLength)throw new Error("Insufficient bytes");return this.buffer.subarray(e,s)}end(){return this.shift(this.buffer.byteLength-this.offset)}};var st$2=class st extends j$2{constructor(t,e,s,i={}){super(i),this.s=s||this.curve.generateKeyPair(),this.e=null,this.re=null,this.rs=null,this.pattern=t,this.handshake=Z$2[this.pattern].slice(),this.protocol=R$2.from(["Noise",this.pattern,this.DH_ALG,this.CIPHER_ALG,"BLAKE2b"].join("_")),this.initiator=e,this.complete=!1,this.rx=null,this.tx=null,this.hash=null;}initialise(t,e){for(this.protocol.byteLength<=V$2?this.digest.set(this.protocol):this.mixHash(this.protocol),this.chainingKey=R$2.from(this.digest),this.mixHash(t);!Array.isArray(this.handshake[0]);){const t=this.handshake.shift();O$4(t===q$2||t===X$2,"Unexpected pattern");const s=this.initiator?t===q$2:t===X$2;s&&(this.rs=e);const i=s?this.rs:this.s.publicKey;O$4(null!=i,"Remote pubkey required"),this.mixHash(i);}}final(){const[t,e]=this.split();this.tx=this.initiator?t:e,this.rx=this.initiator?e:t,this.complete=!0,this.hash=this.getHandshakeHash(),this._clear();}recv(t){const e=new et$2(t);for(const t of this.handshake.shift())switch(t){case $$2:this.re=e.shift(this.curve.PKLEN),this.mixHash(this.re);break;case M$3:{const t=this.hasKey?this.curve.PKLEN+16:this.curve.PKLEN;this.rs=this.decryptAndHash(e.shift(t));break}case Q$2:case F$2:case J$2:case W$3:{const e=it$2(t,this.initiator),s=e.local?this.s:this.e,i=e.remote?this.rs:this.re;this.mixKey(i,s);break}default:throw new Error("Unexpected message")}const s=this.decryptAndHash(e.end());return this.handshake.length||this.final(),s}send(t=R$2.alloc(0)){const e=new tt$2;for(const t of this.handshake.shift())switch(t){case $$2:null===this.e&&(this.e=this.curve.generateKeyPair()),this.mixHash(this.e.publicKey),e.push(this.e.publicKey);break;case M$3:e.push(this.encryptAndHash(this.s.publicKey));break;case F$2:case J$2:case Q$2:case W$3:{const e=it$2(t,this.initiator),s=e.local?this.s:this.e,i=e.remote?this.rs:this.re;this.mixKey(i,s);break}default:throw new Error("Unexpected message")}e.push(this.encryptAndHash(t));const s=e.end();return this.handshake.length||this.final(),s}_clear(){super._clear(),this.e.secretKey.fill(0),this.e.publicKey.fill(0),this.re.fill(0),this.e=null,this.re=null;}};function it$2(t,e){const s={local:!1,remote:!1};switch(t){case Q$2:return s;case F$2:return s.local^=!e,s.remote^=e,s;case J$2:return s.local^=e,s.remote^=!e,s;case W$3:return s.local^=1,s.remote^=1,s}}

const{Duplex:o$5,Writable:l$3}=ut$2;let u$2 = class u extends o$5{constructor(t){super(),this._stream=t,this._ondrain=null;}_write(t,e){!1===this._stream.push(t)?this._stream._ondrain=e:e(null);}_final(t){this._stream.push(null),t(null);}_read(t){const e=this._ondrain;this._ondrain=null,e&&e(),t(null);}};const _$4=m$5,d$1=p$6,m$2=st$2,c$3=L$6,p$4=c$3.alloc(0),{Pull:y$4,Push:w$2,HEADERBYTES:f$3,KEYBYTES:k$2,ABYTES:g$2}=y$9,b$2=m$5,S$3=a$4,{Duplex:v$2,Writable:D$2,getStreamError:P$3}=ut$2,K$2=L$6,A$4=t$3,x$2=class x extends o$5{constructor(t){super(),this.noiseStream=t,this._ondrain=null,this.reverse=new u$2(this);}get publicKey(){return this.noiseStream.publicKey}get remotePublicKey(){return this.noiseStream.remotePublicKey}get handshakeHash(){return this.noiseStream.handshakeHash}flush(){return l$3.drained(this)}_read(t){const e=this._ondrain;this._ondrain=null,e&&e(),t(null);}_write(t,e){!1===this.reverse.push(t)?this.reverse._ondrain=e:e(null);}_final(t){this.reverse.push(null),t(null);}},E$2=class E{constructor(t,e,s,i){this.isInitiator=t,this.keyPair=e,this.noise=new m$2(i,t,e,{curve:d$1}),this.noise.initialise(p$4,s),this.destroyed=!1;}static keyPair(t){const e=c$3.alloc(32),s=c$3.alloc(64);return t?_$4.crypto_sign_seed_keypair(e,s,t):_$4.crypto_sign_keypair(e,s),{publicKey:e,secretKey:s}}recv(t){try{return this.noise.recv(t),this.noise.complete?this._return(null):this.send()}catch{return this.destroy(),null}}send(){try{const s=this.noise.send(),i=c$3.allocUnsafe(s.byteLength+3);return t=s.byteLength,(e=i)[0]=255&t,e[1]=t>>>8&255,e[2]=t>>>16&255,i.set(s,3),this._return(i)}catch{return this.destroy(),null}var t,e;}destroy(){this.destroyed||(this.destroyed=!0);}_return(t){const e=this.noise.complete?c$3.toBuffer(this.noise.tx):null,s=this.noise.complete?c$3.toBuffer(this.noise.rx):null,i=this.noise.complete?c$3.toBuffer(this.noise.hash):null;return {data:t,remotePublicKey:this.noise.complete?c$3.toBuffer(this.noise.rs):null,hash:i,tx:e,rx:s}}},M$2=f$3+32,[I$2,L$2]=S$3.namespace("hyperswarm/secret-stream",2);var H$2=class H extends v$2{constructor(t,e,s={}){if(super({mapWritable:O$3}),"boolean"!=typeof t)throw new Error("isInitiator should be a boolean");this.noiseStream=this,this.isInitiator=t,this.rawStream=null,this.publicKey=s.publicKey||null,this.remotePublicKey=s.remotePublicKey||null,this.handshakeHash=null,this.userData=null;let i=null;this.opened=new Promise((t=>{i=t;})),this._rawStream=null,this._handshake=null,this._handshakePattern=s.pattern||null,this._handshakeDone=null,this._state=0,this._len=0,this._tmp=1,this._message=null,this._openedDone=i,this._startDone=null,this._drainDone=null,this._outgoingPlain=null,this._outgoingWrapped=null,this._utp=null,this._setup=!0,this._ended=2,this._encrypt=null,this._decrypt=null,this._timeout=null,this._timeoutMs=0,this._keepAlive=null,this._keepAliveMs=0,!1!==s.autoStart&&this.start(e,s),this.resume(),this.pause();}static keyPair(t){return E$2.keyPair(t)}static id(t,e,s){return B$2(t,e,s)}setTimeout(t){t||(t=0),this._clearTimeout(),this._timeoutMs=t,t&&null!==this.rawStream&&(this._timeout=A$4.once(t,W$2,this),this._timeout.unref());}setKeepAlive(t){t||(t=0),this._keepAliveMs=t,t&&null!==this.rawStream&&(this._keepAlive=A$4.on(t,U$2,this),this._keepAlive.unref());}start(t,e={}){t?(this.rawStream=t,this._rawStream=t,"function"==typeof this.rawStream.setContentSize&&(this._utp=t)):(this.rawStream=new x$2(this),this._rawStream=this.rawStream.reverse),this.rawStream.on("error",this._onrawerror.bind(this)),this.rawStream.on("close",this._onrawclose.bind(this)),this._startHandshake(e.handshake,e.keyPair||null),this._continueOpen(null),this.destroying||(e.data&&this._onrawdata(e.data),e.ended&&this._onrawend(),this._keepAliveMs>0&&null===this._keepAlive&&this.setKeepAlive(this._keepAliveMs),this._timeoutMs>0&&null===this._timeout&&this.setTimeout(this._timeoutMs));}async flush(){return !1!==await this.opened&&!1!==await D$2.drained(this)&&!this.destroying&&(null===this.rawStream||!this.rawStream.flush||await this.rawStream.flush())}_continueOpen(t){if(t&&this.destroy(t),null===this._startDone)return;const e=this._startDone;this._startDone=null,this._open(e);}_onkeypairpromise(t){const e=this,s=this._continueOpen.bind(this);t.then((function(t){e._onkeypair(t),s(null);}),s);}_onkeypair(t){const e=this._handshakePattern||"XX",s=this.remotePublicKey;this._handshake=new E$2(this.isInitiator,t,s,e),this.publicKey=this._handshake.keyPair.publicKey;}_startHandshake(t,e){if(t){const{tx:e,rx:s,hash:i,publicKey:n,remotePublicKey:r}=t;this._setupSecretStream(e,s,i,n,r);}else e||(e=E$2.keyPair()),"function"==typeof e.then?this._onkeypairpromise(e):this._onkeypair(e);}_onrawerror(t){this.destroy(t);}_onrawclose(){0!==this._ended&&this.destroy();}_onrawdata(t){let e=0;null!==this._timeout&&this._timeout.refresh();do{switch(this._state){case 0:for(;16777216!==this._tmp&&e<t.length;){const s=t[e++];this._len+=this._tmp*s,this._tmp*=256;}if(16777216===this._tmp){this._tmp=0,this._state=1;const s=t.length-e;s<this._len&&null!==this._utp&&this._utp.setContentSize(this._len-s);}break;case 1:{const s=this._len-this._tmp,i=s+e;if(null===this._message&&i<=t.length){this._message=t.subarray(e,i),e+=s,this._incoming();break}const n=t.length-e;null===this._message&&(this._message=K$2.allocUnsafe(this._len)),K$2.copy(t,this._message,this._tmp,e),this._tmp+=n,i<=t.length?(e+=s,this._incoming()):e+=n;break}}}while(e<t.length&&!this.destroying)}_onrawend(){this._ended--,this.push(null);}_onrawdrain(){const t=this._drainDone;null!==t&&(this._drainDone=null,t());}_read(t){this.rawStream.resume(),t(null);}_incoming(){const t=this._message;if(this._state=0,this._len=0,this._tmp=1,this._message=null,!0===this._setup){if(this._handshake)this._onhandshakert(this._handshake.recv(t));else {if(t.byteLength!==M$2)return void this.destroy(new Error("Invalid header message received"));const e=t.subarray(0,32),s=B$2(this.handshakeHash,!this.isInitiator),i=t.subarray(32);if(!K$2.equals(s,e))return void this.destroy(new Error("Invalid header received"));this._decrypt.init(i),this._setup=!1;}return}if(t.length<g$2)return void this.destroy(new Error("Invalid message received"));const e=t.subarray(1,t.byteLength-g$2+1);try{this._decrypt.next(t,e);}catch(t){return void this.destroy(t)}0===e.byteLength&&0!==this._keepAliveMs||!1===this.push(e)&&this.rawStream.pause();}_onhandshakert(t){if(null===this._handshakeDone)return;if(null!==t&&(t.data&&this._rawStream.write(t.data),!t.tx))return;const e=this._handshakeDone,s=this._handshake.keyPair.publicKey;if(this._handshakeDone=null,this._handshake=null,null===t)return e(new Error("Noise handshake failed"));this._setupSecretStream(t.tx,t.rx,t.hash,s,t.remotePublicKey),this._resolveOpened(!0),e(null);}_setupSecretStream(t,e,s,i,n){const r=K$2.allocUnsafe(3+M$2);T$2(M$2,r),this._encrypt=new w$2(t.subarray(0,k$2),void 0,r.subarray(35)),this._decrypt=new y$4(e.subarray(0,k$2)),this.publicKey=i,this.remotePublicKey=n,this.handshakeHash=s;const h=r.subarray(3,35);B$2(s,this.isInitiator,h),this.emit("handshake"),this.rawStream!==this._rawStream&&this.rawStream.emit("handshake"),this.destroying||this._rawStream.write(r);}_open(t){if(null===this._rawStream||null===this._handshake&&null===this._encrypt)this._startDone=t;else {if(this._rawStream.on("data",this._onrawdata.bind(this)),this._rawStream.on("end",this._onrawend.bind(this)),this._rawStream.on("drain",this._onrawdrain.bind(this)),null!==this._encrypt)return this._resolveOpened(!0),t(null);this._handshakeDone=t,this.isInitiator&&this._onhandshakert(this._handshake.send());}}_predestroy(){if(this.rawStream){const t=P$3(this);this.rawStream.destroy(t);}if(null!==this._startDone){const t=this._startDone;this._startDone=null,t(new Error("Stream destroyed"));}if(null!==this._handshakeDone){const t=this._handshakeDone;this._handshakeDone=null,t(new Error("Stream destroyed"));}if(null!==this._drainDone){const t=this._drainDone;this._drainDone=null,t(new Error("Stream destroyed"));}}_write(t,e){let s=this._outgoingWrapped;t!==this._outgoingPlain?(s=K$2.allocUnsafe(t.byteLength+3+g$2),s.set(t,4)):this._outgoingWrapped=this._outgoingPlain=null,T$2(s.byteLength-3,s),this._encrypt.next(s.subarray(4,4+t.byteLength),s.subarray(3)),null!==this._keepAlive&&this._keepAlive.refresh(),!1===this._rawStream.write(s)?this._drainDone=e:e(null);}_final(t){this._clearKeepAlive(),this._ended--,this._rawStream.end(),t(null);}_resolveOpened(t){if(null!==this._openedDone){const e=this._openedDone;this._openedDone=null,e(t),t&&this.emit("connect");}}_clearTimeout(){null!==this._timeout&&(this._timeout.destroy(),this._timeout=null,this._timeoutMs=0);}_clearKeepAlive(){null!==this._keepAlive&&(this._keepAlive.destroy(),this._keepAlive=null,this._keepAliveMs=0);}_destroy(t){this._clearKeepAlive(),this._clearTimeout(),this._resolveOpened(!1),t(null);}alloc(t){const e=K$2.allocUnsafe(t+3+g$2);return this._outgoingWrapped=e,this._outgoingPlain=e.subarray(4,e.byteLength-g$2+1),this._outgoingPlain}};function T$2(t,e){e[0]=255&t,e[1]=t>>>8&255,e[2]=t>>>16&255;}function B$2(t,e,s=K$2.allocUnsafe(32)){return b$2.crypto_generichash(s,e?I$2:L$2,t),s}function O$3(t){return "string"==typeof t?K$2.from(t):t}function W$2(){this.destroy(new Error("Stream timed out"));}function U$2(){const t=this.alloc(0);this.write(t);}

var N$2={};const O$2=a$4,A$3=N$2.COMMANDS={PEER_HANDSHAKE:0,PEER_HOLEPUNCH:1,FIND_PEER:2,LOOKUP:3,ANNOUNCE:4,UNANNOUNCE:5,MUTABLE_PUT:6,MUTABLE_GET:7,IMMUTABLE_PUT:8,IMMUTABLE_GET:9};N$2.BOOTSTRAP_NODES=[{host:"node1.hyperdht.org",port:49737},{host:"node2.hyperdht.org",port:49737},{host:"node3.hyperdht.org",port:49737}];N$2.FIREWALL={UNKNOWN:0,OPEN:1,CONSISTENT:2,RANDOM:3};N$2.ERROR={NONE:0,ABORTED:1,VERSION_MISMATCH:2,TRY_LATER:3,SEQ_REUSED:16,SEQ_TOO_LOW:17};const[r$3,_$3,o$4,P$2,S$2]=O$2.namespace("hyperswarm/dht",[A$3.ANNOUNCE,A$3.UNANNOUNCE,A$3.MUTABLE_PUT,A$3.PEER_HANDSHAKE,A$3.PEER_HOLEPUNCH]);N$2.NS={ANNOUNCE:r$3,UNANNOUNCE:_$3,MUTABLE_PUT:o$4,PEER_HANDSHAKE:P$2,PEER_HOLEPUNCH:S$2};

const t$1=m$5,s$3=r$l,c$2=L$6,n$3=t$1.crypto_scalarmult_ed25519_BYTES,o$3=t$1.crypto_scalarmult_ed25519_BYTES,l$2=t$1.crypto_scalarmult_ed25519_BYTES,y$3=t$1.crypto_sign_SECRETKEYBYTES,i$2="Ed25519";var p$3={DHLEN:n$3,PKLEN:o$3,SCALARLEN:l$2,SKLEN:y$3,ALG:i$2,name:i$2,generateKeyPair:function(e){if(e)return function(e){const a={};return a.secretKey=c$2.alloc(y$3),a.publicKey=c$2.alloc(o$3),t$1.crypto_sign_seed_keypair(a.publicKey,a.secretKey,e),a}(e.subarray(0,32));const a={};return a.secretKey=c$2.alloc(y$3),a.publicKey=c$2.alloc(o$3),t$1.crypto_sign_keypair(a.publicKey,a.secretKey),a},dh:function(e,{scalar:a,secretKey:r}){if(!a){s$3(r.byteLength===y$3);const e=c$2.alloc(64);t$1.crypto_hash_sha512(e,r.subarray(0,32)),e[0]&=248,e[31]&=127,e[31]|=64,a=e.subarray(0,32);}s$3(a.byteLength===l$2),s$3(e.byteLength===o$3);const i=c$2.alloc(n$3);return t$1.crypto_scalarmult_ed25519_noclamp(i,a,e),i}};p$3.ALG;p$3.DHLEN;p$3.PKLEN;p$3.SCALARLEN;p$3.SKLEN;p$3.dh;p$3.generateKeyPair;p$3.name;

var n$2={};const o$2=t$6,r$2=p$9,c$1={...r$2.ipv4Address,decode(e){const d=r$2.ipv4Address.decode(e);return {host:d.host,port:d.port}}},s$2=o$2.array(c$1),u$1={...r$2.ipv6Address,decode(e){const d=r$2.ipv6Address.decode(e);return {host:d.host,port:d.port}}},t=o$2.array(u$1);n$2.handshake={preencode(e,d){e.end+=2+(d.peerAddress?6:0)+(d.relayAddress?6:0),o$2.buffer.preencode(e,d.noise);},encode(e,d){const n=(d.peerAddress?1:0)|(d.relayAddress?2:0);o$2.uint.encode(e,n),o$2.uint.encode(e,d.mode),o$2.buffer.encode(e,d.noise),d.peerAddress&&c$1.encode(e,d.peerAddress),d.relayAddress&&c$1.encode(e,d.relayAddress);},decode(e){const d=o$2.uint.decode(e);return {mode:o$2.uint.decode(e),noise:o$2.buffer.decode(e),peerAddress:1&d?c$1.decode(e):null,relayAddress:2&d?c$1.decode(e):null}}};const a$1={preencode(e,d){e.end+=12;},encode(e,d){c$1.encode(e,d.relayAddress),c$1.encode(e,d.peerAddress);},decode:e=>({relayAddress:c$1.decode(e),peerAddress:c$1.decode(e)})},l$1=o$2.array(a$1),p$2={preencode(e,d){o$2.uint.preencode(e,d.id),l$1.preencode(e,d.relays);},encode(e,d){o$2.uint.encode(e,d.id),l$1.encode(e,d.relays);},decode:e=>({id:o$2.uint.decode(e),relays:l$1.decode(e)})},f$2={preencode(e,d){e.end+=2,o$2.uint.preencode(e,d.id),o$2.uint.preencode(e,d.seq);},encode(e,d){o$2.uint.encode(e,1),o$2.uint.encode(e,d.reusableSocket?1:0),o$2.uint.encode(e,d.id),o$2.uint.encode(e,d.seq);},decode:e=>({version:o$2.uint.decode(e),reusableSocket:0!=(1&o$2.uint.decode(e)),id:o$2.uint.decode(e),seq:o$2.uint.decode(e)})},h$2={preencode(e,d){o$2.uint.preencode(e,1);},encode(e,d){o$2.uint.encode(e,1);},decode:e=>({version:o$2.uint.decode(e)})},y$2={preencode(e,d){o$2.uint.preencode(e,1),o$2.uint.preencode(e,0),o$2.fixed32.preencode(e,d.publicKey),o$2.fixed32.preencode(e,d.token);},encode(e,d){o$2.uint.encode(e,1),o$2.uint.encode(e,0),o$2.fixed32.encode(e,d.publicKey),o$2.fixed32.encode(e,d.token);},decode(e){const d=o$2.uint.decode(e);return o$2.uint.decode(e),{version:d,publicKey:o$2.fixed32.decode(e),token:o$2.fixed32.decode(e)}}};n$2.noisePayload={preencode(e,d){e.end+=4,d.holepunch&&p$2.preencode(e,d.holepunch),d.addresses4&&d.addresses4.length&&s$2.preencode(e,d.addresses4),d.addresses6&&d.addresses6.length&&t.preencode(e,d.addresses6),d.udx&&f$2.preencode(e,d.udx),d.secretStream&&h$2.preencode(e,d.secretStream),d.relayThrough&&y$2.preencode(e,d.relayThrough);},encode(e,d){let n=0;d.holepunch&&(n|=1),d.addresses4&&d.addresses4.length&&(n|=2),d.addresses6&&d.addresses6.length&&(n|=4),d.udx&&(n|=8),d.secretStream&&(n|=16),d.relayThrough&&(n|=32),o$2.uint.encode(e,1),o$2.uint.encode(e,n),o$2.uint.encode(e,d.error),o$2.uint.encode(e,d.firewall),d.holepunch&&p$2.encode(e,d.holepunch),d.addresses4&&d.addresses4.length&&s$2.encode(e,d.addresses4),d.addresses6&&d.addresses6.length&&t.encode(e,d.addresses6),d.udx&&f$2.encode(e,d.udx),d.secretStream&&h$2.encode(e,d.secretStream),d.relayThrough&&y$2.encode(e,d.relayThrough);},decode(e){const d=o$2.uint.decode(e);if(1!==d)return {version:d,error:0,firewall:0,holepunch:null,addresses4:[],addresses6:[],udx:null,secretStream:null,relayThrough:null};const n=o$2.uint.decode(e);return {version:d,error:o$2.uint.decode(e),firewall:o$2.uint.decode(e),holepunch:0!=(1&n)?p$2.decode(e):null,addresses4:0!=(2&n)?s$2.decode(e):[],addresses6:0!=(4&n)?t.decode(e):[],udx:0!=(8&n)?f$2.decode(e):null,secretStream:0!=(16&n)?h$2.decode(e):null,relayThrough:0!=(32&n)?y$2.decode(e):null}}};n$2.holepunch={preencode(e,d){e.end+=2,o$2.uint.preencode(e,d.id),o$2.buffer.preencode(e,d.payload),d.peerAddress&&c$1.preencode(e,d.peerAddress);},encode(e,d){const n=d.peerAddress?1:0;o$2.uint.encode(e,n),o$2.uint.encode(e,d.mode),o$2.uint.encode(e,d.id),o$2.buffer.encode(e,d.payload),d.peerAddress&&c$1.encode(e,d.peerAddress);},decode(e){const d=o$2.uint.decode(e);return {mode:o$2.uint.decode(e),id:o$2.uint.decode(e),payload:o$2.buffer.decode(e),peerAddress:1&d?c$1.decode(e):null}}};n$2.holepunchPayload={preencode(e,d){e.end+=4,d.addresses&&s$2.preencode(e,d.addresses),d.remoteAddress&&(e.end+=6),d.token&&(e.end+=32),d.remoteToken&&(e.end+=32);},encode(e,d){const n=(d.connected?1:0)|(d.punching?2:0)|(d.addresses?4:0)|(d.remoteAddress?8:0)|(d.token?16:0)|(d.remoteToken?32:0);o$2.uint.encode(e,n),o$2.uint.encode(e,d.error),o$2.uint.encode(e,d.firewall),o$2.uint.encode(e,d.round),d.addresses&&s$2.encode(e,d.addresses),d.remoteAddress&&c$1.encode(e,d.remoteAddress),d.token&&o$2.fixed32.encode(e,d.token),d.remoteToken&&o$2.fixed32.encode(e,d.remoteToken);},decode(e){const d=o$2.uint.decode(e);return {error:o$2.uint.decode(e),firewall:o$2.uint.decode(e),round:o$2.uint.decode(e),connected:0!=(1&d),punching:0!=(2&d),addresses:0!=(4&d)?s$2.decode(e):null,remoteAddress:0!=(8&d)?c$1.decode(e):null,token:0!=(16&d)?o$2.fixed32.decode(e):null,remoteToken:0!=(32&d)?o$2.fixed32.decode(e):null}}};const A$2=n$2.peer={preencode(e,d){e.end+=32,s$2.preencode(e,d.relayAddresses);},encode(e,d){o$2.fixed32.encode(e,d.publicKey),s$2.encode(e,d.relayAddresses);},decode:e=>({publicKey:o$2.fixed32.decode(e),relayAddresses:s$2.decode(e)})};n$2.peers=o$2.array(A$2);n$2.announce={preencode(e,d){e.end++,d.peer&&A$2.preencode(e,d.peer),d.refresh&&(e.end+=32),d.signature&&(e.end+=64);},encode(e,d){const n=(d.peer?1:0)|(d.refresh?2:0)|(d.signature?4:0);o$2.uint.encode(e,n),d.peer&&A$2.encode(e,d.peer),d.refresh&&o$2.fixed32.encode(e,d.refresh),d.signature&&o$2.fixed64.encode(e,d.signature);},decode(e){const d=o$2.uint.decode(e);return {peer:0!=(1&d)?A$2.decode(e):null,refresh:0!=(2&d)?o$2.fixed32.decode(e):null,signature:0!=(4&d)?o$2.fixed64.decode(e):null}}};n$2.mutableSignable={preencode(e,d){o$2.uint.preencode(e,d.seq),o$2.buffer.preencode(e,d.value);},encode(e,d){o$2.uint.encode(e,d.seq),o$2.buffer.encode(e,d.value);},decode:e=>({seq:o$2.uint.decode(e),value:o$2.buffer.decode(e)})};n$2.mutablePutRequest={preencode(e,d){o$2.fixed32.preencode(e,d.publicKey),o$2.uint.preencode(e,d.seq),o$2.buffer.preencode(e,d.value),o$2.fixed64.preencode(e,d.signature);},encode(e,d){o$2.fixed32.encode(e,d.publicKey),o$2.uint.encode(e,d.seq),o$2.buffer.encode(e,d.value),o$2.fixed64.encode(e,d.signature);},decode:e=>({publicKey:o$2.fixed32.decode(e),seq:o$2.uint.decode(e),value:o$2.buffer.decode(e),signature:o$2.fixed64.decode(e)})};n$2.mutableGetResponse={preencode(e,d){o$2.uint.preencode(e,d.seq),o$2.buffer.preencode(e,d.value),o$2.fixed64.preencode(e,d.signature);},encode(e,d){o$2.uint.encode(e,d.seq),o$2.buffer.encode(e,d.value),o$2.fixed64.encode(e,d.signature);},decode:e=>({seq:o$2.uint.decode(e),value:o$2.buffer.decode(e),signature:o$2.fixed64.decode(e)})};

function r$1(){}function i$1(){i$1.init.call(this);}function n$1(t){return void 0===t._maxListeners?i$1.defaultMaxListeners:t._maxListeners}function s$1(t,e,i,s){var a,l,u,o;if("function"!=typeof i)throw new TypeError('"listener" argument must be a function');if((l=t._events)?(l.newListener&&(t.emit("newListener",e,i.listener?i.listener:i),l=t._events),u=l[e]):(l=t._events=new r$1,t._eventsCount=0),u){if("function"==typeof u?u=l[e]=s?[i,u]:[u,i]:s?u.unshift(i):u.push(i),!u.warned&&(a=n$1(t))&&a>0&&u.length>a){u.warned=!0;var h=new Error("Possible EventEmitter memory leak detected. "+u.length+" "+e+" listeners added. Use emitter.setMaxListeners() to increase limit");h.name="MaxListenersExceededWarning",h.emitter=t,h.type=e,h.count=u.length,o=h,"function"==typeof console.warn?console.warn(o):console.log(o);}}else u=l[e]=i,++t._eventsCount;return t}function a(t,e,r){var i=!1;function n(){t.removeListener(e,n),i||(i=!0,r.apply(t,arguments));}return n.listener=r,n}function l(t){var e=this._events;if(e){var r=e[t];if("function"==typeof r)return 1;if(r)return r.length}return 0}function u(t,e){for(var r=new Array(e);e--;)r[e]=t[e];return r}r$1.prototype=Object.create(null),i$1.EventEmitter=i$1,i$1.usingDomains=!1,i$1.prototype.domain=void 0,i$1.prototype._events=void 0,i$1.prototype._maxListeners=void 0,i$1.defaultMaxListeners=10,i$1.init=function(){this.domain=null,i$1.usingDomains&&(void 0).active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new r$1,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0;},i$1.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this},i$1.prototype.getMaxListeners=function(){return n$1(this)},i$1.prototype.emit=function(t){var e,r,i,n,s,a,l,o="error"===t;if(a=this._events)o=o&&null==a.error;else if(!o)return !1;if(l=this.domain,o){if(e=arguments[1],!l){if(e instanceof Error)throw e;var h=new Error('Uncaught, unspecified "error" event. ('+e+")");throw h.context=e,h}return e||(e=new Error('Uncaught, unspecified "error" event')),e.domainEmitter=this,e.domain=l,e.domainThrown=!1,l.emit("error",e),!1}if(!(r=a[t]))return !1;var d="function"==typeof r;switch(i=arguments.length){case 1:!function(t,e,r){if(e)t.call(r);else for(var i=t.length,n=u(t,i),s=0;s<i;++s)n[s].call(r);}(r,d,this);break;case 2:!function(t,e,r,i){if(e)t.call(r,i);else for(var n=t.length,s=u(t,n),a=0;a<n;++a)s[a].call(r,i);}(r,d,this,arguments[1]);break;case 3:!function(t,e,r,i,n){if(e)t.call(r,i,n);else for(var s=t.length,a=u(t,s),l=0;l<s;++l)a[l].call(r,i,n);}(r,d,this,arguments[1],arguments[2]);break;case 4:!function(t,e,r,i,n,s){if(e)t.call(r,i,n,s);else for(var a=t.length,l=u(t,a),o=0;o<a;++o)l[o].call(r,i,n,s);}(r,d,this,arguments[1],arguments[2],arguments[3]);break;default:for(n=new Array(i-1),s=1;s<i;s++)n[s-1]=arguments[s];!function(t,e,r,i){if(e)t.apply(r,i);else for(var n=t.length,s=u(t,n),a=0;a<n;++a)s[a].apply(r,i);}(r,d,this,n);}return !0},i$1.prototype.addListener=function(t,e){return s$1(this,t,e,!1)},i$1.prototype.on=i$1.prototype.addListener,i$1.prototype.prependListener=function(t,e){return s$1(this,t,e,!0)},i$1.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.on(t,a(this,t,e)),this},i$1.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.prependListener(t,a(this,t,e)),this},i$1.prototype.removeListener=function(t,e){var i,n,s,a,l;if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');if(!(n=this._events))return this;if(!(i=n[t]))return this;if(i===e||i.listener&&i.listener===e)0==--this._eventsCount?this._events=new r$1:(delete n[t],n.removeListener&&this.emit("removeListener",t,i.listener||e));else if("function"!=typeof i){for(s=-1,a=i.length;a-- >0;)if(i[a]===e||i[a].listener&&i[a].listener===e){l=i[a].listener,s=a;break}if(s<0)return this;if(1===i.length){if(i[0]=void 0,0==--this._eventsCount)return this._events=new r$1,this;delete n[t];}else !function(t,e){for(var r=e,i=r+1,n=t.length;i<n;r+=1,i+=1)t[r]=t[i];t.pop();}(i,s);n.removeListener&&this.emit("removeListener",t,l||e);}return this},i$1.prototype.off=function(t,e){return this.removeListener(t,e)},i$1.prototype.removeAllListeners=function(t){var e,i;if(!(i=this._events))return this;if(!i.removeListener)return 0===arguments.length?(this._events=new r$1,this._eventsCount=0):i[t]&&(0==--this._eventsCount?this._events=new r$1:delete i[t]),this;if(0===arguments.length){for(var n,s=Object.keys(i),a=0;a<s.length;++a)"removeListener"!==(n=s[a])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=new r$1,this._eventsCount=0,this}if("function"==typeof(e=i[t]))this.removeListener(t,e);else if(e)do{this.removeListener(t,e[e.length-1]);}while(e[0]);return this},i$1.prototype.listeners=function(t){var e,r=this._events;return r&&(e=r[t])?"function"==typeof e?[e.listener||e]:function(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}(e):[]},i$1.listenerCount=function(t,e){return "function"==typeof t.listenerCount?t.listenerCount(e):l.call(t,e)},i$1.prototype.listenerCount=l,i$1.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};var o$1=function(t){return t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}(Object.freeze({__proto__:null,default:i$1,EventEmitter:i$1}));const{EventEmitter:h$1}=o$1,d=new Error("Stream was destroyed"),p$1=new Error("Premature close"),f$1=e$1,_$2=i$7,c=134217727,S$1=1^c,m$1=16384,x$1=32768,b$1=768^c,w$1=134184959,y$1=2<<17,v$1=4<<17,g$1=8<<17,k$1=32<<17,T$1=64<<17,L$1=128<<17,N$1=512<<17,E$1=100532223,P$1=117440511,W$1=131088,C$1=4210688,M$1=4210702,A$1=16809984,q$1=16809999,U$1=1179663,O$1=Symbol.asyncIterator||Symbol("asyncIterator");let R$1 = class R{constructor(t,{highWaterMark:e=16384,map:r=null,mapWritable:i,byteLength:n,byteLengthWritable:s}={}){this.stream=t,this.queue=new _$2,this.highWaterMark=e,this.buffered=0,this.error=null,this.pipeline=null,this.drains=null,this.byteLength=s||n||at$1,this.map=i||r,this.afterWrite=K$1.bind(this),this.afterUpdateNextTick=J$1.bind(this);}get ended(){return 0!=(this.stream._duplexState&k$1)}push(t){return null!==this.map&&(t=this.map(t)),this.buffered+=this.byteLength(t),this.queue.push(t),this.buffered<this.highWaterMark?(this.stream._duplexState|=g$1,!0):(this.stream._duplexState|=3145728,!1)}shift(){const t=this.queue.shift();return this.buffered-=this.byteLength(t),0===this.buffered&&(this.stream._duplexState&=133169151),t}end(t){"function"==typeof t?this.stream.once("finish",t):null!=t&&this.push(t),this.stream._duplexState=133693439&(this.stream._duplexState|N$1);}autoBatch(t,e){const r=[],i=this.stream;for(r.push(t);1179648==(i._duplexState&U$1);)r.push(i._writableState.shift());if(0!=(15&i._duplexState))return e(null);i._writev(r,e);}update(){const t=this.stream;t._duplexState|=y$1;do{for(;(t._duplexState&U$1)===g$1;){const e=this.shift();t._duplexState|=33685504,t._write(e,this.afterWrite);}0==(655360&t._duplexState)&&this.updateNonPrimary();}while(!0===this.continueUpdate());t._duplexState&=133955583;}updateNonPrimary(){const t=this.stream;if((72482831&t._duplexState)===N$1)return t._duplexState=67108863&(131072|t._duplexState),void t._final(I$1.bind(this));4!=(14&t._duplexState)?1==(t._duplexState&q$1)&&(t._duplexState=(t._duplexState|W$1)&S$1,t._open(Q$1.bind(this))):0==(t._duplexState&A$1)&&(t._duplexState|=W$1,t._destroy(z$1.bind(this)));}continueUpdate(){return 0!=(this.stream._duplexState&L$1)&&(this.stream._duplexState&=P$1,!0)}updateCallback(){(17563663&this.stream._duplexState)===v$1?this.update():this.updateNextTick();}updateNextTick(){0==(this.stream._duplexState&L$1)&&(this.stream._duplexState|=L$1,0==(this.stream._duplexState&y$1)&&f$1(this.afterUpdateNextTick));}};let j$1 = class j{constructor(t,{highWaterMark:e=16384,map:r=null,mapReadable:i,byteLength:n,byteLengthReadable:s}={}){this.stream=t,this.queue=new _$2,this.highWaterMark=e,this.buffered=0,this.error=null,this.pipeline=null,this.byteLength=s||n||at$1,this.map=i||r,this.pipeTo=null,this.afterRead=G$1.bind(this),this.afterUpdateNextTick=H$1.bind(this);}get ended(){return 0!=(this.stream._duplexState&m$1)}pipe(t,e){if(null!==this.pipeTo)throw new Error("Can only pipe to one destination");if("function"!=typeof e&&(e=null),this.stream._duplexState|=512,this.pipeTo=t,this.pipeline=new F$1(this.stream,t,e),e&&this.stream.on("error",lt$1),st$1(t))t._writableState.pipeline=this.pipeline,e&&t.on("error",lt$1),t.on("finish",this.pipeline.finished.bind(this.pipeline));else {const e=this.pipeline.done.bind(this.pipeline,t),r=this.pipeline.done.bind(this.pipeline,t,null);t.on("error",e),t.on("close",r),t.on("finish",this.pipeline.finished.bind(this.pipeline));}t.on("drain",B$1.bind(this)),this.stream.emit("piping",t),t.emit("pipe",this.stream);}push(t){const e=this.stream;return null===t?(this.highWaterMark=0,e._duplexState=134152127&(1024|e._duplexState),!1):(null!==this.map&&(t=this.map(t)),this.buffered+=this.byteLength(t),this.queue.push(t),e._duplexState=134152191&(128|e._duplexState),this.buffered<this.highWaterMark)}shift(){const t=this.queue.shift();return this.buffered-=this.byteLength(t),0===this.buffered&&(this.stream._duplexState&=134209407),t}unshift(t){const e=[null!==this.map?this.map(t):t];for(;this.buffered>0;)e.push(this.shift());for(let t=0;t<e.length-1;t++){const r=e[t];this.buffered+=this.byteLength(r),this.queue.push(r);}this.push(e[e.length-1]);}read(){const t=this.stream;if(128==(16527&t._duplexState)){const e=this.shift();return null!==this.pipeTo&&!1===this.pipeTo.write(e)&&(t._duplexState&=b$1),0!=(2048&t._duplexState)&&t.emit("data",e),e}return null}drain(){const t=this.stream;for(;128==(16527&t._duplexState)&&0!=(768&t._duplexState);){const e=this.shift();null!==this.pipeTo&&!1===this.pipeTo.write(e)&&(t._duplexState&=b$1),0!=(2048&t._duplexState)&&t.emit("data",e);}}update(){const t=this.stream;t._duplexState|=32;do{for(this.drain();this.buffered<this.highWaterMark&&0==(82975&t._duplexState);)t._duplexState|=65552,t._read(this.afterRead),this.drain();4224==(12431&t._duplexState)&&(t._duplexState|=8192,t.emit("readable")),0==(80&t._duplexState)&&this.updateNonPrimary();}while(!0===this.continueUpdate());t._duplexState&=134217695;}updateNonPrimary(){const t=this.stream;1024==(1167&t._duplexState)&&(t._duplexState=134216703&(t._duplexState|m$1),t.emit("end"),(t._duplexState&M$1)===C$1&&(t._duplexState|=4),null!==this.pipeTo&&this.pipeTo.end()),4!=(14&t._duplexState)?1==(t._duplexState&q$1)&&(t._duplexState=(t._duplexState|W$1)&S$1,t._open(Q$1.bind(this))):0==(t._duplexState&A$1)&&(t._duplexState|=W$1,t._destroy(z$1.bind(this)));}continueUpdate(){return 0!=(this.stream._duplexState&x$1)&&(this.stream._duplexState&=w$1,!0)}updateCallback(){64==(32879&this.stream._duplexState)?this.update():this.updateNextTick();}updateNextTick(){0==(this.stream._duplexState&x$1)&&(this.stream._duplexState|=x$1,0==(32&this.stream._duplexState)&&f$1(this.afterUpdateNextTick));}};let D$1 = class D{constructor(t){this.data=null,this.afterTransform=V$1.bind(t),this.afterFinal=null;}};let F$1 = class F{constructor(t,e,r){this.from=t,this.to=e,this.afterPipe=r,this.error=null,this.pipeToFinished=!1;}finished(){this.pipeToFinished=!0;}done(t,e){e&&(this.error=e),t!==this.to||(this.to=null,null===this.from)?t!==this.from||(this.from=null,null===this.to)?(null!==this.afterPipe&&this.afterPipe(this.error),this.to=this.from=this.afterPipe=null):0==(t._duplexState&m$1)&&this.to.destroy(this.error||new Error("Readable stream closed before ending")):0!=(this.from._duplexState&m$1)&&this.pipeToFinished||this.from.destroy(this.error||new Error("Writable stream closed prematurely"));}};function B$1(){this.stream._duplexState|=512,this.updateCallback();}function I$1(t){const e=this.stream;t&&e.destroy(t),0==(14&e._duplexState)&&(e._duplexState|=k$1,e.emit("finish")),(e._duplexState&M$1)===C$1&&(e._duplexState|=4),e._duplexState&=E$1,0==(e._duplexState&y$1)?this.update():this.updateNextTick();}function z$1(t){const e=this.stream;t||this.error===d||(t=this.error),t&&e.emit("error",t),e._duplexState|=8,e.emit("close");const r=e._readableState,i=e._writableState;if(null!==r&&null!==r.pipeline&&r.pipeline.done(e,t),null!==i){for(;null!==i.drains&&i.drains.length>0;)i.drains.shift().resolve(!1);null!==i.pipeline&&i.pipeline.done(e,t);}}function K$1(t){const e=this.stream;t&&e.destroy(t),e._duplexState&=E$1,null!==this.drains&&function(t){for(let e=0;e<t.length;e++)0==--t[e].writes&&(t.shift().resolve(!0),e--);}(this.drains),2097152==(3276815&e._duplexState)&&(e._duplexState&=132120575,(e._duplexState&T$1)===T$1&&e.emit("drain")),this.updateCallback();}function G$1(t){t&&this.stream.destroy(t),this.stream._duplexState&=134217711,this.updateCallback();}function H$1(){0==(32&this.stream._duplexState)&&(this.stream._duplexState&=w$1,this.update());}function J$1(){0==(this.stream._duplexState&y$1)&&(this.stream._duplexState&=P$1,this.update());}function Q$1(t){const e=this.stream;t&&e.destroy(t),0==(4&e._duplexState)&&(0==(17423&e._duplexState)&&(e._duplexState|=64),0==(71303183&e._duplexState)&&(e._duplexState|=v$1),e.emit("open")),e._duplexState&=134086639,null!==e._writableState&&e._writableState.updateCallback(),null!==e._readableState&&e._readableState.updateCallback();}function V$1(t,e){null!=e&&this.push(e),this._writableState.afterWrite(t);}function X$1(t){null!==this._readableState&&("data"===t&&(this._duplexState|=2304,this._readableState.updateNextTick()),"readable"===t&&(this._duplexState|=4096,this._readableState.updateNextTick())),null!==this._writableState&&"drain"===t&&(this._duplexState|=T$1,this._writableState.updateNextTick());}let Y$1 = class Y extends h$1{constructor(t){super(),this._duplexState=0,this._readableState=null,this._writableState=null,t&&(t.open&&(this._open=t.open),t.destroy&&(this._destroy=t.destroy),t.predestroy&&(this._predestroy=t.predestroy),t.signal&&t.signal.addEventListener("abort",ut$1.bind(this))),this.on("newListener",X$1);}_open(t){t(null);}_destroy(t){t(null);}_predestroy(){}get readable(){return null!==this._readableState||void 0}get writable(){return null!==this._writableState||void 0}get destroyed(){return 0!=(8&this._duplexState)}get destroying(){return 0!=(14&this._duplexState)}destroy(t){0==(14&this._duplexState)&&(t||(t=d),this._duplexState=133693375&(4|this._duplexState),null!==this._readableState&&(this._readableState.highWaterMark=0,this._readableState.error=t),null!==this._writableState&&(this._writableState.highWaterMark=0,this._writableState.error=t),this._duplexState|=2,this._predestroy(),this._duplexState&=134217725,null!==this._readableState&&this._readableState.updateNextTick(),null!==this._writableState&&this._writableState.updateNextTick());}};let Z$1 = class Z extends Y$1{constructor(t){super(t),this._duplexState|=4194305,this._readableState=new j$1(this,t),t&&(t.read&&(this._read=t.read),t.eagerOpen&&this._readableState.updateNextTick());}_read(t){t(null);}pipe(t,e){return this._readableState.updateNextTick(),this._readableState.pipe(t,e),t}read(){return this._readableState.updateNextTick(),this._readableState.read()}push(t){return this._readableState.updateNextTick(),this._readableState.push(t)}unshift(t){return this._readableState.updateNextTick(),this._readableState.unshift(t)}resume(){return this._duplexState|=256,this._readableState.updateNextTick(),this}pause(){return this._duplexState&=134217471,this}static _fromAsyncIterator(t,e){let r;const i=new Z({...e,read(e){t.next().then(n).then(e.bind(null,null)).catch(e);},predestroy(){r=t.return();},destroy(t){if(!r)return t(null);r.then(t.bind(null,null)).catch(t);}});return i;function n(t){t.done?i.push(null):i.push(t.value);}}static from(t,e){if(st$1(r=t)&&r.readable)return t;var r;if(t[O$1])return this._fromAsyncIterator(t[O$1](),e);Array.isArray(t)||(t=void 0===t?[]:[t]);let i=0;return new Z({...e,read(e){this.push(i===t.length?null:t[i++]),e(null);}})}static isBackpressured(t){return 0!=(17422&t._duplexState)||t._readableState.buffered>=t._readableState.highWaterMark}static isPaused(t){return 0==(256&t._duplexState)}[O$1](){const t=this;let e=null,r=null,i=null;return this.on("error",(t=>{e=t;})),this.on("readable",(function(){null!==r&&n(t.read());})),this.on("close",(function(){null!==r&&n(null);})),{[O$1](){return this},next:()=>new Promise((function(e,s){r=e,i=s;const a=t.read();null!==a?n(a):0!=(8&t._duplexState)&&n(null);})),return:()=>s(null),throw:t=>s(t)};function n(n){null!==i&&(e?i(e):null===n&&0==(t._duplexState&m$1)?i(d):r({value:n,done:null===n}),i=r=null);}function s(e){return t.destroy(e),new Promise(((r,i)=>{if(8&t._duplexState)return r({value:void 0,done:!0});t.once("close",(function(){e?i(e):r({value:void 0,done:!0});}));}))}}};let $$1 = class $ extends Y$1{constructor(t){super(t),this._duplexState|=16385,this._writableState=new R$1(this,t),t&&(t.writev&&(this._writev=t.writev),t.write&&(this._write=t.write),t.final&&(this._final=t.final),t.eagerOpen&&this._writableState.updateNextTick());}_writev(t,e){e(null);}_write(t,e){this._writableState.autoBatch(t,e);}_final(t){t(null);}static isBackpressured(t){return 0!=(73400334&t._duplexState)}static drained(t){if(t.destroyed)return Promise.resolve(!1);const e=t._writableState;var r;const i=((r=t)._writev!==$.prototype._writev&&r._writev!==tt$1.prototype._writev?Math.min(1,e.queue.length):e.queue.length)+(33554432&t._duplexState?1:0);return 0===i?Promise.resolve(!0):(null===e.drains&&(e.drains=[]),new Promise((t=>{e.drains.push({writes:i,resolve:t});})))}write(t){return this._writableState.updateNextTick(),this._writableState.push(t)}end(t){return this._writableState.updateNextTick(),this._writableState.end(t),this}};let tt$1 = class tt extends Z$1{constructor(t){super(t),this._duplexState=1,this._writableState=new R$1(this,t),t&&(t.writev&&(this._writev=t.writev),t.write&&(this._write=t.write),t.final&&(this._final=t.final));}_writev(t,e){e(null);}_write(t,e){this._writableState.autoBatch(t,e);}_final(t){t(null);}write(t){return this._writableState.updateNextTick(),this._writableState.push(t)}end(t){return this._writableState.updateNextTick(),this._writableState.end(t),this}};let et$1 = class et extends tt$1{constructor(t){super(t),this._transformState=new D$1(this),t&&(t.transform&&(this._transform=t.transform),t.flush&&(this._flush=t.flush));}_write(t,e){this._readableState.buffered>=this._readableState.highWaterMark?this._transformState.data=t:this._transform(t,this._transformState.afterTransform);}_read(t){if(null!==this._transformState.data){const e=this._transformState.data;this._transformState.data=null,t(null),this._transform(e,this._transformState.afterTransform);}else t(null);}destroy(t){super.destroy(t),null!==this._transformState.data&&(this._transformState.data=null,this._transformState.afterTransform());}_transform(t,e){e(null,t);}_flush(t){t(null);}_final(t){this._transformState.afterFinal=t,this._flush(rt$1.bind(this));}};function rt$1(t,e){const r=this._transformState.afterFinal;if(t)return r(t);null!=e&&this.push(e),this.push(null),r(null);}function it$1(t,...e){const r=Array.isArray(t)?[...t,...e]:[t,...e],i=r.length&&"function"==typeof r[r.length-1]?r.pop():null;if(r.length<2)throw new Error("Pipeline requires at least 2 streams");let n=r[0],s=null,a=null;for(let t=1;t<r.length;t++)s=r[t],st$1(n)?n.pipe(s,u):(l(n,!0,t>1,u),n.pipe(s)),n=s;if(i){let t=!1;const e=st$1(s)||!(!s._writableState||!s._writableState.autoDestroy);s.on("error",(t=>{null===a&&(a=t);})),s.on("finish",(()=>{t=!0,e||i(a);})),e&&s.on("close",(()=>i(a||(t?null:p$1))));}return s;function l(t,e,r,i){t.on("error",i),t.on("close",(function(){return e&&t._readableState&&!t._readableState.ended||r&&t._writableState&&!t._writableState.ended?i(p$1):void 0}));}function u(t){if(t&&!a){a=t;for(const e of r)e.destroy(t);}}}function nt$1(t){return !!t._readableState||!!t._writableState}function st$1(t){return "number"==typeof t._duplexState&&nt$1(t)}function at$1(t){return function(t){return "object"==typeof t&&null!==t&&"number"==typeof t.byteLength}(t)?t.byteLength:1024}function lt$1(){}function ut$1(){this.destroy(new Error("Stream aborted."));}var ot$1={pipeline:it$1,pipelinePromise:function(...t){return new Promise(((e,r)=>it$1(...t,(t=>{if(t)return r(t);e();}))))},isStream:nt$1,isStreamx:st$1,getStreamError:function(t){const e=t._readableState&&t._readableState.error||t._writableState&&t._writableState.error;return e===d?null:e},Stream:Y$1,Writable:$$1,Readable:Z$1,Duplex:tt$1,Transform:et$1,PassThrough:class extends et$1{}};

var _$1={exports:{}};function p(){}function f(){f.init.call(this);}function m(e){return void 0===e._maxListeners?f.defaultMaxListeners:e._maxListeners}function y(e,t,n,s){var i,o,r,c;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((o=e._events)?(o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),r=o[t]):(o=e._events=new p,e._eventsCount=0),r){if("function"==typeof r?r=o[t]=s?[n,r]:[r,n]:s?r.unshift(n):r.push(n),!r.warned&&(i=m(e))&&i>0&&r.length>i){r.warned=!0;var d=new Error("Possible EventEmitter memory leak detected. "+r.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit");d.name="MaxListenersExceededWarning",d.emitter=e,d.type=t,d.count=r.length,c=d,"function"==typeof console.warn?console.warn(c):console.log(c);}}else r=o[t]=n,++e._eventsCount;return e}function g(e,t,n){var s=!1;function i(){e.removeListener(t,i),s||(s=!0,n.apply(e,arguments));}return i.listener=n,i}function b(e){var t=this._events;if(t){var n=t[e];if("function"==typeof n)return 1;if(n)return n.length}return 0}function v(e,t){for(var n=new Array(t);t--;)n[t]=e[t];return n}p.prototype=Object.create(null),f.EventEmitter=f,f.usingDomains=!1,f.prototype.domain=void 0,f.prototype._events=void 0,f.prototype._maxListeners=void 0,f.defaultMaxListeners=10,f.init=function(){this.domain=null,f.usingDomains&&(void 0).active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new p,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0;},f.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},f.prototype.getMaxListeners=function(){return m(this)},f.prototype.emit=function(e){var t,n,s,i,o,r,c,d="error"===e;if(r=this._events)d=d&&null==r.error;else if(!d)return !1;if(c=this.domain,d){if(t=arguments[1],!c){if(t instanceof Error)throw t;var a=new Error('Uncaught, unspecified "error" event. ('+t+")");throw a.context=t,a}return t||(t=new Error('Uncaught, unspecified "error" event')),t.domainEmitter=this,t.domain=c,t.domainThrown=!1,c.emit("error",t),!1}if(!(n=r[e]))return !1;var h="function"==typeof n;switch(s=arguments.length){case 1:!function(e,t,n){if(t)e.call(n);else for(var s=e.length,i=v(e,s),o=0;o<s;++o)i[o].call(n);}(n,h,this);break;case 2:!function(e,t,n,s){if(t)e.call(n,s);else for(var i=e.length,o=v(e,i),r=0;r<i;++r)o[r].call(n,s);}(n,h,this,arguments[1]);break;case 3:!function(e,t,n,s,i){if(t)e.call(n,s,i);else for(var o=e.length,r=v(e,o),c=0;c<o;++c)r[c].call(n,s,i);}(n,h,this,arguments[1],arguments[2]);break;case 4:!function(e,t,n,s,i,o){if(t)e.call(n,s,i,o);else for(var r=e.length,c=v(e,r),d=0;d<r;++d)c[d].call(n,s,i,o);}(n,h,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(s-1),o=1;o<s;o++)i[o-1]=arguments[o];!function(e,t,n,s){if(t)e.apply(n,s);else for(var i=e.length,o=v(e,i),r=0;r<i;++r)o[r].apply(n,s);}(n,h,this,i);}return !0},f.prototype.addListener=function(e,t){return y(this,e,t,!1)},f.prototype.on=f.prototype.addListener,f.prototype.prependListener=function(e,t){return y(this,e,t,!0)},f.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,g(this,e,t)),this},f.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,g(this,e,t)),this},f.prototype.removeListener=function(e,t){var n,s,i,o,r;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(s=this._events))return this;if(!(n=s[e]))return this;if(n===t||n.listener&&n.listener===t)0==--this._eventsCount?this._events=new p:(delete s[e],s.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length;o-- >0;)if(n[o]===t||n[o].listener&&n[o].listener===t){r=n[o].listener,i=o;break}if(i<0)return this;if(1===n.length){if(n[0]=void 0,0==--this._eventsCount)return this._events=new p,this;delete s[e];}else !function(e,t){for(var n=t,s=n+1,i=e.length;s<i;n+=1,s+=1)e[n]=e[s];e.pop();}(n,i);s.removeListener&&this.emit("removeListener",e,r||t);}return this},f.prototype.off=function(e,t){return this.removeListener(e,t)},f.prototype.removeAllListeners=function(e){var t,n;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=new p,this._eventsCount=0):n[e]&&(0==--this._eventsCount?this._events=new p:delete n[e]),this;if(0===arguments.length){for(var s,i=Object.keys(n),o=0;o<i.length;++o)"removeListener"!==(s=i[o])&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=new p,this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(t)do{this.removeListener(e,t[t.length-1]);}while(t[0]);return this},f.prototype.listeners=function(e){var t,n=this._events;return n&&(t=n[e])?"function"==typeof t?[t.listener||t]:function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(t):[]},f.listenerCount=function(e,t){return "function"==typeof e.listenerCount?e.listenerCount(t):b.call(e,t)},f.prototype.listenerCount=b,f.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};var K=function(e){return e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}(Object.freeze({__proto__:null,default:f,EventEmitter:f}));const{fixed32:k,fixed64:w,uint32:A,buffer:S,array:P}=t$6,{ipv4Address:I}=p$9,{alloc:x}=L$6,C={...S,decode(e){const t=S.decode(e);return null===t?x(0):t}},M=k,L=w,E=k,N=S,R=A,U=P(C),D=k,H={preencode(e,t){N.preencode(e,t.id),I.preencode(e,t);},encode(e,t){N.encode(e,t.id),I.encode(e,t);},decode:e=>({id:N.decode(e),...I.decode(e)})},O=P(I),q={preencode(e,t){M.preencode(e,t.publicKey),O.preencode(e,t.relayAddresses);},encode(e,t){M.encode(e,t.publicKey),O.encode(e,t.relayAddresses);},decode:e=>({publicKey:M.decode(e),relayAddresses:O.decode(e)})},T=P(q),F={preencode(e,t){D.preencode(e,t.token),H.preencode(e,t.from),H.preencode(e,t.to),T.preencode(e,t.peers);},encode(e,t){D.encode(e,t.token),H.encode(e,t.from),H.encode(e,t.to),T.encode(e,t.peers);},decode:e=>({token:D.decode(e),from:H.decode(e),to:H.decode(e),peers:T.decode(e)})};var Q={buffer:C,publicKey:M,secretKey:L,topic:E,peerId:N,id:R,batch:U,token:D,node:H,relayAddresses:O,peer:q,peers:T,announcers:F};const{fixed32:j,fixed64:W,none:Y,string:B}=t$6,{ipv4Address:z}=p$9,{buffer:G,publicKey:J,secretKey:V,id:X,batch:Z,topic:$,peerId:ee,token:te,relayAddresses:ne}=Q,se={preencode(e,t){e.end++,J.preencode(e,t.publicKey),t.custodial&&V.preencode(e,t.secretKey);},encode(e,t){const n=e.start++;let s=0;J.encode(e,t.publicKey),t.custodial&&(s|=1,V.encode(e,t.secretKey)),e.buffer[n]=s;},decode(e){const t=0!=(1&e.buffer[e.start++]);return {custodial:t,publicKey:J.decode(e),secretKey:t?V.decode(e):null}}},ie={preencode(e,t){e.end++,X.preencode(e,t.alias),J.preencode(e,t.publicKey),t.custodial&&V.preencode(e,t.secretKey),J.preencode(e,t.remotePublicKey);},encode(e,t){const n=e.start++;let s=0;X.encode(e,t.alias),J.encode(e,t.publicKey),t.custodial&&(s|=1,V.encode(e,t.secretKey)),e.buffer[n]=s,J.encode(e,t.remotePublicKey);},decode(e){const t=0!=(1&e.buffer[e.start++]);return {custodial:t,alias:X.decode(e),publicKey:J.decode(e),secretKey:t?V.decode(e):null,remotePublicKey:J.decode(e)}}},oe={preencode(e,t){e.end++,X.preencode(e,t.alias),X.preencode(e,t.serverAlias),J.preencode(e,t.remotePublicKey),t.custodial?W.preencode(e,t.handshakeHash):X.preencode(e,t.handshakeId);},encode(e,t){const n=e.start++;let s=0;X.encode(e,t.alias),X.encode(e,t.serverAlias),J.encode(e,t.remotePublicKey),t.custodial?(s|=1,W.encode(e,t.handshakeHash)):X.encode(e,t.handshakeId),e.buffer[n]=s;},decode(e){const t=0!=(1&e.buffer[e.start++]);return {custodial:t,alias:X.decode(e),serverAlias:X.decode(e),remotePublicKey:J.decode(e),handshakeHash:t?W.decode(e):null,handshakeId:t?null:X.decode(e)}}},re={preencode(e,t){X.preencode(e,t.alias),X.preencode(e,t.remoteAlias);},encode(e,t){X.encode(e,t.alias),X.encode(e,t.remoteAlias);},decode:e=>({alias:X.decode(e),remoteAlias:X.decode(e)})},ce={preencode(e,t){X.preencode(e,t.id),X.preencode(e,t.serverAlias),J.preencode(e,t.remotePublicKey),G.preencode(e,t.payload);},encode(e,t){X.encode(e,t.id),X.encode(e,t.serverAlias),J.encode(e,t.remotePublicKey),G.encode(e,t.payload);},decode:e=>({id:X.decode(e),serverAlias:X.decode(e),remotePublicKey:J.decode(e),payload:G.decode(e)})},de={preencode(e,t){X.preencode(e,t.id);},encode(e,t){X.encode(e,t.id);},decode:e=>({id:X.decode(e)})},ae={preencode(e,t){e.end++,t.paired?X.preencode(e,t.alias):X.preencode(e,t.remoteAlias),t.error&&B.preencode(e,t.error);},encode(e,t){const n=e.start++;let s=0;t.paired?(s|=1,X.encode(e,t.alias)):X.encode(e,t.remoteAlias),t.error&&(s|=2,B.encode(e,t.error)),e.buffer[n]=s;},decode(e){const t=e.buffer[e.start++],n=0!=(1&t);return {paired:n,alias:n?X.decode(e):null,remoteAlias:n?null:X.decode(e),error:0==(2&t)?null:B.decode(e)}}},he={preencode(e,t){e.end++,X.preencode(e,t.server),J.preencode(e,t.publicKey),t.custodial&&V.preencode(e,t.secretKey);},encode(e,t){const n=e.start++;let s=0;X.encode(e,t.alias),J.encode(e,t.publicKey),t.custodial&&(s|=1,V.encode(e,t.secretKey)),e.buffer[n]=s;},decode(e){const t=0!=(1&e.buffer[e.start++]);return {custodial:t,alias:X.decode(e),publicKey:J.decode(e),secretKey:t?V.decode(e):null}}},le={preencode(e,t){X.preencode(e,t.alias),X.preencode(e,t.remoteAlias),z.preencode(e,t);},encode(e,t){X.encode(e,t.alias),X.encode(e,t.remoteAlias),z.encode(e,t);},decode:e=>({alias:X.decode(e),remoteAlias:X.decode(e),...z.decode(e)})},ue={preencode(e,t){X.preencode(e,t.alias);},encode(e,t){X.encode(e,t.alias);},decode:e=>({alias:X.decode(e)})},_e={preencode(e,t){e.end++,X.preencode(e,t.alias),X.preencode(e,t.remoteAlias),t.custodial?W.preencode(e,t.handshakeHash):X.preencode(e,t.handshakeId);},encode(e,t){const n=e.start++;let s=0;X.encode(e,t.alias),X.encode(e,t.remoteAlias),t.custodial?(s|=1,W.encode(e,t.handshakeHash)):X.encode(e,t.handshakeId),e.buffer[n]=s;},decode(e){const t=0!=(1&e.buffer[e.start++]);return {custodial:t,alias:X.decode(e),remoteAlias:X.decode(e),handshakeHash:t?W.decode(e):null,handshakeId:t?null:X.decode(e)}}},pe={preencode(e,t){X.preencode(e,t.alias);},encode(e,t){X.encode(e,t.alias);},decode:e=>({alias:X.decode(e)})},fe={preencode(e,t){X.preencode(e,t.alias),Z.preencode(e,t.data);},encode(e,t){X.encode(e,t.alias),Z.encode(e,t.data);},decode:e=>({alias:X.decode(e),data:Z.decode(e)})},me={preencode(e,t){X.preencode(e,t.id),G.preencode(e,t.data);},encode(e,t){X.encode(e,t.id),G.encode(e,t.data);},decode:e=>({id:X.decode(e),data:G.decode(e)})},ye={preencode(e,t){X.preencode(e,t.id);},encode(e,t){X.encode(e,t.id);},decode:e=>({id:X.decode(e)})},ge={preencode(e,t){X.preencode(e,t.id),$.preencode(e,t.topic);},encode(e,t){X.encode(e,t.id),$.encode(e,t.topic);},decode:e=>({id:X.decode(e),topic:$.decode(e)})},be={preencode(e,t){e.end++,X.preencode(e,t.id),$.preencode(e,t.topic),J.preencode(e,t.publicKey),t.custodial&&V.preencode(e,t.secretKey);},encode(e,t){const n=e.start++;let s=0;X.encode(e,t.id),$.encode(e,t.topic),J.encode(e,t.publicKey),t.custodial&&(s|=1,V.encode(e,t.secretKey)),e.buffer[n]=s;},decode(e){const t=0!=(1&e.buffer[e.start++]);return {custodial:t,id:X.decode(e),topic:$.decode(e),publicKey:J.decode(e),secretKey:t?V.decode(e):null}}},ve={preencode(e,t){X.preencode(e,t.id),X.preencode(e,t.signee),te.preencode(e,t.token),ee.preencode(e,t.peerId),ne.preencode(e,t.relayAddresses);},encode(e,t){X.encode(e,t.id),X.encode(e,t.signee),te.encode(e,t.token),ee.encode(e,t.peerId),ne.encode(e,t.relayAddresses);},decode:e=>({id:X.decode(e),signee:X.decode(e),token:te.decode(e),peerId:ee.decode(e),relayAddresses:ne.decode(e)})},Ke={preencode(e,t){X.preencode(e,t.id),G.preencode(e,t.signature);},encode(e,t){X.encode(e,t.id),G.encode(e,t.signature);},decode:e=>({id:X.decode(e),signature:G.decode(e)})},ke={preencode(e,t){e.end++,X.preencode(e,t.id),t.isInitiator&&X.preencode(e,t.remoteStreamAlias),G.preencode(e,t.payload);},encode(e,t){const n=e.start++;let s=0;X.encode(e,t.id),t.isInitiator&&(s|=1,X.encode(e,t.remoteStreamAlias)),G.encode(e,t.payload),e.buffer[n]=s;},decode(e){const t=0!=(1&e.buffer[e.start++]);return {isInitiator:t,id:X.decode(e),remoteStreamAlias:t?X.decode(e):null,payload:G.decode(e)}}},we={preencode(e,t){e.end++,X.preencode(e,t.id),t.isInitiator||X.preencode(e,t.serverAlias),G.preencode(e,t.payload);},encode(e,t){const n=e.start++;let s=0;X.encode(e,t.id),t.isInitiator?s|=1:X.encode(e,t.serverAlias),G.encode(e,t.payload),e.buffer[n]=s;},decode(e){const t=0!=(1&e.buffer[e.start++]);return {isInitiator:t,id:X.decode(e),serverAlias:t?null:X.decode(e),payload:G.decode(e)}}},Ae={preencode(e,t){e.end++,X.preencode(e,t.id),G.preencode(e,t.payload),t.isInitiator||t.complete||J.preencode(e,t.remotePublicKey),t.complete&&(j.preencode(e,t.remoteId),j.preencode(e,t.holepunchSecret));},encode(e,t){const n=e.start++;let s=0;X.encode(e,t.id),G.encode(e,t.payload),t.isInitiator&&(s|=1),t.isInitiator||t.complete||J.encode(e,t.remotePublicKey),t.complete&&(s|=2,j.encode(e,t.remoteId),j.encode(e,t.holepunchSecret)),e.buffer[n]=s;},decode(e){const t=e.buffer[e.start++],n=0!=(1&t),s=0!=(2&t);return {isInitiator:n,complete:s,id:X.decode(e),payload:G.decode(e),remotePublicKey:n||s?null:J.decode(e),remoteId:s?j.decode(e):null,holepunchSecret:s?j.decode(e):null}}},Se=K,Pe=d$5,Ie={handshake:se,ping:Y,pong:Y,connect:ie,connection:oe,connected:re,incoming:ce,deny:de,accept:de,destroy:ae,listen:he,listening:le,close:ue,closed:ue,open:_e,end:pe,data:fe,result:me,finished:ye,lookup:ge,announce:be,unannounce:be,signAnnounce:ve,signUnannounce:ve,signature:Ke,noiseSend:ke,noiseReceive:we,noiseReply:Ae};var xe={Protocol:class extends Se{constructor(e){super();const t=Pe.from(e);this._stream=t.stream.setMaxListeners(0),this._heartbeat=null,this._failsafe=null,this._onStreamClose=Ce.bind(this),this._stream.once("close",this._onStreamClose);const n=new Promise(((e,t)=>{const n=()=>{this._stream.off("error",s),e();},s=e=>{this._stream.off("open",n),t(e);};this._stream.once("open",n).once("error",s);}));this.ready=async function(){await n;};const s=t.createChannel({protocol:"@hyperswarm/dht-relay"});this.handshake=s.addMessage({encoding:Ie.handshake,onmessage:this.emit.bind(this,"handshake")}),this.ping=s.addMessage({encoding:Ie.ping,onmessage:()=>{this.pong.send(),this.alive();}}),this.pong=s.addMessage({encoding:Ie.pong,onmessage:()=>{this.alive();}}),this.connect=s.addMessage({encoding:Ie.connect,onmessage:this.emit.bind(this,"connect")}),this.connection=s.addMessage({encoding:Ie.connection,onmessage:this.emit.bind(this,"connection")}),this.connected=s.addMessage({encoding:Ie.connected,onmessage:this.emit.bind(this,"connected")}),this.incoming=s.addMessage({encoding:Ie.incoming,onmessage:this.emit.bind(this,"incoming")}),this.deny=s.addMessage({encoding:Ie.deny,onmessage:this.emit.bind(this,"deny")}),this.accept=s.addMessage({encoding:Ie.accept,onmessage:this.emit.bind(this,"accept")}),this.destroy=s.addMessage({encoding:Ie.destroy,onmessage:this.emit.bind(this,"destroy")}),this.listen=s.addMessage({encoding:Ie.listen,onmessage:this.emit.bind(this,"listen")}),this.listening=s.addMessage({encoding:Ie.listening,onmessage:this.emit.bind(this,"listening")}),this.close=s.addMessage({encoding:Ie.close,onmessage:this.emit.bind(this,"close")}),this.closed=s.addMessage({encoding:Ie.closed,onmessage:this.emit.bind(this,"closed")}),this.open=s.addMessage({encoding:Ie.open,onmessage:this.emit.bind(this,"open")}),this.end=s.addMessage({encoding:Ie.end,onmessage:this.emit.bind(this,"end")}),this.data=s.addMessage({encoding:Ie.data,onmessage:this.emit.bind(this,"data")}),this.result=s.addMessage({encoding:Ie.result,onmessage:this.emit.bind(this,"result")}),this.finished=s.addMessage({encoding:Ie.finished,onmessage:this.emit.bind(this,"finished")}),this.lookup=s.addMessage({encoding:Ie.lookup,onmessage:this.emit.bind(this,"lookup")}),this.announce=s.addMessage({encoding:Ie.announce,onmessage:this.emit.bind(this,"announce")}),this.unannounce=s.addMessage({encoding:Ie.unannounce,onmessage:this.emit.bind(this,"unannounce")}),this.signAnnounce=s.addMessage({encoding:Ie.signAnnounce,onmessage:this.emit.bind(this,"signAnnounce")}),this.signUnannounce=s.addMessage({encoding:Ie.signUnannounce,onmessage:this.emit.bind(this,"signUnannounce")}),this.signature=s.addMessage({encoding:Ie.signature,onmessage:this.emit.bind(this,"signature")}),this.noiseSend=s.addMessage({encoding:Ie.noiseSend,onmessage:this.emit.bind(this,"noiseSend")}),this.noiseReceive=s.addMessage({encoding:Ie.noiseReceive,onmessage:this.emit.bind(this,"noiseReceive")}),this.noiseReply=s.addMessage({encoding:Ie.noiseReply,onmessage:this.emit.bind(this,"noiseReply")}),s.open();}heartbeat(){return this._heartbeat||(this._heartbeat=setInterval((()=>this.ping.send()),15e3)),this}alive(){return this._failsafe&&clearTimeout(this._failsafe),this._failsafe=setTimeout((()=>this._stream.destroy()),45e3),this}}};function Ce(){clearInterval(this._heartbeat),this._failsafe&&clearTimeout(this._failsafe);}const Me=L$6,Le=st$2,Ee=H$2,{NS:Ne}=N$2,Re=p$3,Ue=m$5,{decode:De}=t$6,{noisePayload:He}=n$2,Oe=r$9,qe=Ne.PEER_HANDSHAKE;var Te={Handshake:class{constructor(e,t,n,s,i,o,r){this._node=e,this._protocol=t,this._firewall=n,this._id=s,this.isInitiator=i,this.keyPair=o,this.remotePublicKey=r,this.remoteId=null,this.holepunchSecret=null,this.complete=!1,this._handshake=new Le("IK",i,o,{curve:Re}),this._handshake.initialise(qe,r),this._onComplete=Fe.bind(this),this._onNoise=Qe.bind(this),this._onNoiseSend=je.bind(this),this._onNoiseReceive=We.bind(this);}get hash(){return this._handshake.hash}get tx(){return this._handshake.tx}get rx(){return this._handshake.rx}}};function Fe(){this.complete=!0;const e=this._handshake.hash;this.remoteId=Ee.id(e,!0),this.holepunchSecret=Me.allocUnsafe(32),Ue.crypto_generichash(this.holepunchSecret,Ne.PEER_HOLEPUNCH,e);}function Qe(e){if(this._handshake.complete)this._onComplete();else if(this.remotePublicKey=this._handshake.rs,this._firewall){const t=De(He,e);let n=!0;try{n=this._firewall._deny(this.remotePublicKey,t);}catch(e){Oe(e);}if(n)return this._node._handshakes.delete(this._id),this._protocol.noiseReply.send({id:this._id,payload:null,remotePublicKey:this.remotePublicKey})}this._protocol.noiseReply.send({id:this._id,payload:e,isInitiator:this.isInitiator,complete:this.complete,remoteId:this.remoteId,holepunchSecret:this.holepunchSecret,remotePublicKey:this.remotePublicKey});}function je(e){this._onNoise(this._handshake.send(e.payload));}function We(e){this._onNoise(this._handshake.recv(e.payload));}var Ye={nextId:function(e,t=1,n=2**32){let s=e;return function(){const i=s;return s+=t,s>=n&&(s=e),i}}(1)};const{Readable:Be}=ot$1,{nextId:ze}=Ye;var Ge={Query:class extends Be{constructor(e,t,n){super({map:Je(n)}),this._protocol=e,this.target=t,this.id=ze(),this._onStreamClose=Ve.bind(this),this._protocol._stream.once("close",this._onStreamClose),this._onResult=Xe.bind(this),this._onFinished=Ze.bind(this);const s=new Promise(((e,t)=>{const n=()=>{this.off("error",s),e();},s=e=>{this.off("close",n),t(e);};this.once("close",n).once("error",s);}));this.finished=async function(){await s;};}}};function Je(e){return function(t){return e.decode({start:0,end:t.byteLength,buffer:t})}}function Ve(){this.destroy();}function Xe(e){this.push(e.data);}function Ze(){this.push(null);}const{noisePayload:$e}=n$2,{decode:et}=t$6,tt=r$9;var nt={Firewall:class{constructor(e,t,n){this._node=e,this._protocol=t,this._deny=n,this._onIncoming=st.bind(this);}}};async function st(e){const t=et($e,e.payload);let n=!0;try{n=await this._deny(e.remotePublicKey,t);}catch(e){tt(e);}n?this._protocol.deny.send({id:e.id}):this._protocol.accept.send({id:e.id});}const it=L$6,ot=m$5,{NS:rt}=N$2,{encode:ct}=t$6,{peer:dt}=Q;var at={Signee:class{constructor(e,t,n){this._protocol=e,this._target=t,this._keyPair=n,this._onSignAnnounce=ht.bind(this),this._onSignUnannounce=lt.bind(this);}}};function ht(e){const t=ut(this._keyPair.publicKey,this._target,e.token,e.peerId,e.relayAddresses,rt.ANNOUNCE),n=it.allocUnsafe(64);ot.crypto_sign_detached(n,t,this._keyPair.secretKey),this._protocol.signature.send({id:e.id,signature:n});}function lt(e){const t=ut(this._keyPair.publicKey,this._target,e.token,e.peerId,e.relayAddresses,rt.UNANNOUNCE),n=it.allocUnsafe(64);ot.crypto_sign_detached(n,t,this._keyPair.secretKey),this._protocol.signature.send({id:e.id,signature:n});}function ut(e,t,n,s,i,o){const r=it.allocUnsafe(64),c=r.subarray(32);return r.set(o),ot.crypto_generichash_batch(c,[t,s,n,ct(dt,{publicKey:e,relayAddresses:i})]),r}const{Duplex:_t}=ot$1,pt=L$6,ft=t$3;var mt={Stream:class extends _t{constructor(e,t,n,s,i,o,r,c){super({mapWritable:vt}),this._node=e,this._protocol=t,this._alias=n,this._remoteAlias=s,this._keyPair=o,this._opening=null,this._openedDone=null,this._timeout=null,this._timeoutMs=0,this._keepAlive=null,this._keepAliveMs=0,this.opened=new Promise((e=>{this._openedDone=e;})),this.noiseStream=this,this.rawStream=this,this.isInitiator=i,this.remotePublicKey=r||null,this.handshakeHash=c||null,this._onStreamClose=yt.bind(this),this._protocol._stream.once("close",this._onStreamClose),this._onOpen=gt.bind(this),this._onDestroy=bt.bind(this),this.resume().pause();}get publicKey(){return this._keyPair.publicKey}alloc(e){return pt.allocUnsafe(e)}setTimeout(e){e||(e=0),this._clearTimeout(),this._timeoutMs=e,e&&(this._timeout=ft.once(e,this._destroyTimeout,this),this._timeout.unref());}setKeepAlive(e){e||(e=0),this._keepAliveMs=e,e&&(this._keepAlive=ft.on(e,this._sendKeepAlive,this),this._keepAlive.unref());}_open(e){null===this._remoteAlias?this._opening=e:(this._resolveOpened(!0),e(null));}_continueOpen(e){const t=this._opening;t?(this._opening=null,e?t(e):this._open(t)):e&&this.destroy(e);}_resolveOpened(e){const t=this._openedDone;t&&(this._openedDone=null,t(e),e&&this.emit("connect"));}_writev(e,t){null!==this._keepAlive&&this._keepAlive.refresh(),this._protocol.data.send({alias:this._alias,data:e}),t(null);}_final(e){this._clearKeepAlive(),this._protocol.end.send({alias:this._alias}),e(null);}_predestroy(){const e=null!==this._remoteAlias;e&&this._protocol.destroy.send({paired:e,alias:this._alias});const t=new Error("Stream was destroyed");this._continueOpen(t);}_destroy(e){this._clearKeepAlive(),this._clearTimeout(),this._resolveOpened(!1),e(null);}_destroyTimeout(){this.destroy(new Error("Stream timed out"));}_clearTimeout(){null!==this._timeout&&(this._timeout.destroy(),this._timeout=null,this._timeoutMs=0);}_clearKeepAlive(){null!==this._keepAlive&&(this._keepAlive.destroy(),this._keepAlive=null,this._keepAliveMs=0);}_sendKeepAlive(){this.write(this.alloc(0));}}};function yt(){this.destroy();}function gt(e){if(this._remoteAlias=e.alias,e.handshakeHash)this.handshakeHash=e.handshakeHash;else {const t=this._node._handshakes.get(e.handshakeId);this._node._handshakes.delete(e.handshakeId),this.handshakeHash=t.hash,this.noiseStream.start(this,{publicKey:this.publicKey,remotePublicKey:this.remotePublicKey,handshake:{publicKey:this.publicKey,remotePublicKey:this.remotePublicKey,hash:t.hash,tx:t.tx,rx:t.rx}});}this._continueOpen();}function bt(e){this.noiseStream.destroy(e.error&&new Error(e.error));}function vt(e){return "string"==typeof e?pt.from(e):e}const Kt=m$5,kt=L$6;var wt={keyPair:function(e){const t=kt.alloc(Kt.crypto_sign_PUBLICKEYBYTES),n=kt.alloc(Kt.crypto_sign_SECRETKEYBYTES);return e?Kt.crypto_sign_seed_keypair(t,n,e):Kt.crypto_sign_keypair(t,n),{publicKey:t,secretKey:n}},hash:function(e){const t=kt.allocUnsafe(32);return Kt.crypto_generichash(t,e),t}};const At=K,St=H$2,{Firewall:Pt}=nt,{Signee:It}=at,{Stream:xt}=mt,Ct=wt,{nextId:Mt}=Ye;var Lt={Server:class extends At{constructor(e,t,n,s={}){super(),this._node=e,this._protocol=t,this._alias=n,this._custodial=!1!==s.custodial,this._firewall=new Pt(e,t,s.firewall||Dt),this._remoteAlias=null,this._keyPair=null,this._address=null,this._listening=null,this._closing=null,this._closed=!1,this._onStreamClose=Et.bind(this),this._protocol._stream.once("close",this._onStreamClose),this._onClosed=Nt.bind(this),this._onListening=Rt.bind(this),this._onConnection=Ut.bind(this),this.ready=async function(){await this._protocol.ready();};}get closed(){return null!==this._closing}get publicKey(){return this._keyPair&&this._keyPair.publicKey}listen(e=this._node.defaultKeyPair){return this._listening||(this._keyPair=e,this._node._signees.set(this._alias,new It(this._protocol,Ct.hash(e.publicKey),e)),this._protocol.listen.send({custodial:this._custodial,alias:this._alias,publicKey:e.publicKey,secretKey:e.secretKey}),this._listening=new Promise((e=>{this.once("listening",(()=>e()));}))),this._listening}address(){return this._address}async close(){return this._closing?this._closing:this._listening?(await this._listening,this._protocol.close.send({alias:this._alias}),this._closing=new Promise((e=>{this.once("close",(()=>e()));})),this._closing):(this._closing=Promise.resolve(),this._closing)}}};function Et(){this._closed||this._onClosed();}function Nt(){this._closed=!0,this._closing=Promise.resolve(),this.emit("close");}function Rt(e){this._remoteAlias=e.alias,this._address={publicKey:this.publicKey,host:e.host,port:e.port},this.emit("listening");}function Ut(e){const t=e.alias,n=Mt(),s=new xt(this._node,this._protocol,n,t,!1,{publicKey:this.publicKey},e.remotePublicKey,e.handshakeHash);if(this._node._connections.set(t,s),s.once("close",(()=>{this._node._connections.delete(t);})),this._protocol.connected.send({alias:n,remoteAlias:t}),!this._custodial){const t=this._node._handshakes.get(e.handshakeId);this._node._handshakes.delete(e.handshakeId);const n=new St(!1,s,{publicKey:s.publicKey,remotePublicKey:s.remotePublicKey,handshake:{publicKey:s.publicKey,remotePublicKey:s.remotePublicKey,hash:t.hash,tx:t.tx,rx:t.rx}});s.noiseStream=n;}this.emit("connection",s.noiseStream);}function Dt(){return !1}const Ht=K,Ot=H$2,{Handshake:qt}=Te,{Protocol:Tt}=xe,{Query:Ft}=Ge,{Server:Qt}=Lt,{Signee:jt}=at,{Stream:Wt}=mt,{announcers:Yt}=Q,{keyPair:Bt}=wt,{nextId:zt}=Ye;var Gt={Node:class extends Ht{constructor(e,t={}){super(),this._protocol=new Tt(e),this._custodial=!1!==t.custodial,this.defaultKeyPair=t.keyPair||Bt(),this._opening=new Map,this._servers=new Map,this._queries=new Map,this._connecting=new Map,this._connections=new Map,this._handshakes=new Map,this._signees=new Map,this._destroyed=!1,this._onStreamClose=Jt.bind(this),this._protocol._stream.once("close",this._onStreamClose),this._onListening=$t.bind(this),this._onClosed=en.bind(this),this._onConnection=Vt.bind(this),this._onIncoming=Xt.bind(this),this._onDestroy=Zt.bind(this),this._onOpen=tn.bind(this),this._onEnd=nn.bind(this),this._onData=sn.bind(this),this._onResult=on.bind(this),this._onFinished=rn.bind(this),this._onSignAnnounce=cn.bind(this),this._onSignUnannounce=dn.bind(this),this._onNoiseSend=an.bind(this),this._onNoiseReceive=hn.bind(this),this._protocol.on("listening",this._onListening).on("closed",this._onClosed).on("connection",this._onConnection).on("incoming",this._onIncoming).on("destroy",this._onDestroy).on("open",this._onOpen).on("end",this._onEnd).on("data",this._onData).on("result",this._onResult).on("finished",this._onFinished).on("signAnnounce",this._onSignAnnounce).on("signUnannounce",this._onSignUnannounce).on("noiseSend",this._onNoiseSend).on("noiseReceive",this._onNoiseReceive).alive().handshake.send({custodial:this._custodial,publicKey:this.defaultKeyPair.publicKey,secretKey:this.defaultKeyPair.secretKey}),this.ready=async function(){await this._protocol.ready();};}get destroyed(){return null!==this._destroyed}connect(e,t={}){const{keyPair:n=this.defaultKeyPair}=t,s=zt(),i=new Wt(this,this._protocol,s,null,!0,n,e);this._connecting.set(s,i);const o=()=>{i.off("open",r),this._connecting.delete(i._alias),this._connections.delete(i._remoteAlias);},r=()=>{this._connecting.delete(i._alias),this._connections.set(i._remoteAlias,i);};if(i.once("close",o).once("open",r),this._protocol.connect.send({custodial:this._custodial,alias:s,publicKey:n.publicKey,secretKey:n.secretKey,remotePublicKey:e}),this._custodial)return i;const c=new Ot(!0,null,{publicKey:n.publicKey,remotePublicKey:e,autoStart:!1});return c.once("close",o),i.noiseStream=c,c}createServer(e={},t){"function"==typeof e&&(t=e,e={}),e={...e,custodial:this._custodial};const n=zt(),s=new Qt(this,this._protocol,n,e);this._opening.set(n,s);const i=()=>{this._opening.delete(s._alias),this._servers.set(s._remoteAlias,s);};return s.once("close",(()=>{s.off("listening",i),this._opening.delete(s._alias),this._servers.delete(s._remoteAlias),this._signees.delete(s._alias);})).once("listening",i),t&&s.on("connection",t),s}lookup(e){const t=new Ft(this._protocol,e,Yt);return this._queries.set(t.id,t),t.once("close",(()=>{this._queries.delete(t.id);})),this._protocol.lookup.send({id:t.id,topic:e}),t}announce(e,t){const n=new Ft(this._protocol,e,Yt);return this._queries.set(n.id,n),this._signees.set(n.id,new jt(this._protocol,e,t)),n.once("close",(()=>{this._queries.delete(n.id),this._signees.delete(n.id);})),this._protocol.announce.send({custodial:this._custodial,id:n.id,topic:e,publicKey:t.publicKey,secretKey:t.secretKey}),n}unannounce(e,t){const n=new Ft(this._protocol,e,Yt);return this._queries.set(n.id,n),this._signees.set(n.id,new jt(this._protocol,e,t)),n.once("close",(()=>{this._queries.delete(n.id),this._signees.delete(n.id);})),this._protocol.unannounce.send({custodial:this._custodial,id:n.id,topic:e,publicKey:t.publicKey,secretKey:t.secretKey}),n.resume().finished()}async destroy(e={}){if(!0!==e.force){const e=[];for(const t of this._servers.values())e.push(t.close());await Promise.allSettled(e);}this._destroyed||(this._destroyed=!0,this._protocol._stream.destroy());}static keyPair(e){return Bt(e)}}};function Jt(){this._protocol.off("listening",this._onListening).off("closed",this._onClosed).off("connection",this._onConnection).off("incoming",this._onIncoming).off("destroy",this._onDestroy).off("open",this._onOpen).off("end",this._onEnd).off("data",this._onData).off("result",this._onResult).off("finished",this._onFinished).off("signAnnounce",this._onSignAnnounce).off("signUnannounce",this._onSignUnannounce).off("noiseSend",this._onNoiseSend).off("noiseReceive",this._onNoiseReceive);}function Vt(e){const t=this._servers.get(e.serverAlias);t&&t._onConnection(e);}function Xt(e){const t=this._servers.get(e.serverAlias);t&&t._firewall._onIncoming(e);}function Zt(e){let t;t=e.paired?this._connections.get(e.alias):this._connecting.get(e.remoteAlias),t&&t._onDestroy(e);}function $t(e){const t=this._opening.get(e.remoteAlias);t&&t._onListening(e);}function en(e){const t=this._servers.get(e.alias);t&&t._onClosed(e);}function tn(e){const t=this._connecting.get(e.remoteAlias);t&&t._onOpen(e);}function nn(e){const t=this._connections.get(e.alias);t&&t.push(null);}function sn(e){const t=this._connections.get(e.alias);if(t){null!==t._timeout&&t._timeout.refresh();for(const n of e.data)(null===t._keepAlive||n.length>0)&&t.push(n);}}function on(e){const t=this._queries.get(e.id);t&&t._onResult(e);}function rn(e){const t=this._queries.get(e.id);t&&t._onFinished(e);}function cn(e){const t=this._signees.get(e.signee);t&&t._onSignAnnounce(e);}function dn(e){const t=this._signees.get(e.signee);t&&t._onSignUnannounce(e);}function an(e){if(e.isInitiator){const t=this._connecting.get(e.remoteStreamAlias);if(t){const n=new qt(this,this._protocol,null,e.id,!0,t._keyPair,t.remotePublicKey);this._handshakes.set(e.id,n),n._onNoiseSend(e);}}else {const t=this._handshakes.get(e.id);t&&t._onNoiseSend(e);}}function hn(e){if(e.isInitiator){const t=this._handshakes.get(e.id);t&&t._onNoiseReceive(e);}else {const t=this._servers.get(e.serverAlias);if(t){const n=new qt(this,this._protocol,t._firewall,e.id,e.isInitiator,t._keyPair,null);this._handshakes.set(e.id,n),n._onNoiseReceive(e);}}}const{noisePayload:ln}=n$2,{encode:un,decode:_n}=t$6;var pn={HandshakeProxy:class{constructor(e,t,n,s,i,o,r,c){this._node=e,this._protocol=t,this._id=n,this._remoteStreamAlias=s,this._serverAlias=i,this._isInitiator=o,this._keyPair=r,this._remotePublicKey=c,this._remoteId=null,this._holepunchSecret=null,this._onNoiseReply=null;}send(e){return this._protocol.noiseSend.send({isInitiator:this._isInitiator,id:this._id,remoteStreamAlias:this._remoteStreamAlias,payload:un(ln,e)}),new Promise(((e,t)=>{this._onNoiseReply=fn.bind(this,e,t);}))}recv(e){return this._protocol.noiseReceive.send({isInitiator:this._isInitiator,id:this._id,serverAlias:this._serverAlias,payload:e}),new Promise(((e,t)=>{this._onNoiseReply=mn.bind(this,e,t);}))}final(){return {id:this._id,isInitiator:this._isInitiator,publicKey:this._keyPair.publicKey,remoteId:this._remoteId,remotePublicKey:this._remotePublicKey,holepunchSecret:this._holepunchSecret}}}};function fn(e,t,n){this._onNoiseReply=null,n.remotePublicKey&&(this._remotePublicKey=n.remotePublicKey),n.complete&&(this._remoteId=n.remoteId,this._holepunchSecret=n.holepunchSecret),e(n.payload);}function mn(e,t,n){this._onNoiseReply=null,n.remotePublicKey&&(this._remotePublicKey=n.remotePublicKey),n.complete&&(this._remoteId=n.remoteId,this._holepunchSecret=n.holepunchSecret),0===n.payload.length?(this._node._handshakes.delete(this._id),t(new Error("Handshake denied"))):e({id:n.id,..._n(ln,n.payload)});}const{noisePayload:yn}=n$2,{encode:gn}=t$6,{nextId:bn}=Ye;var vn={FirewallProxy:class{constructor(e,t,n){this._node=e,this._protocol=t,this._serverAlias=n,this._deny=Kn.bind(this),this._requests=new Map,this._onDeny=wn.bind(this),this._onAccept=An.bind(this);}}};function Kn(e,t){const n=bn();return this._protocol.incoming.send({id:n,serverAlias:this._serverAlias,remotePublicKey:e,payload:gn(yn,t)}),new Promise((e=>{this._requests.set(n,kn.bind(this,e,n));}))}function kn(e,t,n){this._requests.delete(t),e(n);}function wn(e){const t=this._requests.get(e.id);t&&t(!0);}function An(e){const t=this._requests.get(e.id);t&&t(!1);}const{nextId:Sn}=Ye;var Pn={SigneeProxy:class{constructor(e,t,n,s){this._node=e,this._protocol=t,this._target=n,this._signee=s,this._signAnnounce=In.bind(this),this._signUnannounce=xn.bind(this);}}};function In(e,t,n,{peer:s}){const i=Sn();return this._protocol.signAnnounce.send({id:i,signee:this._signee,token:t,peerId:n,relayAddresses:s}),new Promise((e=>{this._node._signatures.set(i,{resolve:e});}))}function xn(e,t,n,{peer:s}){const i=Sn();return this._protocol.signUnannounce.send({id:i,signee:this._signee,token:t,peerId:n,relayAddresses:s}),new Promise((e=>{this._node._signatures.set(i,{resolve:e});}))}const{Duplex:Cn}=ot$1;var Mn={StreamProxy:class extends Cn{constructor(e,t,n,s,i,o={}){super(),this._protocol=e,this._alias=t,this._remoteAlias=n,this._opening=null,this._draining=null,this._ended=2,this.noiseStream=this,this.isInitiator=s,this.publicKey=o.publicKey,this.remotePublicKey=o.remotePublicKey,this.handshakeId=null,this.rawStream=null,!1!==o.autoStart&&this.start(i,o),this.resume().pause();}start(e,t){this.rawStream=e,t.handshake&&(this.publicKey=t.handshake.publicKey,this.remotePublicKey=t.handshake.remotePublicKey,this.handshakeId=t.handshake.id);const n=e=>{this.destroy(e);},s=()=>{this._ended--,this.push(null);},i=e=>{this.push(e);},o=()=>{this._continueWrite();};this.rawStream.once("error",n).once("close",(()=>{this.rawStream.off("error",n).off("end",s).off("data",i).off("drain",o),0!==this._ended&&this.destroy();})).once("end",s).on("data",i).on("drain",o),t.data&&this.push(t.data),t.ended&&this.push(null),this._continueOpen();}_open(e){this.rawStream?e(null):this._opening=e;}_continueOpen(e){const t=this._opening;t?(this._opening=null,e?t(e):this._open(t)):e&&this.destroy(e);}_read(e){this.rawStream.resume(),e(null);}_write(e,t){this.rawStream.write(e,t)?t(null):this._draining=t;}_continueWrite(e){const t=this._draining;t&&(this._draining=null,t(e));}_final(e){this._ended--,this.rawStream.end(),e(null);}_predestroy(){const e=new Error("Stream was destroyed");this._continueOpen(e),this._continueWrite(e),this.rawStream&&this.rawStream.destroy(this._readableState.error||this._writableState.error);}}};const{FirewallProxy:Ln}=vn,{HandshakeProxy:En}=pn,{SigneeProxy:Nn}=Pn,{StreamProxy:Rn}=Mn,Un=wt,{nextId:Dn}=Ye;var Hn={ServerProxy:class{constructor(e,t,n,s,i){this._node=e,this._protocol=t,this._alias=n,this._remoteAlias=s,this._keyPair=i,this._custodial=null!==i.secretKey,this._firewall=new Ln(e,t,n),this._signee=new Nn(e,t,Un.hash(i.publicKey),s),this._server=e._dht.createServer({firewall:this._custodial?this._firewall._deny:null,createHandshake:this._custodial?null:jn.bind(this),createSecretStream:this._custodial?null:Wn.bind(this)}),this._onStreamClose=On.bind(this),this._protocol._stream.once("close",this._onStreamClose),this._onServerClose=qn.bind(this),this._onServerListening=Tn.bind(this),this._onServerConnection=Fn.bind(this),this._server.once("close",this._onServerClose).once("listening",this._onServerListening).on("connection",this._onServerConnection).listen({publicKey:i.publicKey,secretKey:i.secretKey},{signAnnounce:this._custodial?null:this._signee._signAnnounce,signUnannounce:this._custodial?null:this._signee._signUnannounce}),this._onClose=Qn.bind(this);}}};function On(){this._server.close();}function qn(){this._protocol.closed.send({alias:this._alias}),this._server.off("listening",this._onServerListening).off("connection",this._onServerConnection),this._node._servers.delete(this._remoteAlias);}function Tn(){const e=this._server.address();this._protocol.listening.send({alias:this._alias,remoteAlias:this._remoteAlias,host:e.host,port:e.port});}function Fn(e){const t=Dn();this._node._connecting.set(t,e);const n=e=>{this._protocol.destroy.send({alias:t,error:e.message});},s=()=>{this._protocol.end.send({alias:t});},i=e=>{this._protocol.data.send({alias:t,data:[e]});};e.once("error",n).once("close",(()=>{e.off("error",n).off("end",s).off("data",i),this._node._connecting.delete(t,e);})).once("end",s).on("data",i),this._protocol.connection.send({custodial:this._custodial,alias:t,serverAlias:this._alias,remotePublicKey:e.remotePublicKey,handshakeHash:e.handshakeHash,handshakeId:e.handshakeId});}function Qn(){this._server.close();}function jn(e,t){const n=!!t,s=Dn(),i=new En(this._node,this._protocol,s,null,this._alias,n,e,t);return this._node._handshakes.set(s,i),i}function Wn(e,t,n){return new Rn(this._protocol,null,null,e,t,n)}const{encode:Yn}=t$6,{HandshakeProxy:Bn}=pn,{ServerProxy:zn}=Hn,{SigneeProxy:Gn}=Pn,{StreamProxy:Jn}=Mn,{announcers:Vn}=Q,{nextId:Xn}=Ye;var Zn={NodeProxy:class{constructor(e,t,n){this._dht=e,this._protocol=t,this._defaultKeyPair=n,this._servers=new Map,this._queries=new Map,this._connecting=new Map,this._connections=new Map,this._handshakes=new Map,this._signatures=new Map,this._onStreamClose=$n.bind(this),this._protocol._stream.once("close",this._onStreamClose),this._onConnect=es.bind(this),this._onConnected=ts.bind(this),this._onDeny=ns.bind(this),this._onAccept=ss.bind(this),this._onListen=is.bind(this),this._onDestroy=os.bind(this),this._onEnd=rs.bind(this),this._onData=cs.bind(this),this._onQuery=ds.bind(this),this._onLookup=as.bind(this),this._onAnnounce=hs.bind(this),this._onUnannounce=ls.bind(this),this._onClose=us.bind(this),this._onSignature=_s.bind(this),this._onNoiseReply=ps.bind(this),this._protocol.on("connect",this._onConnect).on("connected",this._onConnected).on("deny",this._onDeny).on("accept",this._onAccept).on("listen",this._onListen).on("destroy",this._onDestroy).on("end",this._onEnd).on("data",this._onData).on("lookup",this._onLookup).on("announce",this._onAnnounce).on("unannounce",this._onUnannounce).on("close",this._onClose).on("signature",this._onSignature).on("noiseReply",this._onNoiseReply);}}};function $n(){this._protocol.off("connect",this._onConnect).off("connected",this._onConnected).off("deny",this._onDeny).off("accept",this._onAccept).off("listen",this._onListen).off("destroy",this._onDestroy).off("end",this._onEnd).off("data",this._onData).off("lookup",this._onLookup).off("announce",this._onAnnounce).off("unannounce",this._onUnannounce).off("close",this._onClose).off("signature",this._onSignature).off("noiseReply",this._onNoiseReply);for(const e of this._connections.values())e.destroy();}function es(e){const t=e.alias,n=Xn(),s=null!==e.secretKey,i=this._dht.connect(e.remotePublicKey,{keyPair:{publicKey:e.publicKey,secretKey:e.secretKey},createHandshake:s?null:fs.bind(this,t),createSecretStream:s?null:ms.bind(this,n,t)});this._connections.set(t,i);let o=!1;const r=e=>{this._protocol.destroy.send({paired:o,alias:n,remoteAlias:t,error:e.message});},c=()=>{o=!0,this._protocol.open.send({custodial:s,alias:n,remoteAlias:t,handshakeHash:i.handshakeHash,handshakeId:i.handshakeId});},d=()=>{this._protocol.end.send({alias:n});},a=e=>{this._protocol.data.send({alias:n,data:[e]});};i.once("error",r).once("close",(()=>{i.off("error",r).off("open",c).off("end",d).off("data",a),this._connections.delete(t);})).once("open",c).once("end",d).on("data",a);}function ts(e){const t=this._connecting.get(e.remoteAlias);if(t){this._connecting.delete(e.remoteAlias),this._connections.set(e.alias,t);const n=()=>{this._connections.delete(e.alias);};t.once("close",n);}}function ns(e){for(const t of this._servers.values())if(t._firewall._requests.get(e.id))return t._firewall._onDeny(e)}function ss(e){for(const t of this._servers.values())if(t._firewall._requests.get(e.id))return t._firewall._onAccept(e)}function is(e){const t=e.alias,n=Xn(),s=new zn(this,this._protocol,n,t,e);this._servers.set(t,s);}function os(e){const t=this._connections.get(e.alias);t&&t.destroy(e.error&&new Error(e.error));}function rs(e){const t=this._connections.get(e.alias);t&&t.end();}function cs(e){const t=this._connections.get(e.alias);if(t)for(const n of e.data)t.write(n);}function ds(e,t,n){this._queries.set(e.id,t);const s=()=>{},i=t=>{this._protocol.result.send({id:e.id,data:Yn(n,t)});};t.once("error",s).once("close",(()=>{t.off("error",s).off("data",i),this._queries.delete(e.id),this._protocol.finished.send(e);})).on("data",i);}function as(e){this._onQuery(e,this._dht.lookup(e.topic),Vn);}function hs(e){const t=null!==e.secretKey,n=new Gn(this,this._protocol,e.topic,e.id);this._onQuery(e,this._dht.announce(e.topic,{publicKey:e.publicKey,secretKey:e.secretKey},[],{signAnnounce:t?null:n._signAnnounce,signUnannounce:t?null:n._signUnannounce}),Vn);}function ls(e){const t=null!==e.secretKey,n=new Gn(this,this._protocol,e.topic,e.id);this._onQuery(e,this._dht.lookupAndUnannounce(e.topic,{publicKey:e.publicKey,secretKey:e.secretKey},{signAnnounce:t?null:n._signAnnounce,signUnannounce:t?null:n._signUnannounce}),Vn);}function us(e){const t=this._servers.get(e.alias);t&&t._onClose(e);}function _s(e){const t=this._signatures.get(e.id);t&&t.resolve(e.signature);}function ps(e){const t=this._handshakes.get(e.id);t&&t._onNoiseReply(e);}function fs(e,t,n){const s=!!n,i=Xn(),o=new Bn(this,this._protocol,i,e,null,s,t,n);return this._handshakes.set(i,o),o}function ms(e,t,n,s,i){return new Jn(this._protocol,e,t,n,s,i)}const{Protocol:ys}=xe,{Node:gs}=Gt,{NodeProxy:bs}=Zn;_$1.exports=gs;_$1.exports.relay=function(e,t){const n=new ys(t);return new Promise((t=>{n.once("handshake",(s=>{const i=new bs(e,n,{publicKey:s.publicKey,secretKey:s.secretKey});t(i);})).heartbeat();}))};var Ks=_$1.exports;

const{Duplex:s}=ut$2,n=L$6;function o(e){this.destroy(e);}function i(){this._socket.removeEventListener("error",this._onError),this._socket.removeEventListener("close",this._onClose),this._socket.removeEventListener("open",this._onOpen),this._socket.removeEventListener("message",this._onMessage),this.destroy();}function r(){this._continueOpen();}function h(e){this.push(n.from(e.data));}var _=class extends s{constructor(e,t){super(),this._socket=t,this._socket.binaryType="arraybuffer",this._opening=null,this._onError=o.bind(this),this._onClose=i.bind(this),this._onOpen=r.bind(this),this._onMessage=h.bind(this),this._socket.addEventListener("error",this._onError),this._socket.addEventListener("close",this._onClose),this._socket.addEventListener("open",this._onOpen),this._socket.addEventListener("message",this._onMessage);}_open(e){this._socket.readyState>1?e(new Error("Socket is closed")):this._socket.readyState<1?this._opening=e:e(null);}_continueOpen(e){e&&this.destroy(e);const t=this._opening;t&&(this._opening=null,this._open(t));}_write(e,t){this._socket.send(e),t(null);}_predestroy(){this._continueOpen(new Error("Socket was destroyed"));}_destroy(e){this._socket.close(),e(null);}};

export { c$b as DHT, Ks as RelayedDHT, _ as WebSocketStream };
